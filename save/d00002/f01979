<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta http-equiv="Content-Style-Type" content="text/css" />
 <meta name="MSSmartTagsPreventParsing" content="TRUE" />
 <link rel="stylesheet" type="text/css" href="vstyle.css" />
 <link rel="apple-touch-icon" href="pics/blumenkohl.png" />
 <!--[if IE]>
 <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
 <![endif]-->
 <link rel="icon" type="image/png" href="favicon.png" />
 <link rel="canonical" href="https://www.mirbsd.org/wlog-10_all.htm" />
 <meta name="author" content="Thorsten Glaser" />
 <meta name="copyright" content="All rights reserved. Redistribution except for scientific and educational uses strictly prohibited. Unmodified redistribution with no endorsement permitted." />
 <meta name="owner" content="The MirOS Project and The MirPorts Framework" />
 <meta name="licence" content="see the source files in CVSWEB for details" />
 <title>MirOS: MirOS ξ – Page 3</title>
 <meta name="robots" content="index, follow" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="wlog-10.rss" />
 <!--
  This is copyrighted material. For the full licence text, see the file
  LICENCE in the current directory. In no event may text from this page
  be simply copied into another work covered by an unfree (or otherwise
  mismatching) licence, such as the GNU Free Documentation License.
 -->
</head><body>
<h1><img src="hashed/CD865EB6.png" alt="Developers’ Weblog" /></h1>
<div class="trailing">
<div class="index">
 <ul class="lv1">
<li class="dummy"><a href="main.htm">Main</a><ul class="lv2">
<li class="markindex"><a href="wlog-10.htm">Weblog</a> for #10</li>
<li class="dummy dummy"><a href="tags.htm">Tag Cloud</a></li>
<li class="dummy dummy"><a href="news.htm">Old News</a> &amp;
 <a href="oldnews.htm#owlog">WLog</a></li>
</ul></li>
<li class="dummy"><a href="about.htm">About</a></li>
<!-- these are not in a usable state
<li class="dummy"><a href="docs.htm">Documentation</a></li>
<li class="dummy dummy"><a href="faq.htm">FAQ</a></li>
-->
<li class="spacer dummy"><a href="getting.htm">Download</a></li>
<li class="dummy"><a href="rss.htm">RSS &amp; Mailing Lists</a></li>
<li class="dummy"><a href="irc.htm">IRC</a></li>
<li class="dummy"><a href="wtf.htm" title="WTF‽">Acronyms</a></li>
<li class="dummy"><a href="projects.htm">Project Ideas</a></li>
<li class="dummy"><a href="danke.htm">Donate</a></li>
<li class="dummy"><a href="man.htm">Manpages</a><ul class="lv2">
<li><a href="htman/i386/">i386</a></li>
<li><a href="htman/sparc/">sparc</a></li>
</ul></li>
<li class="dummy"><a href="ports.htm">MirPorts</a> Framework</li>
<li class="dummy"><a href="pkgsrc.htm">pkgsrc®</a> integration</li>
<li class="dummy">Subprojects<ul class="lv2">
<li class="dummy"><a href="jupp.htm">jupp</a> Editor</li>
<li class="dummy"><a href="kwalletcli.htm">KWalletCLI</a></li>
<!-- li class="dummy"><a href="makefs.htm">makefs</a></li -->
<li class="dummy"><a href="mksh.htm">mksh</a> Shell</li>
</ul></li>
 </ul>
</div>
<div class="content">
<p><a href="wlog-10_all.htm">All</a> <a href="wlog-10.htm">1</a> <a href="wlog-10_2.htm">2</a> <a href="wlog-10_3.htm">3</a> <a href="wlog-10_4.htm">4</a> <a href="wlog-10_5.htm">5</a> <a href="wlog-10_6.htm">6</a> <a href="wlog-10_7.htm">7</a> <a href="wlog-10_8.htm">8</a> <a href="wlog-10_9.htm">9</a> <a href="wlog-10_10.htm">10</a> <a href="wlog-10_11.htm">11</a> <a href="wlog-10_12.htm">12</a> <a href="wlog-10_13.htm">13</a> <a href="wlog-10_14.htm">14</a> <a href="wlog-10_15.htm">15</a> <a href="wlog-10_16.htm">16</a> <a href="wlog-10_17.htm">17</a> <a href="wlog-10_18.htm">18</a> <a href="wlog-10_19.htm">19</a> <a href="wlog-10_20.htm">20</a> <a href="wlog-10_21.htm">21</a> <a href="wlog-10_22.htm">22</a> <a href="wlog-10_23.htm">23</a> <a href="wlog-10_24.htm">24</a> <a href="wlog-10_25.htm">25</a> <a href="wlog-10_26.htm">26</a> <a href="wlog-10_27.htm">27</a> <a href="wlog-10_28.htm">28</a> <a href="wlog-10_29.htm">29</a></p>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120810-bsiegert_wlog-10"><a href="permalinks/wlog-10_e20120810-bsiegert.htm#e20120810-bsiegert_wlog-10">Interview about MirOS</a></h2>
<div class="wlsubtitle">10.08.2012 by <a href="mailto:bsiegert@mirbsd.org">bsiegert@</a></div>
<div class="wltagtitle">Tags: <a href="news_all.htm#e20120810-bsiegert_wlog-10">news</a></div>
</div>
<p>I (bsiegert@) have been interviewed by
 <a href="http://www.OSworld.pl/">OSWorld</a>,
 a Polish news site about open source software. The interview took place
 at FOSDEM 2012. I talk about the project, about the community and about
 some of the great things when using open source.
 <a href="http://youtu.be/ASi5aTRPof0">Check out the video.</a></p>

<p>Read the
 <a href="http://osworld.pl/wywiad-z-benny-siegert-deweloperem-mirbsd/">original
 article (in Polish)</a>
 over at OSWorld. Thanks guys!</p>

<p>(Update: Corrected the HTML. Again.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120716-tg_wlog-10"><a href="permalinks/wlog-10_e20120716-tg.htm#e20120716-tg_wlog-10">Apache 2, https clients linked against GnuTLS, connection errors</a></h2>
<div class="wlsubtitle">16.07.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120716-tg_wlog-10">debian</a> tip work</div>
</div>
<p>I’ve been debugging a weird problem at work – after upgrading a
 complex system from lenny to wheezy, <em>some</em> https clients
 failed to connect: GNU wget and Debian’s version of <a href="htman/i386/man1/lynx.htm" class="manlink">lynx(1)</a> which
 is linked against libgnutls26 fail. NSS applications continue to
 work, as does cURL; wget and lynx on MirBSD (linked with OpenSSL
 of course) work. Even Debian’s gnutls-cli tools from both gnutls26
 and gnutls28 work. Huh. The error_log shows renegotiation problems,
 yet setting the new Apache 2 configuration option to “use insecure
 renegotiation” doesn’t help either. (The option is a total #FAIL:
 its only other value is “use secure TLSv1.x renegotiation”, but I
 don’t want/need SSL renegortiation at all, anyway.) Natureshadow
 told me this was a hot issue on Debianforum at the moment, yet,
 nobody had a clue or enough information to file a formal bugreport
 against (initially) apache2, as that’s what changed. I tracked it
 down on a new VM with no configuration otherwise, and here are my
 findings so others don’t run into it.</p>
<p class="boxhead">Tracking down the problem, this can be reduced
 to the following configuration (minimised, to show the problem)
 in <tt>/etc/apache2/sites-enabled/1one</tt>:</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>&lt;VirtualHost *:443&gt;
<span style="display:none;">	</span>	ServerName wiki-70.lan.tarent.de
<span style="display:none;">	</span>	RedirectMatch permanent . https://evolvis-70.lan.tarent.de/
<span style="display:none;">	</span>	SSLEngine on
<span style="display:none;">	</span>	SSLCertificateFile /etc/ssl/W_lan_tarent_de.cer
<span style="display:none;">	</span>	SSLCertificateKeyFile /etc/ssl/private/W_lan_tarent_de.key
<span style="display:none;">	</span>	SSLCertificateChainFile /etc/ssl/godaddy.ca
<span style="display:none;">	</span>&lt;/VirtualHost&gt;
 </pre>
</div><p class="boxfoot">Do not mind the actual content, this is a
 very stripped-down demo on a not-actually-set-up-yet box.</p>
<p class="boxhead">Same is valid for the companion configuration file
 <tt>/etc/apache2/sites-enabled/2two</tt>:</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>NameVirtualHost *:443

<span style="display:none;">	</span>&lt;VirtualHost *:443&gt;
<span style="display:none;">	</span>	ServerName evolvis-70.lan.tarent.de
<span style="display:none;">	</span>	SSLEngine on
<span style="display:none;">	</span>	# workaround for BEAST (CVE-2011-3389), short-term
<span style="display:none;">	</span>	SSLCipherSuite RC4-SHA
<span style="display:none;">	</span>	SSLCertificateFile /etc/ssl/W_lan_tarent_de.cer
<span style="display:none;">	</span>	SSLCertificateKeyFile /etc/ssl/private/W_lan_tarent_de.key
<span style="display:none;">	</span>	SSLCertificateChainFile /etc/ssl/godaddy.ca
<span style="display:none;">	</span>	SSLProtocol TLSv1
<span style="display:none;">	</span>&lt;/VirtualHost&gt;
 </pre>
</div><p class="boxfoot">Turns out the BEAST workaround was at fault here:
 the differing <tt>SSLCipherSuite</tt>s between the vhosts (on the same
 Legacy IP / TCP Port tuple, as we use Wildcard SSL Certificates) made
 Apache 2 want to renegotiate, so either commenting it on <tt>2two</tt>
 or, better, adding it to <tt>1one</tt> helped. Interestingly enough,
 the <tt>SSLProtocol</tt> directive did not matter (in my tests).</p>
<p>So, keep SSL settings synchronised between vhosts. In fact, those
 <em>were</em> already from include files, but <tt>2two</tt> was from
 the “Evolvis 5” generation, whereas we added to <tt>1one</tt> an
 <tt>Include</tt> of the <tt>httpd.ssl1.inc</tt> file generated by
 the previous releases of EvolvisForge and had not switched those
 legacy vhosts to the new configuration, as everything worked on lenny.</p>
<p>This wlog entry brought to you by the system administrators of <a
 href="https://www.tarent.de/">tarent solutions GmbH</a> and the <a
 href="https://evolvis.org/projects/shellsnippets/">Evolvis Project</a>,
 based on <a href="https://fusionforge.org/">FusionForge</a>.</p>
<hr />
<p><strong>Update</strong> 17.05.2013 – Absolutely <strong>do not
 use <tt>RC4-SHA</tt> for SSL/TLS (https)!</strong> It can leak
 over 200 initial plaintext bytes easily. (<a href="htman/i386/man3/arc4random.htm" class="manlink">arc4random(3)</a> is not
 affected from this, especially on MirBSD, nor <a href="htman/i386/man9/arc4random.htm" class="manlink">arc4random(9)</a>.)</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120714-tg_wlog-10"><a href="permalinks/wlog-10_e20120714-tg.htm#e20120714-tg_wlog-10">bubulle’s Cool prompt for git users with mksh</a></h2>
<div class="wlsubtitle">14.07.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120714-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20120714-tg_wlog-10">mksh</a> <a href="tag_pcli_all.htm#e20120714-tg_wlog-10">pcli</a> tip</div>
</div>
<p class="boxhead">Originally <a
 href="http://www.perrier.eu.org/weblog/2012/07/15#cool-prompt">posted
 by bubulle</a> on Planet Debian, a shell prompt that displays the
 current git branch, in colour on some terminals, after the current
 working directory. The following snippet does similar things for
 <a href="mksh.htm">mksh</a> users, except it doesn’t
 redefine your prompt but amend it – just throw it at the bottom of
 your <tt>~/.mkshrc</tt> before that last line beginning with a colon
 (copy from <a href="cvs.cgi/contrib/hosted/tg/deb/mksh/debian/.mkshrc?rev=HEAD"><tt>/etc/skel/.mkshrc</tt></a>
 if you haven’t done that yet):</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>function parse_git_branch {
<span style="display:none;">	</span>	git branch 2&gt;/dev/null | sed -n '/^\* \(.*\)/s//(\1)/p'
<span style="display:none;">	</span>}

<span style="display:none;">	</span>function amend_prompt_with_git {
<span style="display:none;">	</span>	local p q='$(parse_git_branch)' r

<span style="display:none;">	</span>	if [[ $TERM = @(xterm-color|xterm|screen*) ]]; then
<span style="display:none;">	</span>		if [[ ${PS1:1:1} = $'\r' ]]; then
<span style="display:none;">	</span>			p=${PS1:0:1}
<span style="display:none;">	</span>		else
<span style="display:none;">	</span>			p=$'\001'
<span style="display:none;">	</span>			PS1=$p$'\r'$PS1
<span style="display:none;">	</span>		fi
<span style="display:none;">	</span>		q=$p$'\e[1;33m'$p$q$p$'\e[0m'$p
<span style="display:none;">	</span>	fi

<span style="display:none;">	</span>	p=${PS1%%*( )[#$]*( )}
<span style="display:none;">	</span>	if [[ $p != "$PS1" ]]; then
<span style="display:none;">	</span>		# prompt ends with space + #-or-$ + space, we can amend
<span style="display:none;">	</span>		r=${PS1: ${#p}}
<span style="display:none;">	</span>		PS1=$p$q$r
<span style="display:none;">	</span>	fi
<span style="display:none;">	</span>}
<span style="display:none;">	</span>amend_prompt_with_git
<span style="display:none;">	</span>unset -f amend_prompt_with_git
 </pre>
</div><p class="boxfoot">The indirection by use of a function is not
 strictly necessary but allows the use of locals. I took the liberty
 of adding an asterisk after “screen” to match the GNU/Linux nonsense
 of having <tt>TERM=screen.xterm</tt> or somesuch.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120615-tg_wlog-10"><a href="permalinks/wlog-10_e20120615-tg.htm#e20120615-tg_wlog-10">Tricks for dealing with modern-day X.org</a></h2>
<div class="wlsubtitle">15.06.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120615-tg_wlog-10">debian</a> <a href="tag_pcli_all.htm#e20120615-tg_wlog-10">pcli</a> tip</div>
</div>
<p><a href="http://blog.mraw.org/2012/06/15/Fixed/">KiBi is my hero
 of the day.</a> I’ve long wondered why I couldn’t select fixed-misc
 as font on my workstation at the dayjob, which is running Kubuntu
 Hardon Heroin. (Luckily, I managed to avoid upgrading to Prolonged Pain.)
 Now I guess that’ll work again.</p>
<p>My work laptop (running testing) also has got this X.org thingy. <a
 href="cvs.cgi/contrib/samples/dot.Xmodmap">My keyboard
 layout</a> now has got a <tt>grml</tt> branch (named after the person
 who first cursed about the insane idea of those toy-breaking boys to
 rearrange the keycodes) that works with it. Since Debian is marginally
 more sane than Kubuntu, in contrast to the <tt>gnu</tt> branch I use
 on my orkstation, the <tt>grml</tt> branch still has Meta on the left
 Alt key, not Mode_switch, as it still works in uxterm, which reduces
 the diff between the <tt>MAIN</tt> branch (<tt>HEAD</tt>) on XFree86®
 and this beast.</p>
<p class="boxhead">And finally: X.org defaults to a black screen and
 disabled mouse pointer until an application first requests it.
 Totally unacceptable for <a href="htman/i386/man1/evilwm.htm" class="manlink">evilwm(1)</a> users, and letting people think
 it crashed, to boot. The Arch Linux guys found this, among others;
 the fix is: <a href="htman/i386/man1/startx.htm" class="manlink">startx(1)</a> users edit <tt>/etc/X11/xinit/xserverrc</tt>
 to add <tt>-retro</tt> behind the <tt>X</tt>, or copy the file to
 <tt>~/.xserverrc</tt> and change it there:</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>#!/bin/sh

<span style="display:none;">	</span>exec /usr/bin/X -retro -nolisten tcp "$@"
 </pre>
</div><p class="boxfoot">For display managers, similar files exist in
 <tt>/etc/kde4/kdm</tt> and related places.</p>
<p><strong>Update:</strong> Also, newer <a href="htman/i386/man1/xterm.htm" class="manlink">xterm(1)</a> justify <a
 href="https://www.mirbsd.org/cvs.cgi/contrib/samples/dot.Xresources?rev=HEAD">an
 update to <tt>~/.Xresources</tt></a> for we can finally get rid of
 cut buffers, and get a blinking underline cursor to boot!</p>
<!-- RSS stop -->
<p>On the other front, worked on Debian packaging, and upstream on
 <a href="htman/i386/man1/pax.htm" class="manlink">pax(1)</a> and <a href="jupp.htm">jupp</a>, with more things
 to follow (especially in <a href="mksh.htm">mksh</a>).
 Also fixed about ⅔ Linux klibc architectures and learned why I’m a
 BSD developer despite all the bad parts of it ☺ and fixed fakeroot
 with <a href="htman/i386/man1/pax.htm" class="manlink">pax(1)</a> on Hurd… incidentally in code originally designed to
 support the Linux pax. My dayjob’s keeping me busy, but I’ve got
 plans to run <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a> through Sonar, in addition to the static code
 analysēs done by (once again, thanks!) Coverity (commits to mksh
 pending) and Clang/LLVM scan-build. Uhm, what can I say more, grab
 me in IRC if you need it. Ah, and some other mksh things coming up
 that may be of interest to people needing to support legacy scripts.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120519-tg_wlog-10"><a href="permalinks/wlog-10_e20120519-tg.htm#e20120519-tg_wlog-10">MirBSD goes webservice – manpages and WTF‽</a></h2>
<div class="wlsubtitle">19.05.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120519-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20120519-tg_wlog-10">mksh</a> <a href="news_all.htm#e20120519-tg_wlog-10">news</a> <a href="tag_pcli_all.htm#e20120519-tg_wlog-10">pcli</a> tip</div>
</div>
<p>While <a href="htman/i386/man1/wtf.htm" class="manlink">wtf(1)</a> always has been a bit central to <a
 href="main.htm">MirBSD</a>, and the <a
 href="acronyms" type="text/plain; charset=utf-8"
 title="MirBSD WTF acronym database">acronym database</a>
 has been accessible by <a href="cvs.cgi">CVSweb</a>,
 what we never had was a DAU compatible (and <a
 href="https://evolvis.org/projects/shellsnippets/">shellsnippets</a>
 compatible) lookup. This has now changed: the above link to
 the acronyms file is a persistent link to its latest version
 (well, latest when the website was last recompiled), tooltips
 may very well follow soon, and we’ve got an <a
 href="wtf.htm">online WTF lookup service</a>.<br />
 Contributions to the acronym database are welcome, of course;
 just eMail them to <tt>tg＠mirbsd．org</tt>.</p>
<p>Not to stop there, our <a href="man.htm">online
 HTML manpage search</a> is also new, shiny, and should replace
 the “<tt>!mbsdman</tt>” DuckDuckGo hash-bang shortly. (Both of
 these services offer a DDG search as fallback. Note that DDG is
 an external service included herein by linking, under their
 request to spread it, and not affiliated with The MirOS Project.
 They do, however, donate some advertising money to Debian.)<br />
 For all those who didn’t know: only manpages for software in the
 MirOS BSD base system and for the MirPorts Framework package tools
 are listed, not for third-party applications installable using <a
 href="ports.htm">ports</a> or, recently, <a
 href="pkgsrc.htm">pkgsrc®</a>. Still, if you want to have
 a peek at a modern classic BSD’s documentation, you’re welcome. (Not
 to mention content like <a href="htman/i386/man7/re_format.htm" class="manlink">re_format(7)</a> and <a href="htman/i386/man9/style.htm" class="manlink">style(9)</a> and that some of
 our documentation is much more legible than others.)</p>
<p>And because writing all that <a href="htman/i386/man1/perl.htm" class="manlink">perl(1)</a> made me ill, not to
 mention I don’t even <em>know</em> that language, I’ve hacked
 a bit more in the mir﻿<a href="htman/i386/man1/make.htm" class="manlink">make(1)</a> and <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a> parts of the
 MirWebsite, finally implementing pointing out where in the
 navigation sidebar the visitor currently is.</p>
<p>We also have exciting <a href="mksh.htm">mksh</a>
 porting news involving RT trying a larger number of ancient
 platforms than I dare count, me fixing bugs in Linux klibc and
 diving into other things, learning more about why I consider me
 lucky for hacking a BSD operating system… sorry, I want to keep
 this short as it’s mostly an announcement.</p>
<p>The <a href="cvs.cgi/www/">MirWebsite source code</a>
 is, of course, also available. Improvements welcome. Except for
 these three CGIs, our website is fully statically precompiled,
 and that’s a good thing. Please help in making the CGIs secure.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120320-bsiegert_wlog-10"><a href="permalinks/wlog-10_e20120320-bsiegert.htm#e20120320-bsiegert_wlog-10">blog @ TNF</a></h2>
<div class="wlsubtitle">20.03.2012 by <a href="mailto:bsiegert@mirbsd.org">bsiegert@</a></div>
</div>
<p>
 So now I am even
 <a href="http://blog.NetBSD.org/tnf/entry/new_netbsd_flyers_available">posting
  over at TNF</a>
 on <a href="http://blog.NetBSD.org/">blog.NetBSD.org</a>. Julian Fagir
 made new NetBSD flyers, and I committed them to the TNF website.
</p>

<p>I know that I should write more here but there is not much new on the
 MirBSD front.
</p>

<p>
 I updated the showcase to NetBSD-6_BETA on the Dom0, and now X refuses
 to start. Oh well. X does start when using a GENERIC kernel. This is
 very bad for showcase use, of course :(. pkgsrc is going into freeze
 very soon, and I did not do a whole lot of MirBSD fixes this time
 around. This is due to illness, searching for a new job, and working on
 <a href="http://golang.org/">the Go programming language</a>, which is
 expected to hit version 1.0 Real Soon Now(TM).
</p>

<p>
 I brushed up my Algorithms and Data Structures a bit by reading the
 third volume of TAOCP. Fantastic book.
</p>

<!-- tg: DON'T change the link above. Don't even think about it. -->
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120205-bsiegert_wlog-10"><a href="permalinks/wlog-10_e20120205-bsiegert.htm#e20120205-bsiegert_wlog-10">FOSDEM 2012: “pkgsrc on MirBSD”</a></h2>
<div class="wlsubtitle">05.02.2012 by <a href="mailto:bsiegert@mirbsd.org">bsiegert@</a></div>
<div class="wltagtitle">Tags: <a href="tag_event_all.htm#e20120205-bsiegert_wlog-10">event</a> pkgsrc</div>
</div>
<p>This weekend, the <a href="http://fosdem.org/2012">FOSDEM 2012</a>
 took place in Brussels. We gave away DVDs with the latest MirOS BSD
 snapshot and <a
 href="http://ftp.netbsd.org/pub/pkgsrc/packages/MirBSD/i386/10uAE_2011Q3/All/">about
 3&nbsp;GiB of binary packages for pkgsrc</a>.</p>

<p>I gave a talk entitled <b>“pkgsrc on MirBSD”</b>. It gives a short
 introduction to both MirBSD and pkgsrc and details how we managed to
 get MirBSD supported as a platform, including some details on the
 new-developer process at the NetBSD foundation. The slides are now
 available <a href="http://slideshare.net/bsiegert/pkgsrc-on-mirbsd">on
 slideshare</a> or <a href="/MirOS/PR/pkgsrc-on-MirBSD.pdf">as a PDF for
 download</a>.&nbsp;&mdash;</p>

<p>The showcase is doing strange things. The NetBSD-current kernel
 panics reproducibly when the network card, an alc, does not have a
 link. Thus, I put it on a switch with no other connection to “fix” the
 problem. Furthermore, I have a half-finished pkg_rolling-replace on the
 NetBSD side; various things now give Memory Errors, including running
 xfce4-session. Oh well. WindowMaker to the rescue … I am planning on
 redoing the setup on this machine anyway, once NetBSD-6-alpha will have
 been branched. I would also like to use LVM to set up the partitions
 for the Xen domains, to avoid going through a <a href="htman/i386/man4/vnd.htm" class="manlink">vnd(4)</a> device.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120122-bsiegert_wlog-10"><a href="permalinks/wlog-10_e20120122-bsiegert.htm#e20120122-bsiegert_wlog-10">Today's piece of Unix history</a></h2>
<div class="wlsubtitle">22.01.2012 by <a href="mailto:bsiegert@mirbsd.org">bsiegert@</a></div>
</div>
<p>Courtesy of <a
 href="https://plus.google.com/101960720994009339267/posts/3WDmR2RTTrv">Rob
 Pike on Google+</a> and Richard Kettlewell in the comments:</p>

<p>In Plan 9 and Research Unix, <a href="htman/i386/man1/rm.htm" class="manlink">rm(1)</a> also removes empty directories.
 Why doesn't it in Unix? In V7 Unix, only privileged users could
 unlink() a directory. Thus, <a href="htman/i386/man1/rmdir.htm" class="manlink">rmdir(1)</a> was a setuid executable. <a href="htman/i386/man1/rm.htm" class="manlink">rm(1)</a>
 actually called <a href="htman/i386/man1/rmdir.htm" class="manlink">rmdir(1)</a> via fork()+exec() in its recursive mode. Of
 course, there were some bugs in rmdir ...</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120105-tg_wlog-10"><a href="permalinks/wlog-10_e20120105-tg.htm#e20120105-tg_wlog-10">Clone a disc with progress indicator</a></h2>
<div class="wlsubtitle">05.01.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120105-tg_wlog-10">debian</a> <a href="tag_pcli_all.htm#e20120105-tg_wlog-10">pcli</a> tip</div>
</div>
<p>On <a href="main.htm">MirBSD</a> and other sane OSes,
 you can just press <tt>^T</tt> (Ctrl-T) when <a href="htman/i386/man1/dd.htm" class="manlink">dd(1)</a> runs; this sends
 it a <tt>SIGINFO</tt> (cf. <a href="htman/i386/man2/sigaction.htm" class="manlink">sigaction(2)</a>) which asks it to display
 (progress) information to the tty. This includes kFreeBSD, btw.</p>
<p><strong>Update</strong> 07.01.2012 – this also works on Hurd.
 Linux neither has SIGINFO nor (cooked mode tty) support for it.</p>
<p class="boxhead">There’s also pv:</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>dd if=/dev/mapper/vg01-${customername}--hudson bs=1048576 | \
<span style="display:none;">	</span>    pv -pter -B 1048576 -s 85899345920 | \
<span style="display:none;">	</span>    xz -0 &gt;/mnt/ci-${customername}-snap-20120105-lenny.img.xz
 </pre>
</div><p class="boxfoot">I used this At wOrk today to back up a Jenkins VM
 before upgrading its underlying operating system for evaluation. Here, the
 <tt>-s</tt> flag is the total size (in bytes; don’t forget to multiply by
 1024 when reading from Linux’ /proc/partitions) so pv can calculate a total
 and an ETA; <tt>-B</tt> is the same as <tt>bs</tt>; and xz is the currently
 best compressor to use, in any situation, unless you must stay compatible to
 <a href="htman/i386/man1/gzip.htm" class="manlink">gzip(1)</a>-only systems. (Except that it’s not under an Open Source licence.)</p>
<p><a href="http://sourceforge.net/projects/clpbar/">clpbar</a> might also
 be worth looking into. XTaran points out sid has this as bar.</p>
<p>PSA: Last of June, 2012, will be a leap second.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120104-bsiegert_wlog-10"><a href="permalinks/wlog-10_e20120104-bsiegert.htm#e20120104-bsiegert_wlog-10">Quick! A webserver!</a></h2>
<div class="wlsubtitle">04.01.2012 by <a href="mailto:bsiegert@mirbsd.org">bsiegert@</a></div>
<div class="wltagtitle">Tags: golang tip</div>
</div>
<p class="boxhead">If, like me, you occasionally want to transfer some
 files via
 http&mdash;like the sets for a MirOS installation&mdash;but are much
 too lazy to set up apache, here is a simple web server in nine lines of
 Go:</p><div class="boxtext">
<pre>
<span style="display:none;">	</span>package main

<span style="display:none;">	</span>import (
<span style="display:none;">	</span>	"log"
<span style="display:none;">	</span>	. "net/http"
<span style="display:none;">	</span>)

<span style="display:none;">	</span>func main() {
<span style="display:none;">	</span>	Handle("/", FileServer(Dir(".")))
<span style="display:none;">	</span>	log.Fatal(ListenAndServe(":8080", nil))
<span style="display:none;">	</span>}
</pre>
</div><p class="boxfoot">It simply exports the current directory
 via http on port 8080. Neat!</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20111228-tg_wlog-10"><a href="permalinks/wlog-10_e20111228-tg.htm#e20111228-tg_wlog-10">MirBSD-current snapshot uploaded, some things gone</a></h2>
<div class="wlsubtitle">28.12.2011 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="news_all.htm#e20111228-tg_wlog-10">news</a> snapshot</div>
</div>
<p>What’s going on in MirOS Project land? Other than all developers
 being buried in dayjob work, of course… (sorry for that, guys; even
 tg@ has now succumbed to an ever-growing backlog but <em>will</em>
 be back, some time)</p>
<p>tg@ uploaded a new MirBSD-current/i386 snapshot (20111228) plus
 a full set of HTML manpages for all architectures (so they all are
 in the new amber style), and redid the usual combined i386+sparc
 <tt>cdrom10.iso</tt> Midi-ISO as well as the netboot.me kit. Older
 binary packages may no longer be supported: the old libgcc_s DLL
 is no longer provided in <tt>fixes10.ngz</tt>, and it may be time
 to reduce the amount of packages in MirPorts to concentrate on
 those worth the effort and receiving enough care.</p>
<p>Thanks to bsiegert@’s amazing work, the pkgsrc® kit of anno 2007
 could finally be deleted. <a href="pkgsrc.htm">The page
 about pkgsrc® on MirOS</a> describes instructions to use instead.
 At some point, we may release a binary bootstrap kit along with
 the snapshots as set ready for pickup by the installer.</p>
<p>No MirGRML based on the latest Grml 2011.12 release will be made.
 We’ll be investigating a possible solution for a flavour of the
 popular GNU/Linux OS to accompany full Triforce Live CDs in the
 future (for now, we’ll keep the old MirGRML 2009.10 on them).</p>
<p>We hope to be able to return to investing more spare (heh…) time
 into development some time. For now, we apologise for the slowed
 down development and reaction even in important subprojects such
 as <a href="mksh.htm">mksh</a>. Occasionally, they do
 have updates, e.g. <a href="jupp.htm#bins">the latest
 Jupp/Win32 release</a>, or fixes in CVS.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20111218-bsiegert_wlog-10"><a href="permalinks/wlog-10_e20111218-bsiegert.htm#e20111218-bsiegert_wlog-10">pkgsrc-2011Q3 binary packages for MirBSD-current</a></h2>
<div class="wlsubtitle">18.12.2011 by <a href="mailto:bsiegert@mirbsd.org">bsiegert@</a></div>
<div class="wltagtitle">Tags: pkgsrc <a href="news_all.htm#e20111218-bsiegert_wlog-10">news</a></div>
</div>
<p>This is a very late announcement. Binary packages for pkgsrc-2011Q3
 are now available on <a
 href="ftp://ftp.netbsd.org/pub/pkgsrc/packages/MirBSD/i386/10uAE_2011Q3/">ftp://ftp.netbsd.org/pub/pkgsrc/packages/MirBSD/i386/10uAE_2011Q3/</a>.
 The repository contains 5330 packages built on MirOS-current. Any MirOS
 BSD version from 2011 should work.</p>

<p>The packages are self-contained in <tt>/usr/pkg</tt>: The VARBASE has
 been set to <tt>/usr/pkg/var</tt>, and the package database is in
 <tt>/usr/pkg/db</tt>. This matches the MirPorts defaults and
 facilitates using pkgsrc and MirPorts side by side.</p>

<p>In this quarterly release, the new default for MirBSD is to use
 “modular” X11, i.e. install Xorg libraries and programs as packages
 instead of using the system X libs. This improves the compatibility
 with many newer programs, which expect for example that the X libraries
 have pkg-config files. This should not change anything for the user,
 however.</p>

<p>For more information on how to use these packages, consult the
 <a href="pkgsrc.htm">pkgsrc page on mirbsd.org</a>
 or the
 <a href="http://www.netbsd.org/docs/pkgsrc/using.html#using-pkg">relevant
 section of the pkgsrc guide</a>.
</p>
</div>
<p class="linkbot"><a href="wlog-10_all.htm">All</a> <a href="wlog-10.htm">1</a> <a href="wlog-10_2.htm">2</a> <a href="wlog-10_3.htm">3</a> <a href="wlog-10_4.htm">4</a> <a href="wlog-10_5.htm">5</a> <a href="wlog-10_6.htm">6</a> <a href="wlog-10_7.htm">7</a> <a href="wlog-10_8.htm">8</a> <a href="wlog-10_9.htm">9</a> <a href="wlog-10_10.htm">10</a> <a href="wlog-10_11.htm">11</a> <a href="wlog-10_12.htm">12</a> <a href="wlog-10_13.htm">13</a> <a href="wlog-10_14.htm">14</a> <a href="wlog-10_15.htm">15</a> <a href="wlog-10_16.htm">16</a> <a href="wlog-10_17.htm">17</a> <a href="wlog-10_18.htm">18</a> <a href="wlog-10_19.htm">19</a> <a href="wlog-10_20.htm">20</a> <a href="wlog-10_21.htm">21</a> <a href="wlog-10_22.htm">22</a> <a href="wlog-10_23.htm">23</a> <a href="wlog-10_24.htm">24</a> <a href="wlog-10_25.htm">25</a> <a href="wlog-10_26.htm">26</a> <a href="wlog-10_27.htm">27</a> <a href="wlog-10_28.htm">28</a> <a href="wlog-10_29.htm">29</a></p>
</div>
<div class="footer">
<p style="display: none;">Do <em>not</em> send any eMail to <a
 href="mailto:junk@mirbsd.de">junk@mirbsd.de</a>, <a
 href="mailto:junk@mirbsd.org">junk@mirbsd.org</a>, or <a
 href="mailto:junk@mirsolutions.de">junk@mirsolutions.de</a> –
 it won’t do any good to you.</p>
<p>• <a
 href="mailto:miros-discuss@mirbsd.org">eMail</a> contact to The MirOS Project
 • <a href="imprint.htm">Impressum</a> • This website is (supposed
 to be) <a href="http://validator.w3.org/check/referer">Valid HTML</a>! •
</p>
<p class="rcsdiv">Generated <!-- MBSD_HTSCONV_GENDATE_TAG_30284 --> on <span class="rcsid">2013-08-23 23:38:56</span> by <span class="rcsid">$MirOS: www/mk/htsconv,v 1.71 2013/06/08 16:55:56 tg Exp $</span> and <span class="rcsid">$MirOS: www/mk/parser,v 1.23 2012/07/15 14:21:44 tg Exp $</span> and <span class="rcsid">$MirOS: www/mk/inc2htm,v 1.32 2013/08/01 09:39:50 tg Exp $</span> from <span class="rcsid">$MirOS: www/data/wlog-10.cfg,v 1.5 2008/12/04 20:55:09 tg Exp $</span> and <span class="rcsid">$MirOS: www/data/wlog-10.inc,v 1.434 2013/08/23 23:37:52 tg Exp $</span></p>
</div></div>
<div class="heading">
 <img class="hdrlnks" alt="MirOS Logo"
  src="pics/logo-grey.png" />
</div>
</body></html>
