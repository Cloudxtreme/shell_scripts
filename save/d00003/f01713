
<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- SEO meta start -->
      <meta name="keywords" content="JANOG,ジャノグ,日本ネットワークオペレーターズグループ,ネットワーク,オペレーター,オペレータ,オペレーション,ネットワーク,インターネット,JANOGMeeting" />
<meta name="description" content="JANOGとはインターネットに於ける技術的事項、および、それにまつわるオペレーションに関する事項を議論、検討、紹介することにより日本のインターネット技術者、および、利用者に貢献することを目的としたグループです。" />
    <!-- SEO meta end -->

    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    
    <title>ネットワーク | JANOG31 Meeting</title>


    <link href="/common/css/import_main.css" rel="stylesheet" type="text/css" />
    <link href="/meeting/janog31/css/meeting.css" rel="stylesheet" type="text/css" />
<!--    <link href="/meeting/janog31/css/twitter-search.css" rel="stylesheet" type="text/css" /> -->
    <link rel="stylesheet" type="text/css" href="/common/build/menu/assets/skins/sam/menu.css" />
    <link href="/meeting/janog31/css/sphinx.css" rel="stylesheet" type="text/css" />

<!--
    <link rel="stylesheet" href="_static/meeting.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
-->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>


    <link rel="top" title=" | JANOG31 Meeting" href="index.html" /> 


    <!-- Open Graph Protocol start -->
    <meta property="og:title" content="ネットワーク" />
    <meta property="og:type" content="activity" />
    <meta property="og:image" content="http://www.janog.gr.jp/common/banner_img/rect_janog31.jpg" />
    <meta property="og:url" content="http://www.janog.gr.jp/meeting/janog31/network.html" />
    <meta property="og:site_name" content="JANOG" />
    <meta property="fb:admins" content="1342816727" />
    <!-- Open Graph Protocol end -->

    <script type="text/javascript" src="/common/js/heightLine.js"></script>

    <script type="text/javascript" src="/common/build/yahoo-dom-event/yahoo-dom-event.js"></script>

    <script type="text/javascript" src="/common/build/container/container_core.js"></script>

    <script type="text/javascript" src="/common/build/menu/menu.js"></script>

    <script type="text/javascript" src="/common/js/menulist.js"></script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
    <script language="javascript">AC_FL_RunContent = 0;</script>

    <script src="/common/js/AC_RunActiveContent.js" language="javascript"></script>

    <script type="text/javascript" src="/meeting/janog31/js/social-buttons.js"></script>
    <script type="text/javascript" src="/meeting/janog31/js/ga-custom.js"></script>
  </head>

  <body>

    <div id="all">

      <div id="main">

        <!-- header area start -->
        <div id="header_block">

          <div class="header">
            <p><a href="/index.html">JApan Network Operators' Group：日本ネットワーク・オペレーターズ・グループ</a></p>
	  </div>

          <!-- rotation banner start -->
            		<div class="r_banner">

<!-- for blank --><img src="/common/banner_img/r_banner_white.jpg" alt="rotation banner" />

<!-- for jpeg -->
<!--
       	<a href="http://www.janog.gr.jp/cgi-bin/tf-enq/enq.cgi?id=tfenq"><img src="/common/banner_img/tf-enq.jpg" alt="rotation banner" /></a>  
-->

<!-- for flash -->

<!--<script language="javascript">

	if (AC_FL_RunContent == 0) {

		alert("このページでは \"AC_RunActiveContent.js\" が必要です。");

	} else {

		AC_FL_RunContent(

			'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0',

			'width', '468',

			'height', '60',

			'src', '/common/banner_img/j23_sponsors_090109-01',

			'quality', 'high',

			'pluginspage', 'http://www.macromedia.com/go/getflashplayer',

			'align', 'middle',

			'play', 'true',

			'loop', 'true',

			'scale', 'showall',

			'wmode', 'window',

			'devicefont', 'false',

			'id', 'j23_sponsors_090109-01',

			'bgcolor', '#ffffff',

			'name', 'j23_sponsors_090109-01',

			'menu', 'true',

			'allowFullScreen', 'false',

			'allowScriptAccess','sameDomain',

			'movie', '/common/banner_img/j23_sponsors_090109-01',

			'salign', ''

			); //end AC code

	}

</script>

<noscript>

	<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="468" height="60" id="j23_sponsors_090109-01" align="middle">

	<param name="allowScriptAccess" value="sameDomain" />

	<param name="allowFullScreen" value="false" />

	<param name="movie" value="/common/banner_img/j23_sponsors_090109-01.swf" /><param name="quality" value="high" /><param name="bgcolor" value="#ffffff" />	<embed src="/common/banner_img/j23_sponsors_090109-01.swf" quality="high" bgcolor="#ffffff" width="468" height="60" name="j23_sponsors_090109-01" align="middle" allowScriptAccess="sameDomain" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />

	</object>

</noscript> -->



        </div>


          <!-- rotation banner end -->

          <!-- main menu start -->
                    <div class="mainmenu">
			<div class="yui-skin-sam" id="yahoo-com">
			  <div id="productsandservices" class="yuimenubar yuimenubarnav">
			    <div class="bd">
			      <ul class="first-of-type">
			        <li class="yuimenubaritem first-of-type">
			          <a class="yuimenubaritemlabel" href="http://www.janog.gr.jp/">HOME</a>
 			       </li>
 			       <li class="yuimenubaritem">
 			         <a class="yuimenubaritemlabel" href="http://www.janog.gr.jp/information/">General Information</a>
 			       </li>
			        <li class="yuimenubaritem">
			          <a class="yuimenubaritemlabel" href="#">Meetings</a>
			        </li>
   			        <li class="yuimenubaritem">
			          <a class="yuimenubaritemlabel" href="http://www.janog.gr.jp/mailinglist.html">Mailing List</a>
			        </li>
			        <li class="yuimenubaritem">
			          <a class="yuimenubaritemlabel" href="#">Archive</a>
			        </li>
			        <li class="yuimenubaritem">
			          <a class="yuimenubaritemlabel" href="#">Resource</a>
			        </li>
			        <li class="yuimenubaritem">
			          <a class="yuimenubaritemlabel" href="http://www.janog.gr.jp/sponsor.html">Sponsors</a>
<!--			          <a class="yuimenubaritemlabel" href="/sponsors/">Sponsors</a>  -->
			        </li>
			        <li class="yuimenubaritem">
			          <a class="yuimenubaritemlabel" href="http://www.janog.gr.jp/en/">English Page</a>
			        </li>
			      </ul>
			    </div>
			  </div>
			</div>
		</div>
          <!--main menu end -->


          <div class="heder_line">
            <img src="/common/img/head_line.jpg" alt="head_line" />
          </div>

        </div>
        <!-- header area end -->


        <div class="contentsBox">

          <!-- left box start -->
          <div class="leftBox">
            <img src="/meeting/janog31/img/j31_head_img.jpg" alt="JApan Network Operators' Group" />
            <div class="contents">
			    
              <!-- local menu start -->
                					<div class="l_menu heightLine">

					<h2></h2>

						<div class="txtBox">

						<a href="/meeting/janog31/index.html"><img src="/meeting/janog31/img/info.gif" alt="開催概要" /></a>
<!--
						<a href="/meeting/janog31/pgm_app.html"><img src="/meeting/janog31/img/pgm_app.gif" alt="プログラム募集" /></a>

						<a href="/meeting/janog31/staff_app.html"><img src="/meeting/janog31/img/staff_app.gif" alt="スタッフ募集" /></a>

-->
						<a href="/meeting/janog31/program/index.html"><img src="/meeting/janog31/img/program.gif" alt="プログラム" /></a> 

						<a href="/meeting/janog31/tutorial/index.html"><img src="/meeting/janog31/img/tutorial.gif" alt="チュートリアル" /></a> 

<!--
						<a href="/meeting/janog31/hall.html"><img src="/meeting/janog31/img/hall.gif" alt="会場案内" /></a>

						<a href="/meeting/janog31/localinfo.html"><img src="/meeting/janog31/img/local.gif" alt="現地情報" /></a>

-->
						<a href="/meeting/janog31/network.html"><img src="/meeting/janog31/img/network.gif" alt="ネットワーク" /></a>

						<a href="/meeting/janog31/regist/"><img src="/meeting/janog31/img/reg.gif" alt="出席登録" /></a>

<!--
						<a href="/meeting/janog31/lt_bof_app.html"><img src="/meeting/janog31/img/lt_bof_app.gif" alt="LT/BoF募集" /></a>


						<a href="/meeting/janog31/lt_app.html"><img src="/meeting/janog31/img/lt_app.gif" alt="LT募集" /></a>
-->
						<a href="/meeting/janog31/enq.html"><img src="/meeting/janog31/img/enq.gif" alt="アンケート" /></a>

						<a href="/meeting/janog31/host.html"><img src="/meeting/janog31/img/host.gif" alt="ホスト・協賛" /></a>

<!--
                                                <a href="/meeting/janog31/newsletter/index.html"><img src="/meeting/janog31/img/newsletter.gif" alt="ニュースレター" /></a>
-->
						<a href="/meeting/janog31/stafflist.html"><img src="/meeting/janog31/img/staff.gif" alt="スタッフ" /></a>
<!--
						<a href="/meeting/janog31/link.html"><img src="/meeting/janog31/img/link.gif" alt="関連リンク" /></a>

-->
						<a href="/en/index.php?JANOG31%20Programs"><img src="/meeting/janog31/img/english.gif" alt="English" /></a>
</div>

					</div>

              <!-- local menu end -->

              <img src="/common/img/main_contents_t.gif" alt="" style="margin:3px 0 0 0;" />

              <!-- main contents start -->
              <div class="main_contents heightLine">
                <div class="txtBox">

                      
                    

                  <div class="document">
                    <div class="documentwrapper">
                      <div class="bodywrapper">

                        <div class="body" id="body">
                          
  <div class="section" id="network">
<span id="id1"></span><h1>ネットワーク</h1>
<ul class="simple">
<li><a class="reference internal" href="#network-la"><em>本会議場ネットワークの作り方</em></a></li>
<li><a class="reference internal" href="#network-info"><em>会場ネットワーク情報</em></a></li>
<li><a class="reference internal" href="#network-topology"><em>ネットワーク構成</em></a></li>
<li><a class="reference internal" href="#network-sponsor"><em>回線・機材提供</em></a></li>
<li><a class="reference internal" href="#network-experiment"><em>実験ネットワークについて</em></a></li>
<li><a class="reference internal" href="#network-map-e"><em>MAP-E</em></a></li>
<li><a class="reference internal" href="#network-ds-lite"><em>DS-LITE</em></a></li>
<li><a class="reference internal" href="#network-464xlat"><em>464XLAT</em></a></li>
<li><a class="reference internal" href="#network-hana"><em>HANA</em></a></li>
</ul>
<div class="section" id="network-la">
<span id="id2"></span><h2>本会議場ネットワークの作り方</h2>
<p>JANOG31 Meeting本会議場で提供したネットワークの構想から設計、構築までを <a class="reference external" href="./LA.html">JANOG Meeting本会議場ネットワークの作り方</a> にまとめました。</p>
</div>
<div class="section" id="network-info">
<span id="id3"></span><h2>会場ネットワーク情報</h2>
<p>JANOG31本会議場には、以下6つのネットワークを提供しております。</p>
<table class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head stub">SSID</th>
<th class="head stub">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><th class="stub">janog31</th>
<td>本会議用NW (802.11a)</td>
</tr>
<tr class="row-odd"><th class="stub">janog31-bg</th>
<td>本会議用NW (802.11b/g)</td>
</tr>
<tr class="row-even"><th class="stub">janog31-map-e1</th>
<td>MAP-E実験用NW1</td>
</tr>
<tr class="row-odd"><th class="stub">janog31-map-e2</th>
<td>MAP-E実験用NW2</td>
</tr>
<tr class="row-even"><th class="stub">janog31-464xlat</th>
<td>464XLAT実験用NW</td>
</tr>
<tr class="row-odd"><th class="stub">janog31-ds-lite</th>
<td>DS-Lite実験用NW</td>
</tr>
<tr class="row-even"><th class="stub">janog31-hana</th>
<td>HANA実験用NW</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>暗号方式はWPA2です。</li>
<li>暗号キーは、会場で配布するパンフレットでご確認ください。</li>
<li>IEEE802.11a対応の端末をお持ちの方は、なるべくjanog31をご利用ください。</li>
<li>会場内での無線LAN AP(モバイルルータ等)のご利用はお控えください。</li>
<li>端末や通信のセキュリティについては、ご自身において対策を講じてください。</li>
<li>ネットワークは全て、IPv4/IPv6デュアルスタック環境です。</li>
<li>会場ネットワークでの成果について対外発表をすることがあります。</li>
<li>発表における基礎データとして、会場ネットワークで計測したトラフィックデータを使用することがあります。</li>
<li>トラフィックの測定方法は、SNMP、NetFlowおよびsFlowです。なお、個人を特定する情報の収集は行いません。</li>
</ul>
</div>
<div class="section" id="network-topology">
<span id="id4"></span><h2>ネットワーク構成</h2>
<a class="reference external image-reference" href="./img/janog31-topology.png"><img alt="img/janog31-topology.png" src="img/janog31-topology.png" style="width: 500px;" /></a>
</div>
<div class="section" id="network-sponsor">
<span id="id5"></span><h2>回線・機材提供</h2>
<p>JANOG31の会場ネットワークは、以下企業及び有志のご協力により構築しております(敬称略・五十音順)。</p>
<ul class="simple">
<li>インターネット環境提供<ul>
<li>グリー株式会社</li>
</ul>
</li>
<li>接続回線・機材提供<ul>
<li>IP Infusion Japan 合同会社</li>
<li>株式会社インターネットイニシアティブ</li>
<li>A10ネットワークス株式会社</li>
<li>NECアクセステクニカ株式会社</li>
<li>エヌ・ティ・ティ・コミュニケーションズ株式会社</li>
<li>有限会社銀座堂</li>
<li>シスコシステムズ合同会社</li>
<li>独立行政法人 情報通信研究機構(NICT)</li>
<li>古河ネットワークソリューション株式会社</li>
<li>丸紅アクセスソリューションズ株式会社</li>
<li>三井情報株式会社</li>
<li>ヤマハ株式会社</li>
</ul>
</li>
<li>ネットワーク設計・設営<ul>
<li>JANOG Softwire WG</li>
<li>JANOG31実行委員会およびJANOG運営委員</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="network-experiment">
<span id="id6"></span><h2>実験ネットワークについて</h2>
<p>JANOG31では通常のdual stackネットワークの他、「IPv4/IPv6移行・共存技術」と「新世代ネットワーク」の2つのテーマに沿って</p>
<ul class="simple">
<li>3種類のIPv4 over IPv6技術<ul>
<li>MAP-E</li>
<li>DS-lite</li>
<li>464XLAT</li>
</ul>
</li>
<li>広域ネットワークの自動構築を実現するHANA(Hierarchical Automatic Number Allocation)</li>
</ul>
<p>を用いた実験ネットワークを無線LANにて提供します。</p>
<div class="section" id="ipv4-over-ipv6">
<h3>IPv4 over IPv6技術について</h3>
<p>2012年9月14日にはRIPE NCCでも最後の1ブロックからの割り当てが始まりました。IPv4アドレスの世界的枯渇を迎え、IPv6への緩やかな移行を実現するためのIPv4/IPv6共存技術が必要とされています。なかでもIPv4 over IPv6技術は、ISPなどの多数のユーザを持つ事業者が、IPv4の消費を抑えながら、なおかつdual stackで数多くの顧客を収容する手法として注目されています。</p>
<p>現在、IETF(特にSoftwire WG)にて数多くのIPv4 over IPv6技術の提案がされておりますが、その中でも注目される3つの技術を利用したNWを、今回のJANOG31では用意しました。</p>
<p>IPv4 over IPv6技術は一般的に、</p>
<pre>
(Private)IPv4------(CPE)------IPv6------(PE)------(Global)IPv4
</pre><dl class="docutils">
<dt>カスタマ側装置(CPE)</dt>
<dd>プライベートIPv4からIPv6-NWに接続する装置</dd>
<dt>プロバイダ側装置(PE)</dt>
<dd>IPv6-NWからグローバルIPv4-NWに接続する装置</dd>
</dl>
<p>の2つの装置と機能により、離れたIPv4空間がIPv6に橋渡しされることによって成り立っています。</p>
<p>それぞれの技術について、各装置の機能と名称が異なります。</p>
<table class="docutils">
<colgroup>
<col width="14%" />
<col width="29%" />
<col width="29%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head stub">&nbsp;</th>
<th class="head stub">MAP-E</th>
<th class="head stub">DS-Lite</th>
<th class="head stub">464XLAT</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><th class="stub">方式</th>
<td>トンネリング</td>
<td>トンネリング</td>
<td>2段トランスレーション</td>
</tr>
<tr class="row-odd"><th class="stub">PE側セッション</th>
<td>ステートレス</td>
<td>ステートフル</td>
<td>ステートフル</td>
</tr>
<tr class="row-even"><th class="stub"><div class="first last line-block">
<div class="line">CPE</div>
<div class="line">(名称/機能)</div>
</div>
</th>
<td><div class="first last line-block">
<div class="line">CE</div>
<div class="line">NAPT44+トンネリング</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">B4</div>
<div class="line">トンネリング</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">CLAT</div>
<div class="line">ステートレストランスレーション</div>
</div>
</td>
</tr>
<tr class="row-odd"><th class="stub"><div class="first last line-block">
<div class="line">PE</div>
<div class="line">(名称/機能)</div>
</div>
</th>
<td><div class="first last line-block">
<div class="line">BR</div>
<div class="line">トンネリング</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">AFTR</div>
<div class="line">NAPT44+トンネリング</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">PLAT</div>
<div class="line">ステートフルトランスレーション</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>特に、ステートレスにグローバルIPv4アドレスを割り当てるMAP-Eでは、1CPEに割り当てられるポート数が制限されることから、今回のNWでは、ポート割当て数の異なる2つのNWを用意しました。</p>
<dl class="docutils" id="network-experiment-ref">
<dt>参考資料:</dt>
<dd><div class="first last line-block">
<div class="line"><a class="reference external" href="http://www.kokatsu.jp/blog/ipv4/data/interop2012/s20-ishida-20120614.pdf">IPv4 over IPv6 技術の 最新動向と標準化</a></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="map-e">
<span id="network-map-e"></span><h2>MAP-E</h2>
<div class="section" id="id8">
<h3>技術について</h3>
<p>MAP-Eはステートレスなトンネリング方式によりIPv4 over IPv6を実現します。</p>
<p>MAP-Eでは、IPv4 over IPv6パケットのIPv4アドレス/ポートとIPv6アドレスの対応が一意に決まります。CEは付与されたIPv6 prefixから、MAP特有のルール <a class="reference internal" href="#network-map-e-ref"><em>[1]</em></a> によってグローバルIPv4 Network用のIPv4アドレス/ポートレンジを生成します。</p>
<p>CEがプライベートIPv4 Networkからパケットを受けた時、CEはNAPT44により、受けたパケットを上記のIPv4アドレス/ポートに変換します。NAPT44変換後のパケットはIPv6 EncapsulationされIPv6 Networkに送出されます。BRがIPv6 Networkからパケットを受けた時、BRは受けたパケットをDecapsulationし、得られたIPv4パケットをグローバルIPv4 Networkへ送出します。</p>
<p>BRがグローバルIPv4 Networkからパケットを受けた時、BRは受けたパケットのIPv4宛先アドレス/ポートからMAP特有のルールによってIPv6宛先アドレスを作成します。グローバルIPv4 Networkからのパケットは上記のIPv6宛先アドレスでEncapsulationされ、IPv6 Networkに送出されます。CEがIPv6 Networkからパケットを受けた時、CEは受けたパケットをDecapsulationし、NAPT44変換を行い、得られたIPv4パケットをプライベートIPv4 Networkへ送出します。</p>
<a class="reference external image-reference" href="./img/MAP-E.png"><img alt="img/MAP-E.png" src="img/MAP-E.png" style="width: 500px;" /></a>
</div>
<div class="section" id="id9">
<h3>特徴について</h3>
<p>MAP-Eはステートレスであるため、BRはユーザ数やセッション数ではなくトラフィック量に応じた設備投資が可能であり <a class="reference internal" href="#network-map-e-ref"><em>[2]</em></a> 、冗長構成を容易に構築できます。</p>
</div>
<div class="section" id="id10">
<h3>標準化の動向</h3>
<p>2010年から議論されてきた4rdの技術の中のなかで、IPv4アドレスとport番号のマッピングルールを洗練させ、統一したのがMAPとして定義されました。現在は、IPv4パケットをカプセル化(Encapsulation)する方式であるMAP-Eが主流で、標準化が進められています。</p>
<p>※MAP-E以外にもIPv4パケットをトランスレーションするMAP-Tが存在します。</p>
</div>
<div class="section" id="janog31-map-e1janog31-map-e2">
<h3>janog31-map-e1とjanog31-map-e2の違いについて</h3>
<p>上記のように、MAP-Eではmapping ruleにより、各CPEに固定の数のportが割り当てられます。今回のJANOG31会場NWでは、</p>
<ul class="simple">
<li>1つのCPEに240portを割り当てるNW(janog31-map-e1)</li>
<li>1つのCPEに30portを割り当てるNW(janog31-map-e2)</li>
</ul>
<p>の2種類を用意しました。</p>
<p>janog31-map-e1に接続したユーザは、全ユーザで240portを共用します。janog31-map-e2では、30portを共有します。多数のユーザが接続した環境では、ポート枯渇が発生する可能性があります。JANOG31参加者に30portという厳しいport restriction環境を体験していただくために用意しました。</p>
</div>
<div class="section" id="id11">
<h3>会場ネットワークでのMAP-E</h3>
<a class="reference external image-reference" href="./img/janog31-topology-map-e.png"><img alt="img/janog31-topology-map-e.png" src="img/janog31-topology-map-e.png" style="width: 437px;" /></a>
<p>BRで2社の実装、CEで4社の実装を提供いただいております。無線LANの関係で、全てを同時に提供することができないため、以下のスケジュールで各実装の切り替えを行います。</p>
<a class="reference external image-reference" href="./img/BR_CE_schedule.png"><img alt="img/BR_CE_schedule.png" src="img/BR_CE_schedule.png" style="width: 500px;" /></a>
<p>1日目のBRにはIP Infusion(IPI)のソフトウェアの実装、2日目の切り替え後は古河ネットワークソリューション(FNSC)のルータ、FX5000を使用しています。CEにはインターネットイニシアティブ(IIJ)のSEIL/X1、FNSCのF60、銀座堂浅間さんのASAMAP、ヤマハのRTX1200が参戦しました。</p>
<p>IPIとASAMAPの実装はソフトウェアでの提供となっているため、それぞれPCルータとして動作させます。FNSCのFX5000は通信事業者向けのマルチサービスルータで、直流48V入力のためAC/DCコンバータを挟むほどの大型で本格的なルータです。</p>
<p>会場ネットワークではIPv4とIPv6の経路が異なります。各CEとExp-GWの間はIPv6オンリーのセグメントになっています。IPv6パケットはExp-GWから上流のJANOG-GWにそのまま抜けて行きますが、IPv4パケットはCEでカプセル化されてIPv6パケットとなった後、Exp-GWでBRの方向へルーティングされ、BRでカプセル化解除された後、Exp-GWにてIPv4でルーティングされます。</p>
<p>なお、BRの切り替えについては2日目のセッション「 <a class="reference external" href="http://www.janog.gr.jp/meeting/janog31/program/softwire.html">Softwire WG活動報告</a> 」の中でデモを行います。実験概要は下図の通りですが、skypeによるビデオ中継を投影しながら切り替えます。どうぞお楽しみに!</p>
<a class="reference external image-reference" href="./img/BR_exp.png"><img alt="img/BR_exp.png" src="img/BR_exp.png" style="width: 500px;" /></a>
<dl class="docutils" id="network-map-e-ref">
<dt>参考資料:</dt>
<dd><div class="first last line-block">
<div class="line">[1]: <a class="reference external" href="http://datatracker.ietf.org/doc/draft-ietf-softwire-map/">Mapping of Address and Port with Encapsulation (MAP) draft-ietf-softwire-map-02</a></div>
<div class="line">[2]: <a class="reference external" href="http://www.janog.gr.jp/meeting/janog30/doc/janog30-map-after-matsushima-01.pdf">JANOG30 これでいいのか4rd -標準化と実装と運用のはざまの奮闘記-</a></div>
<div class="line">[3]: <a class="reference external" href="http://www.janog.gr.jp/wp/softwire-wg/">JANOG softwire WG</a></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="ds-lite">
<span id="network-ds-lite"></span><h2>DS-LITE</h2>
<div class="section" id="id12">
<h3>技術について</h3>
<p>近年のIPv4の枯渇問題を踏まえ、IPv4の延命策として考えられたのが、ISP側で多数のIPv4プライベートアドレスを大規模にNATして、ひとつのIPv4グローバルアドレスに多くの顧客を収容する、LSN(Large Scale NAT)/CGN(Carrier Grade NAT)という考えでした。このLSN/CGNの利用モデルとして、IPv4ネットワークをアクセス網に使うのがNAT444、そして、IPv6網を使うのが、今回紹介するDS-Liteという技術です。DS-Liteは、IPv4 over IPv6トンネルをベースとした、ステートフル方式のIPv4/IPv6共存通信技術です。ユーザ側から外部インターネットに出る通信の際は、B4が、IPv4パケットをIPv6でカプセル化し、ISPの管理するIPv6網をトンネリングさせます。その後、AFTRが、B4とのトンネルを終端し、IPv6のカプセル化を解きます。そして現れた元のIPv4プライベートアドレスを、IPv4グローバルアドレスへと変換し、外部インターネットへ接続します。</p>
<a class="reference external image-reference" href="./img/DS-Lite.png"><img alt="img/DS-Lite.png" src="img/DS-Lite.png" style="width: 500px;" /></a>
</div>
<div class="section" id="id13">
<h3>特徴について</h3>
<p>DS-LiteはIPv4 over IPv6トンネリング技術であるため、同じLSN/CGNの利用モデルであるNAT444とは異なり、NATを一段階しか行いません。そのため、ISP側はシェアドIPv4アドレスを用意する必要がなくなります。つまり、アクセス網にはIPv6ネットワークだけを用意すればよいため、単一プロトコルで動かすことが出来、運用が容易となります。しかしながら、ユーザ側のCPE(B4)へのデュアルスタック機能搭載必須、ログ取得の複雑化、冗長化必須などといった、デメリットもあります。</p>
</div>
<div class="section" id="id14">
<h3>標準化動向</h3>
<p>2013年1月現在、標準化は完了しており(RFC6333)、シスコシステムズ、A10ネットワークス、ジュニパーネットワークス各社が、AFTR機能を実装しています。また同時に、AFTRの機能をOSSへの実装する動きもあります。</p>
</div>
<div class="section" id="id15">
<h3>会場ネットワークでのDS-Lite</h3>
<a class="reference external image-reference" href="./img/janog31-topology-ds-lite-464xlat.png"><img alt="img/janog31-topology-ds-lite-464xlat.png" src="img/janog31-topology-ds-lite-464xlat.png" style="width: 344px;" /></a>
<p>DS-LiteではAFTRにA10ネットワークスのAX2500を採用しました。AX2500は後述の464XLATのPLATを同時にこなしています。B4には2つの実装が参加しました。1日目はNECアクセステクニカのRG-A45Iで、2日目はIIJのSEIL/X1がB4として動作します。SEIL/X1は公式にはDS-Liteをサポートしていませんが、B4としての動作の可能性があったため、挑戦してみました。</p>
<dl class="docutils" id="network-ds-lite-ref">
<dt>参考資料:</dt>
<dd><div class="first last line-block">
<div class="line">[1]: <a class="reference external" href="http://tools.ietf.org/html/rfc6333">RFC6333</a></div>
<div class="line">[2]: <a class="reference external" href="http://enog.jp/wp-content/uploads/2012/10/ENOG17_IPv4_over_IPv6.pdf">ENOG17 IPv4 over IPv6 技術の動向とJPIXの取り組み</a></div>
<div class="line">[3]: <a class="reference external" href="http://www.janog.gr.jp/meeting/janog26/doc/post-dslite-kashimura.pdf">JANOG26 IPv6時代のIPv4を考える ～DS-Lite</a></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="xlat">
<span id="network-464xlat"></span><h2>464XLAT</h2>
<div class="section" id="id16">
<h3>技術について</h3>
<p>464XLATは、クライアントサイドでIPv4/IPv6変換を行い，プロバイダ側ではIPv6/IPv4変換を行うことで、IPv6のみのネットワークを経由して、IPv4インターネットに接続することを可能にする技術です。</p>
<p>なお、464XLATの名前は文字通り、46のプロトコル変換(XLAT:トランスレーション)と64のプロトコル変換(XLAT:トランスレーション)を組み合わせて使用することから命名されています。</p>
<p>464XLATを利用する際、クライアント側に置かれるCLAT(Customer side XLAT)では、ステートレスなアドレス変換を行います。なお、IPv6アドレスにIPv4アドレスを含んだパケットフォーマットにて通信が行われます。プロトコル変換の際にパケットのフラグメント処理が必要であれば、フラグメントヘッダを付加して送信を行います。</p>
<p>プロバイダサイドに置かれる装置は、PLAT(Provider side XLAT)と呼びます。PLATではステートフルなIPv6/IPv4変換(NAT64)を行います。IPv4プロトコルへの変換時にプールされているグローバルIPv4アドレスを利用します。</p>
<a class="reference external image-reference" href="./img/464XLAT.png"><img alt="img/464XLAT.png" src="img/464XLAT.png" style="width: 500px;" /></a>
</div>
<div class="section" id="id17">
<h3>特徴について</h3>
<p>464XLATを利用して通信する場合、クライアントサイドではステートレスなプロトコル変換とフラグメント処理を行う機能を実装するだけで済み、IPv4 NAPTの機能も不要となるため、実装がシンプルになり、比較的処理コストも少なく済みます。</p>
<p>また、プロバイダサイドでは通信が発生した時点でポートが確保されるため、予めポートを確保するMAP方式(MAP-E、MAP-T)よりも、IPv4アドレスを効率よく利用することができます。</p>
<p>しかし、PLATではアドレスとポートの対応を保持し、ログを取る必要があります。</p>
<p>なお、プロトコル変換を用いた技術であるため、IPv4 - IPv6間で通信を行いたい要求が出てきた際にも、小規模な対応により実現可能なため、投資コストを抑制しつつ、IPv6へのスムーズな移行を行うことができます。</p>
</div>
<div class="section" id="id18">
<h3>標準化の動向</h3>
<p>CLATで用いられるステートレスなアドレス変換技術は RFC6145 <a class="reference internal" href="#network-464xlat-ref"><em>[1]</em></a> として、2011年4月にRFCとなりました。同様に、PLATで用いられるステートフルなプロトコル変換技術も同時期に、RFC6146 <a class="reference internal" href="#network-464xlat-ref"><em>[2]</em></a> として標準化されました。</p>
<p>464XLATは、RFC6145とRFC6146の2つの技術を組合せた技術として、ITEFのv6opsワーキンググループにて標準化が進められています <a class="reference internal" href="#network-464xlat-ref"><em>[3]</em></a> 。現在、IESG Reviewが行われており、RFC発行に向けた最終段階に入っています。</p>
<p>なお、上記の通り、標準化が完了した技術の組合せであるため、ベンダー側の実装も進んでおり、PLATに対応した機器としては複数のベンダー(Cisco、Juniper、A10 Networks、F5 Networks等)が利用可能です。CLATに対応した装置としては、NECアクセステクニカのプロトタイプ機やAndroid用のcode <a class="reference internal" href="#network-464xlat-ref"><em>[4]</em></a> やNokia n900用のcode <a class="reference internal" href="#network-464xlat-ref"><em>[5]</em></a> などが提供されています。</p>
</div>
<div class="section" id="id19">
<h3>会場ネットワークでの464XLAT</h3>
<a class="reference external image-reference" href="./img/janog31-topology-ds-lite-464xlat.png"><img alt="img/janog31-topology-ds-lite-464xlat.png" src="img/janog31-topology-ds-lite-464xlat.png" style="width: 344px;" /></a>
<p>464XLATはInterop Tokyoなどでも実績のあるA10ネットワークスのAX2500とNECアクセステクニカのCL-AT1000Pのコンビで運用されています。AX2500はPLATと同時にDS-LiteのAFTRとしても動作しています。IPv4/IPv6/IPv4変換の世界をお楽しみください。</p>
<dl class="docutils" id="network-464xlat-ref">
<dt>参考資料:</dt>
<dd><div class="first last line-block">
<div class="line">[1]: <a class="reference external" href="http://tools.ietf.org/html/rfc6145">RFC6145</a></div>
<div class="line">[2]: <a class="reference external" href="http://tools.ietf.org/html/rfc6146">RFC6146</a></div>
<div class="line">[3]: <a class="reference external" href="http://datatracker.ietf.org/doc/draft-ietf-v6ops-464xlat/">464XLAT: Combination of Stateful and Stateless Translation draft-ietf-v6ops-464xlat-08</a></div>
<div class="line">[4]: <a class="reference external" href="https://android-review.googlesource.com/#/c/34490/">Android-CLAT (CLAT code for Android)</a></div>
<div class="line">[5]: <a class="reference external" href="https://code.google.com/p/n900ipv6/wiki/README">n900ipv6 (CLAT code for Nokia n900)</a></div>
<div class="line">[6]: <a class="reference external" href="http://www.janog.gr.jp/meeting/janog30/program/v64.html">JANOG30 「IPv6時代のIPv4を考える」～第二章～</a></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="hana">
<span id="network-hana"></span><h2>HANA</h2>
<p>1日目の昼休み13時50分からNICTによるHANAの発表とデモンストレーションを実施します。詳しくは <a class="reference external" href="http://www.janog.gr.jp/meeting/janog31/program/HANA.html">こちら</a> をご覧ください。</p>
<table class="docutils">
<caption>デモンストレーションのスケジュール</caption>
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>1/24</td>
<td>13:50</td>
<td>発表と経路迂回デモ</td>
</tr>
<tr class="row-even"><td>1/24</td>
<td>15:45</td>
<td>経路迂回デモ</td>
</tr>
<tr class="row-odd"><td>1/24</td>
<td>13:05</td>
<td>経路迂回デモ</td>
</tr>
<tr class="row-even"><td>1/24</td>
<td>15:50</td>
<td>経路迂回デモ</td>
</tr>
</tbody>
</table>
<a class="reference external image-reference" href="./img/hana_abst.png"><img alt="img/hana_abst.png" src="img/hana_abst.png" style="width: 428px;" /></a>
<p>HANA(Hierarchical Automatic Number Allocation)はNICTで研究されている新世代ネットワークの技術の1つで、広域ネットワークに対して自動で階層的に位置情報(アドレス)を付与する技術です。自動でアドレスが割り当てられるため、ネットワーク機器へのIPアドレスの設定作業が不要になり、運用の負荷やアドレス設定ミスなどの人為故障が軽減されます。</p>
<p>HANAでは上位ネットワーク(AS)から下位ネットワークに対して階層的にアドレスを割り振っています。このとき2つの上位ネットワークに対してマルチホームを行なっているネットワーク内の機器には、上位の2つのネットワークからそれぞれ2つの位置情報が割り当てられます。つまりアドレス空間を2つ持ちます。これによって経路の集約が可能になります。またマルチホームを行なっているネットワークでは複数のアドレスが利用できるために障害発生時にアドレスを変えることで迂回経路をすぐに確保することが可能になります。HANAプロトコルは上位ネットワークから位置情報の割り当て情報が降ってくるというイメージで、これが途絶えることで通信断を検知します。</p>
<p>JANOG31ではHANAを用いた実験ネットワークを構築し、本会議中に上位ネットワークにあたる部分で障害を発生させ、アドレスが切り替わることで迅速に迂回路を確保するデモンストレーションを行います。なお、通常のPCではHANAプロトコルに対応していないため、アドレスを2つ受け取って切り替えて使うということができません。そのためIPv4ではNAPTした後NAT/DHCPルータがHANAクライアントの役割を行います。IPv6ではRAを用いて擬似的にHANAの環境を再現します。</p>
</div>
<div class="section" id="hananw">
<h2>HANAの実験NWの構成と経路迂回デモ</h2>
<div class="section" id="id21">
<h3>HANA実験ネットワーク構成</h3>
<p>図にJANOG31におけるHANAの実験ネットワークトポロジーとHANAによって割り当てられるアドレスを示します。</p>
<a class="reference external image-reference" href="./img/hana-topology.png"><img alt="img/hana-topology.png" src="img/hana-topology.png" style="width: 500px;" /></a>
<p>Top ISPにはIPv4/26、IPv6/56が割り当てられています。図には記載していませんが、ISP1、2はTop ISPに対してIPv4/28、IPv6/58を割り当ててもらうためのmidfix requestを送り、Top ISPはmidfixackでISP1に0.0.0.16/26-28(IPv4)と0:0:0:40/56-58(IPv6)、ISP2に0.0.0.32/26-28(IPv4)と0:0:0:80/56-58(IPv6)のmidfixを割り当てます。同様にEDGEはISP1、2の両方に対してIPv4/29、IPv6/59のmidfix requestを送り、両者からmidfix 0.0.0.8/28-29(IPv4)と0:0:0:20/58-59(IPv6)を割り当ててもらいます(一般的には2つの上流ISPから割り当てられるmidfixは同じ値とは限らない)。これによって自動的に階層的なアドレスの付与が実現されます。ISP1、2から割り当てられるmidfixはISP1のものの方が優先度が高く設定されるため、EDGEはISP1のアドレスを使用するようになります。</p>
<p>昼休みと午後の休憩の時間にTop ISPとISP1の間のリンクを切断し、インターネットへの通信の経路をISP2経由に切り替えるデモンストレーションを行います。</p>
</div>
<div class="section" id="id22">
<h3>HANAによる経路迂回デモンストレーション</h3>
<a class="reference external image-reference" href="./img/hana-topology-failure.png"><img alt="img/hana-topology-failure.png" src="img/hana-topology-failure.png" style="width: 500px;" /></a>
<p>Top ISPとISP1の間のリンクを切断すると、ISP1を経由するHANAの広告が停止するため、EDGEとNATはISP1から割り当てられたアドレス(赤色)の使用を止め、ISP2から割り当てられたアドレス(青色)を使用するように切り替えます。IPv4ではNAPTの外部アドレスが変更になり、IPv6ではクライアントに割り当てられるアドレスが直接変わります。</p>
<p>HANAを用いたネットワークにおける経路迂回は次のような特徴を持ちます。</p>
<ul class="simple">
<li>IGP/EGPの収束に必要な時間がHANAの伝送時間に置き換わるため、高速に迂回路が設定される</li>
<li>送信元アドレスが変わるため、TCPセッションが切れる</li>
</ul>
<p>デモンストレーション中は</p>
<ul>
<li><div class="first line-block">
<div class="line">外部サーバにpingを打ち続けて、tcpdumpでping送信元のアドレスが変わったことを確認する</div>
<div class="line">※HANA配下のクライアントからのSSHは切断されるので気をつけてください</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">mtrやtracerouteを実行して経路を確認する</div>
</div>
</li>
</ul>
<p>といった方法で経路迂回が行われる様子をお楽しみいたければと思います。</p>
<p>以下に各ノードでのHANAの設定を記します。非常にシンプルなコンフィグになっていることが一目でお分かりいただけると思います。</p>
<pre>
#top
nodename=top
hanad_v4_uppersites="0.0.0.0/0"
hanad_v6_uppersites="0:0:0:0::0/0"
hanad_v4prefixes='x.x.x.0/26'
hanad_v4prefixlen=26
hanad_v6prefixes='x:x:x::/56'
hanad_v6prefixlen=56
lower_interfaces="eth2"
hanad_midfixoffer_priority_for_eth2=1

# ISP1
nodename=isp1
upper_interfaces="eth1"
lower_interfaces="eth2"
hanad_v4prefixlen=28
hanad_v6prefixlen=58
hanad_midfixoffer_priority_for_eth2=10

# ISP2
nodename=isp2
upper_interfaces="eth1"
lower_interfaces="eth2"
hanad_v4prefixlen=28
hanad_v6prefixlen=58
hanad_midfixoffer_priority_for_eth2=100

# Edge
nodename=edge
upper_interfaces="eth1 eth2"
lower_interfaces="eth3"
hanad_v4prefixlen=29
hanad_v6prefixlen=59
hanad_midfixoffer_priority_for_eth3=1

# NAT
nodename=nat
upper_interfaces="eth1"
ifconfig_v4prefixlen_for_eth1=30
hanad_v4prefixlen=30
hanad_v6prefixlen=60
dhcpserver_interfaces="eth2"
hanad_dhcpserver_v4pool_for_eth2="0.0.0.2-0.0.0.3"
hanad_dhcpserver_v6pool_for_eth2="::0:0:0:2-::0:0:0:ff"
hanaroute_dhcp_script=$HANABIN/dhcpd-nat.sh
</pre><dl class="docutils" id="network-hana-ref">
<dt>参考文献:</dt>
<dd><div class="first last line-block">
<div class="line">[1]: <a class="reference external" href="http://www.nict.go.jp/press/2012/06/07-1.html">http://www.nict.go.jp/press/2012/06/07-1.html</a></div>
<div class="line">[2]: <a class="reference external" href="http://www.nict.go.jp/publication/NICT-News/1209/03.html">http://www.nict.go.jp/publication/NICT-News/1209/03.html</a></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="id23">
<h2>ソーシャルボタン</h2>
<p id="social-button">
  ソーシャルボタンを読み込み中か、
  お使いのブラウザではソーシャルボタンをご利用いただけません。
</p><p>(最終更新日: 2013.03.04)</p>
</div>
</div>


                        </div>
                      </div>

                    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        </div>
      </div>

                  </div>




                </div>
              </div>
              <!-- main contents end -->

            </div>

          </div>
          <!-- left box end -->

          <!-- right box start -->
            			<div class="rightBox">

				<div class="rectBox">

					<a href="/meeting/janog31/"><img src="/common/banner_img/rect_janog31.jpg" alt="JANOG31 Meeting" width="248" height="250" /></a>                </div>

<div class="textad">

  JANOG31は<a href="http://www.gree.co.jp/" target="_blank">グリー株式会社</a>のホストにより開催しました。                </div>

  <div class="bnrBox">

                </div>

	        </div>

          <!-- right box end -->

          <!-- footer area start -->				
            		<div class="footer"><img src="/common/img/footer.gif" alt="footer" border="0" usemap="#Map" />
            <map name="Map" id="Map"><area shape="rect" coords="784,14,832,30" href="http://www.janog.gr.jp/sitemap.html" alt="Sitemap" />
            <area shape="rect" coords="846,15,950,30" href="http://www.janog.gr.jp/contact.html" alt="Contact to JANOG" />
            </map>
        </div>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-3942588-1']);
_gaq.push(['_setCampNameKey', 'cp']);
_gaq.push(['_setCampMediumKey', 'md']);
_gaq.push(['_setCampSourceKey', 'sr']);
_gaq.push(['_setCampTermKey', 'tr']);
_gaq.push(['_setCampContentKey', 'co']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

  // enable the APNIC IPProtoTest and feed google analytics events
  if ('http:' == document.location.protocol) {
   var ipproto_user = '735381';
   (function() {
    var iga = document.createElement('script'); iga.type = 'text/javascript'; iga.async = true; 
    iga.src = 'http://labs.apnic.net/ipprototest.js';
    var is = document.getElementsByTagName('script')[0]; is.parentNode.insertBefore(iga, is); 
   })();
  }

</script>

          <!-- footer area end -->			

        </div>
      </div>
    </div>
  </body>

</html>
