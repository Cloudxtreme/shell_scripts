<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta http-equiv="Content-Style-Type" content="text/css" />
 <meta name="MSSmartTagsPreventParsing" content="TRUE" />
 <link rel="stylesheet" type="text/css" href="vstyle.css" />
 <link rel="apple-touch-icon" href="pics/blumenkohl.png" />
 <!--[if IE]>
 <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
 <![endif]-->
 <link rel="icon" type="image/png" href="favicon.png" />
 <link rel="canonical" href="https://www.mirbsd.org/tag_pcli_all.htm" />
 <meta name="author" content="Thorsten Glaser" />
 <meta name="copyright" content="All rights reserved. Redistribution except for scientific and educational uses strictly prohibited. Unmodified redistribution with no endorsement permitted." />
 <meta name="owner" content="The MirOS Project and The MirPorts Framework" />
 <meta name="licence" content="see the source files in CVSWEB for details" />
 <title>MirOS: MirBSD for Planet CLI – All in One Page</title>
 <meta name="robots" content="index, follow" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="tag_pcli.rss" />
 <!--
  This is copyrighted material. For the full licence text, see the file
  LICENCE in the current directory. In no event may text from this page
  be simply copied into another work covered by an unfree (or otherwise
  mismatching) licence, such as the GNU Free Documentation License.
 -->
</head><body>
<h1><img src="hashed/52E5F16D.png" alt="planet-cli tag cloud" /></h1>
<div class="trailing">
<div class="index">
 <ul class="lv1">
<li class="dummy"><a href="main.htm">Main</a><ul class="lv2">
<li class="dummy"><a href="wlog-10.htm">Weblog</a> for #10</li>
<li class="markindex dummy"><a href="tags.htm">Tag Cloud</a></li>
<li class="dummy dummy"><a href="news.htm">Old News</a> &amp;
 <a href="oldnews.htm#owlog">WLog</a></li>
</ul></li>
<li class="dummy"><a href="about.htm">About</a></li>
<!-- these are not in a usable state
<li class="dummy"><a href="docs.htm">Documentation</a></li>
<li class="dummy dummy"><a href="faq.htm">FAQ</a></li>
-->
<li class="spacer dummy"><a href="getting.htm">Download</a></li>
<li class="dummy"><a href="rss.htm">RSS &amp; Mailing Lists</a></li>
<li class="dummy"><a href="irc.htm">IRC</a></li>
<li class="dummy"><a href="wtf.htm" title="WTF‽">Acronyms</a></li>
<li class="dummy"><a href="projects.htm">Project Ideas</a></li>
<li class="dummy"><a href="danke.htm">Donate</a></li>
<li class="dummy"><a href="man.htm">Manpages</a><ul class="lv2">
<li><a href="htman/i386/">i386</a></li>
<li><a href="htman/sparc/">sparc</a></li>
</ul></li>
<li class="dummy"><a href="ports.htm">MirPorts</a> Framework</li>
<li class="dummy"><a href="pkgsrc.htm">pkgsrc®</a> integration</li>
<li class="dummy">Subprojects<ul class="lv2">
<li class="dummy"><a href="jupp.htm">jupp</a> Editor</li>
<li class="dummy"><a href="kwalletcli.htm">KWalletCLI</a></li>
<!-- li class="dummy"><a href="makefs.htm">makefs</a></li -->
<li class="dummy"><a href="mksh.htm">mksh</a> Shell</li>
</ul></li>
 </ul>
</div>
<div class="content">
<p><a href="tag_pcli_all.htm">All</a> <a href="tag_pcli.htm">1</a> <a href="tag_pcli_2.htm">2</a></p>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20130718-tg_wlog-10"><a href="permalinks/wlog-10_e20130718-tg.htm#e20130718-tg_wlog-10">mksh/Win32</a></h2>
<div class="wlsubtitle">18.07.2013 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20130718-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20130718-tg_wlog-10">mksh</a> <a href="news_all.htm#e20130718-tg_wlog-10">news</a> <a href="tag_pcli_all.htm#e20130718-tg_wlog-10">pcli</a></div>
</div>
<p>Michael Langguth and Scalaris AG asked me to publish <a
 href="https://www.mirbsd.org/MirOS/dist/mir/mksh/ports/mksh-w32-beta14.zip">the
 mksh/Win32 Beta 14</a> source and binary archive, and it is with joy
 I’m doing this.</p>
<h3>Checksums and Hashes</h3><ul>
  <li>RMD160 (ports/mksh-w32-beta14.zip) = 0dc8ef6e95592bd132f701ca77c4e0a3afe46f24</li>
  <li>TIGER (ports/mksh-w32-beta14.zip) = 966e548f9e9c1d5b137ae3ec48e60db4a57c9a0ed15720fb</li>
  <li>1181543005 517402 /MirOS/dist/mir/mksh/ports/mksh-w32-beta14.zip</li>
  <li>MD5 (ports/mksh-w32-beta14.zip) = b57367b0710bf76a972b493562e2b6b5</li>
</ul>
<p>Just a few words on it (more in the README.1st file included): this is
 a port of <a href="mksh.htm">The MirBSD Korn Shell</a> R39 to
 the native WinAPI; it’s not quite got the full Unix feel (especially as
 it targets the Weihenstephan unxutils instead of a full Interix or Cygwin
 environment) but doesn’t need a full POSIX emulation layer either. It’s
 intended to replace MKS ksh and the MKS Toolkit. Source for the compatibility
 library is also included under <a href="MirOS-Licence.htm">The
 MirOS Licence</a>; we aim at publishing it as OSI Certified Open Source
 Software like mksh itself. (There is a situation with dlmalloc/nedmalloc
 being resolved, and the icon is derived from the BSD dæmon which is a
 protected unregistered trademark, but we’re not Mozilla and allow distro
 packages to keep using it ☺) Rebasing it on a newer <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a> followed by
 (partial) integration into the main source code is a goal.</p>
<p>Have fun trying it out and hacking on it. It’s currently built with
 <tt>-DMKSH_NOPROSPECTOFWORK</tt> (so coprocesses and a few other minor
 things won’t work), but a <tt>SIGCHLD</tt> emulation is being worked
 on – but if you want to help out, I’m sure it’s welcome, just come on
 <a href="irc.htm">IRC</a> or post on the mailing list, and
 I’ll forward things to Michael as needed. Reports on testing with other
 toolchain and OS versions are also welcome.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120714-tg_wlog-10"><a href="permalinks/wlog-10_e20120714-tg.htm#e20120714-tg_wlog-10">bubulle’s Cool prompt for git users with mksh</a></h2>
<div class="wlsubtitle">14.07.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120714-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20120714-tg_wlog-10">mksh</a> <a href="tag_pcli_all.htm#e20120714-tg_wlog-10">pcli</a> tip</div>
</div>
<p class="boxhead">Originally <a
 href="http://www.perrier.eu.org/weblog/2012/07/15#cool-prompt">posted
 by bubulle</a> on Planet Debian, a shell prompt that displays the
 current git branch, in colour on some terminals, after the current
 working directory. The following snippet does similar things for
 <a href="mksh.htm">mksh</a> users, except it doesn’t
 redefine your prompt but amend it – just throw it at the bottom of
 your <tt>~/.mkshrc</tt> before that last line beginning with a colon
 (copy from <a href="cvs.cgi/contrib/hosted/tg/deb/mksh/debian/.mkshrc?rev=HEAD"><tt>/etc/skel/.mkshrc</tt></a>
 if you haven’t done that yet):</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>function parse_git_branch {
<span style="display:none;">	</span>	git branch 2&gt;/dev/null | sed -n '/^\* \(.*\)/s//(\1)/p'
<span style="display:none;">	</span>}

<span style="display:none;">	</span>function amend_prompt_with_git {
<span style="display:none;">	</span>	local p q='$(parse_git_branch)' r

<span style="display:none;">	</span>	if [[ $TERM = @(xterm-color|xterm|screen*) ]]; then
<span style="display:none;">	</span>		if [[ ${PS1:1:1} = $'\r' ]]; then
<span style="display:none;">	</span>			p=${PS1:0:1}
<span style="display:none;">	</span>		else
<span style="display:none;">	</span>			p=$'\001'
<span style="display:none;">	</span>			PS1=$p$'\r'$PS1
<span style="display:none;">	</span>		fi
<span style="display:none;">	</span>		q=$p$'\e[1;33m'$p$q$p$'\e[0m'$p
<span style="display:none;">	</span>	fi

<span style="display:none;">	</span>	p=${PS1%%*( )[#$]*( )}
<span style="display:none;">	</span>	if [[ $p != "$PS1" ]]; then
<span style="display:none;">	</span>		# prompt ends with space + #-or-$ + space, we can amend
<span style="display:none;">	</span>		r=${PS1: ${#p}}
<span style="display:none;">	</span>		PS1=$p$q$r
<span style="display:none;">	</span>	fi
<span style="display:none;">	</span>}
<span style="display:none;">	</span>amend_prompt_with_git
<span style="display:none;">	</span>unset -f amend_prompt_with_git
 </pre>
</div><p class="boxfoot">The indirection by use of a function is not
 strictly necessary but allows the use of locals. I took the liberty
 of adding an asterisk after “screen” to match the GNU/Linux nonsense
 of having <tt>TERM=screen.xterm</tt> or somesuch.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120615-tg_wlog-10"><a href="permalinks/wlog-10_e20120615-tg.htm#e20120615-tg_wlog-10">Tricks for dealing with modern-day X.org</a></h2>
<div class="wlsubtitle">15.06.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120615-tg_wlog-10">debian</a> <a href="tag_pcli_all.htm#e20120615-tg_wlog-10">pcli</a> tip</div>
</div>
<p><a href="http://blog.mraw.org/2012/06/15/Fixed/">KiBi is my hero
 of the day.</a> I’ve long wondered why I couldn’t select fixed-misc
 as font on my workstation at the dayjob, which is running Kubuntu
 Hardon Heroin. (Luckily, I managed to avoid upgrading to Prolonged Pain.)
 Now I guess that’ll work again.</p>
<p>My work laptop (running testing) also has got this X.org thingy. <a
 href="cvs.cgi/contrib/samples/dot.Xmodmap">My keyboard
 layout</a> now has got a <tt>grml</tt> branch (named after the person
 who first cursed about the insane idea of those toy-breaking boys to
 rearrange the keycodes) that works with it. Since Debian is marginally
 more sane than Kubuntu, in contrast to the <tt>gnu</tt> branch I use
 on my orkstation, the <tt>grml</tt> branch still has Meta on the left
 Alt key, not Mode_switch, as it still works in uxterm, which reduces
 the diff between the <tt>MAIN</tt> branch (<tt>HEAD</tt>) on XFree86®
 and this beast.</p>
<p class="boxhead">And finally: X.org defaults to a black screen and
 disabled mouse pointer until an application first requests it.
 Totally unacceptable for <a href="htman/i386/man1/evilwm.htm" class="manlink">evilwm(1)</a> users, and letting people think
 it crashed, to boot. The Arch Linux guys found this, among others;
 the fix is: <a href="htman/i386/man1/startx.htm" class="manlink">startx(1)</a> users edit <tt>/etc/X11/xinit/xserverrc</tt>
 to add <tt>-retro</tt> behind the <tt>X</tt>, or copy the file to
 <tt>~/.xserverrc</tt> and change it there:</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>#!/bin/sh

<span style="display:none;">	</span>exec /usr/bin/X -retro -nolisten tcp "$@"
 </pre>
</div><p class="boxfoot">For display managers, similar files exist in
 <tt>/etc/kde4/kdm</tt> and related places.</p>
<p><strong>Update:</strong> Also, newer <a href="htman/i386/man1/xterm.htm" class="manlink">xterm(1)</a> justify <a
 href="https://www.mirbsd.org/cvs.cgi/contrib/samples/dot.Xresources?rev=HEAD">an
 update to <tt>~/.Xresources</tt></a> for we can finally get rid of
 cut buffers, and get a blinking underline cursor to boot!</p>
<!-- RSS stop -->
<p>On the other front, worked on Debian packaging, and upstream on
 <a href="htman/i386/man1/pax.htm" class="manlink">pax(1)</a> and <a href="jupp.htm">jupp</a>, with more things
 to follow (especially in <a href="mksh.htm">mksh</a>).
 Also fixed about ⅔ Linux klibc architectures and learned why I’m a
 BSD developer despite all the bad parts of it ☺ and fixed fakeroot
 with <a href="htman/i386/man1/pax.htm" class="manlink">pax(1)</a> on Hurd… incidentally in code originally designed to
 support the Linux pax. My dayjob’s keeping me busy, but I’ve got
 plans to run <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a> through Sonar, in addition to the static code
 analysēs done by (once again, thanks!) Coverity (commits to mksh
 pending) and Clang/LLVM scan-build. Uhm, what can I say more, grab
 me in IRC if you need it. Ah, and some other mksh things coming up
 that may be of interest to people needing to support legacy scripts.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120519-tg_wlog-10"><a href="permalinks/wlog-10_e20120519-tg.htm#e20120519-tg_wlog-10">MirBSD goes webservice – manpages and WTF‽</a></h2>
<div class="wlsubtitle">19.05.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120519-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20120519-tg_wlog-10">mksh</a> <a href="news_all.htm#e20120519-tg_wlog-10">news</a> <a href="tag_pcli_all.htm#e20120519-tg_wlog-10">pcli</a> tip</div>
</div>
<p>While <a href="htman/i386/man1/wtf.htm" class="manlink">wtf(1)</a> always has been a bit central to <a
 href="main.htm">MirBSD</a>, and the <a
 href="acronyms" type="text/plain; charset=utf-8"
 title="MirBSD WTF acronym database">acronym database</a>
 has been accessible by <a href="cvs.cgi">CVSweb</a>,
 what we never had was a DAU compatible (and <a
 href="https://evolvis.org/projects/shellsnippets/">shellsnippets</a>
 compatible) lookup. This has now changed: the above link to
 the acronyms file is a persistent link to its latest version
 (well, latest when the website was last recompiled), tooltips
 may very well follow soon, and we’ve got an <a
 href="wtf.htm">online WTF lookup service</a>.<br />
 Contributions to the acronym database are welcome, of course;
 just eMail them to <tt>tg＠mirbsd．org</tt>.</p>
<p>Not to stop there, our <a href="man.htm">online
 HTML manpage search</a> is also new, shiny, and should replace
 the “<tt>!mbsdman</tt>” DuckDuckGo hash-bang shortly. (Both of
 these services offer a DDG search as fallback. Note that DDG is
 an external service included herein by linking, under their
 request to spread it, and not affiliated with The MirOS Project.
 They do, however, donate some advertising money to Debian.)<br />
 For all those who didn’t know: only manpages for software in the
 MirOS BSD base system and for the MirPorts Framework package tools
 are listed, not for third-party applications installable using <a
 href="ports.htm">ports</a> or, recently, <a
 href="pkgsrc.htm">pkgsrc®</a>. Still, if you want to have
 a peek at a modern classic BSD’s documentation, you’re welcome. (Not
 to mention content like <a href="htman/i386/man7/re_format.htm" class="manlink">re_format(7)</a> and <a href="htman/i386/man9/style.htm" class="manlink">style(9)</a> and that some of
 our documentation is much more legible than others.)</p>
<p>And because writing all that <a href="htman/i386/man1/perl.htm" class="manlink">perl(1)</a> made me ill, not to
 mention I don’t even <em>know</em> that language, I’ve hacked
 a bit more in the mir﻿<a href="htman/i386/man1/make.htm" class="manlink">make(1)</a> and <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a> parts of the
 MirWebsite, finally implementing pointing out where in the
 navigation sidebar the visitor currently is.</p>
<p>We also have exciting <a href="mksh.htm">mksh</a>
 porting news involving RT trying a larger number of ancient
 platforms than I dare count, me fixing bugs in Linux klibc and
 diving into other things, learning more about why I consider me
 lucky for hacking a BSD operating system… sorry, I want to keep
 this short as it’s mostly an announcement.</p>
<p>The <a href="cvs.cgi/www/">MirWebsite source code</a>
 is, of course, also available. Improvements welcome. Except for
 these three CGIs, our website is fully statically precompiled,
 and that’s a good thing. Please help in making the CGIs secure.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20120105-tg_wlog-10"><a href="permalinks/wlog-10_e20120105-tg.htm#e20120105-tg_wlog-10">Clone a disc with progress indicator</a></h2>
<div class="wlsubtitle">05.01.2012 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20120105-tg_wlog-10">debian</a> <a href="tag_pcli_all.htm#e20120105-tg_wlog-10">pcli</a> tip</div>
</div>
<p>On <a href="main.htm">MirBSD</a> and other sane OSes,
 you can just press <tt>^T</tt> (Ctrl-T) when <a href="htman/i386/man1/dd.htm" class="manlink">dd(1)</a> runs; this sends
 it a <tt>SIGINFO</tt> (cf. <a href="htman/i386/man2/sigaction.htm" class="manlink">sigaction(2)</a>) which asks it to display
 (progress) information to the tty. This includes kFreeBSD, btw.</p>
<p><strong>Update</strong> 07.01.2012 – this also works on Hurd.
 Linux neither has SIGINFO nor (cooked mode tty) support for it.</p>
<p class="boxhead">There’s also pv:</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>dd if=/dev/mapper/vg01-${customername}--hudson bs=1048576 | \
<span style="display:none;">	</span>    pv -pter -B 1048576 -s 85899345920 | \
<span style="display:none;">	</span>    xz -0 &gt;/mnt/ci-${customername}-snap-20120105-lenny.img.xz
 </pre>
</div><p class="boxfoot">I used this At wOrk today to back up a Jenkins VM
 before upgrading its underlying operating system for evaluation. Here, the
 <tt>-s</tt> flag is the total size (in bytes; don’t forget to multiply by
 1024 when reading from Linux’ /proc/partitions) so pv can calculate a total
 and an ETA; <tt>-B</tt> is the same as <tt>bs</tt>; and xz is the currently
 best compressor to use, in any situation, unless you must stay compatible to
 <a href="htman/i386/man1/gzip.htm" class="manlink">gzip(1)</a>-only systems. (Except that it’s not under an Open Source licence.)</p>
<p><a href="http://sourceforge.net/projects/clpbar/">clpbar</a> might also
 be worth looking into. XTaran points out sid has this as bar.</p>
<p>PSA: Last of June, 2012, will be a leap second.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20111122-tg_wlog-10"><a href="permalinks/wlog-10_e20111122-tg.htm#e20111122-tg_wlog-10">Those small nice tools we all write</a></h2>
<div class="wlsubtitle">22.11.2011 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20111122-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20111122-tg_wlog-10">mksh</a> <a href="news_all.htm#e20111122-tg_wlog-10">news</a> <a href="tag_pcli_all.htm#e20111122-tg_wlog-10">pcli</a> release</div>
</div>
<p>This is both a release announcement for the next installment of The
 MirBSD Korn Shell, <a href="mksh.htm#r40c">mksh R40b</a>,
 and a follow-up to <a href="http://pusling.com/blog/?p=230">Sune’s
 article about small tools of various degrees of usefulness</a>.</p>
<p>I hope I don’t need to say too much about the first part; <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a>
 is packaged in a gazillion of operating environments (dear Planet
 readers, that <em>of course</em> includes Debian, which occasionally
 gets a development snapshot; I’ll wait uploading R40c until that <a
 href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=633479">two
 month fixed gcc bug</a> will <em>finally</em> find its way into the
 packages for armel and armhf. Ah, we’re getting Arch Linux (after
 years) to include mksh now. (Probably because they couldn’t stand
 the teasing that Arch Hurd included it <em>one</em> day after having
 been told about its existence, wondering why it built without needing
 patches on Hurd…) MSYS is a supposedly supported target now, people
 are working on WinAPI and DJGPP in their spare time, and Cygwin and
 Debian packagers have deprecated pdksh in favour of mksh (thanks!).
 So, everything looking well on that front.</p>
<p>I’ve started <a href="https://evolvis.org/projects/shellsnippets/">a
 collection of shell snippets</a> some time ago, where most of “those
 small things” of mine ends up. Even stuff I write at work – we’re an
 Open Source company and can generally publish under (currently) AGPLv3
 or (if extending existing code) that code’s licence. I chose git as
 SCM in that FusionForge instance so that people would hopefully use it
 and contribute to it without fear, as it’s hosted on my current money
 source’s servers. (Can just clone it.) Feel free to register and ask
 for membership, to extend it (only if your shell-fu is up to the task,
 KNOPPIX-style scripts would be a bad <a href="htman/i386/man9/style.htm" class="manlink">style(9)</a> example as the primary
 goal of the project is to give good examples to people who learn shell
 coding by looking at other peoples’ code).</p>
<p>Maybe you like <a href="jupp.htm">my editor</a>, too? At
 OpenRheinRuhr, the Atari people sure liked it as it uses WordStar®
 like key combinations, standardised across a lot of platforms and
 vendors (DR DOS Editor, Turbo Pascal, Borland C++ for Windows, …)</p>
<p>ObPromise: a posting to raise the level of <em>ferrophility</em>
 on the Planet aggregators this wlog reaches (got pix)</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20111006-tg_wlog-10"><a href="permalinks/wlog-10_e20111006-tg.htm#e20111006-tg_wlog-10">eMail</a></h2>
<div class="wlsubtitle">06.10.2011 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20111006-tg_wlog-10">debian</a> <a href="tag_pcli_all.htm#e20111006-tg_wlog-10">pcli</a> rant tip</div>
</div>
<p>Would MTAs <strong>please</strong> stop sending hi-bit7 messages
 to other MTAs which do not advertise <tt>8BITMIME</tt>! Recode it
 to QP or BASE64, damnit! The receiving MTA is entitled to strip the
 set bit7, which kinda makes things hard to read (while I <a
 href="http://fsinfo.noone.org/~abe/typing-8bit.html">know</a> how
 to deal with <tt>blvde Stra_e</tt>, the advent of UTF-8 makes that
 <tt>blC6de StraC?e</tt>, introduces C0 control characters and makes
 typographic quotation marks into NUL-containing octet sequences (as
 their UTF-8 representation contains 0x80 octets) which let every
 sensible MDA terminate the line there). I even filed in the Debian
 BTS against the BTS (might be Drexim's fault, though).</p>
<p>Would MUAs <em>please</em> default to Quoted-Printable!</p>
<p>And mail hosters should use the same server when retrying delivery,
 to benefit greylisting. Or at least publish a list of outgoing IPv4
 addresses they use for sending. Or use IPv6. Oh, and <tt>STARTTLS</tt>,
 while we are on my wishlist.</p>
<p>It's a sad day when the percentage of correctly encoded eMail
 messages in my INBOX is smaller than that of my Spambox...</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20110914-tg_wlog-10"><a href="permalinks/wlog-10_e20110914-tg.htm#e20110914-tg_wlog-10">MirBSD online manpages major facelift</a></h2>
<div class="wlsubtitle">14.09.2011 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20110914-tg_wlog-10">debian</a> <a href="news_all.htm#e20110914-tg_wlog-10">news</a> <a href="tag_pcli_all.htm#e20110914-tg_wlog-10">pcli</a> snapshot</div>
</div>
<p>Our <a href="htman/i386/">MirBSD online manual pages and
 other assorted BSD documentation</a> (except of course the merely copied
 ncurses, lynx etc. documentation and the texinfo generated HTML pages)
 has just gained a major facelift. They look alike in <a href="htman/i386/man1/lynx.htm" class="manlink">lynx(1)</a> – best web
 browser ever – and <a href="htman/i386/man1/less.htm" class="manlink">less(1)</a>/<a href="htman/i386/man1/man.htm" class="manlink">man(1)</a> now, and remind of a DEC VT420 on a
 CSS capable Buntbrause.</p>
<p>Thanks to our contributor XTaran for aid with the colour scheme!</p>
<p>Since these are generated from catmanpages, heuristics are used for
 things like where should bold/underline begin/end (since <a href="htman/i386/man1/nroff.htm" class="manlink">nroff(1)</a> is
 not always the brightest… but working on that), and hyperlinks can only
 be generated for other manpage references (whose targets may or may not
 exist, for example if they aren’t part of MirOS base/XFree86®). But on
 the other hand, Valid XHTML/1.1 and CSS speaks for itself ☻☺</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20110826-tg_wlog-10"><a href="permalinks/wlog-10_e20110826-tg.htm#e20110826-tg_wlog-10">Netsplit – so let’s answer in the wlog</a></h2>
<div class="wlsubtitle">26.08.2011 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20110826-tg_wlog-10">debian</a> <a href="tag_pcli_all.htm#e20110826-tg_wlog-10">pcli</a> security</div>
</div>
<pre>
<span style="display:none;">	</span>14:31⎜*<b>&lt;</b>* Signoff: XTaran (*.net *.split)</pre>
<p>… doesn’t prevent me from telling him…</p>
<pre xml:lang="de-DE-1901">
<span style="display:none;">	</span>14:39⎜&lt;mira|AO&gt; XTaran: n̲i̲e̲ n̲i̲e̲ n̲i̲e̲ n̲i̲e̲ n̲i̲e̲ n̲i̲e̲ n̲i̲e̲
<span style="display:none;">	</span>     ⎜empfiehlt man k̶i̶l̶l̶a̶l̶l̶, i̲m̲m̲e̲r̲ nur p̲k̲i̲l̲l̲!</pre>
<p>“Now playing: Monzy — kill dash” ⇒ good idea… ☺</p>
<hr />
<p class="boxhead">By the way, you were probably
 looking for this…</p><div class="boxtext">
 <pre>
     -x      Require an exact match of the process name, or argument list if
             -f is given. The default is to match any substring.
 </pre>
</div><p class="boxfoot">… excerpt from the <a href="htman/i386/man1/pkill.htm" class="manlink">pkill(1)</a> manual page,
 where you can see it stems from <a href="htman/i386/man1/grep.htm" class="manlink">grep(1)</a> clearly.</p>
<hr />
<p>Yes, this website (and thus the RSS export) is Lynx on uxterm
 -fn -misc-fixed-medium-r-normal--18-120-100-100-c-90-iso10646-1
 -fw -misc-fixed-medium-r-normal-ko-18-120-100-100-c-180-iso10646-1
 on XFree86® optimised. Your browser might not do combining.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20110717-tg_wlog-10"><a href="permalinks/wlog-10_e20110717-tg.htm#e20110717-tg_wlog-10">mksh R40b; joe 3.1jupp16 and 2.8jupp2 released</a></h2>
<div class="wlsubtitle">17.07.2011 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20110717-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20110717-tg_wlog-10">mksh</a> <a href="news_all.htm#e20110717-tg_wlog-10">news</a> <a href="tag_pcli_all.htm#e20110717-tg_wlog-10">pcli</a> release</div>
</div>
<p><a href="mksh.htm#r40b">mksh R40b</a> (nowadays with filled
 in <a href="mksh.htm#c40b">user’s caveats</a> (for R40, too!)
 and <a href="mksh.htm#p40b">packager’s upgrade hints</a>) has
 just been released. This is a should-have upgrade, fixing a number of –
 admittedly some obscure – bugs, changing things begun in R40, improving
 upon others. Thanks to the PLD Linux guys for spotting all these errors;
 thanks to them and phpnet.org both for adopting mksh so well.</p>
<p>I have also fixed a bug in <a href="htman/i386/man1/nroff.htm" class="manlink">nroff(1)</a> which will lead to an <em>even</em>
 nicer looking HTML manpage <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a> (after the next rebuild and upload of
 a MirBSD snapshot – scheduled RSN).</p>
<p><a href="jupp.htm#r3_1j16">jupp 3.1.16</a> took on the task
 of merging Debian joe changes (aiming at an upload). I also split the
 jupprc file into three versions (2.8 generic/DOS, 3.1+jupp and 3.7/Unix)
 because of the differences in the baseline executables making rc files
 partially mutually incompatible (think Insert key), annoyingly warning
 (think syntax, hmsg), or less usable (joe’s new menu system).</p>
<p><a href="jupp.htm#r2_8j2">jupp 2.8.2</a> is a companion to
 jupp 3.1.16 – mostly because of the new help window “character map” ☺</p>
<p>Binaries for jupp should be updated RSN too.</p>
<p>Considering Banja Luka is arriving quickly, the “r” in RSN should be
 taken with a few grains of salt. I’ve also scheduled working on the pcc
 Debian package for the next future; updating lynx and maybe others like
 OpenSSH in MirBSD is also due; <a href="htman/i386/man1/cvs.htm" class="manlink">cvs(1)</a> will receive more of my time, but
 before the next Upload I’d like to fix LP#12230 once verified.</p>
<p>Builds for Debian/m68k are also still running. I note I did in fact
 <em>not</em> manage to make a new base image, yet (but 2.6.39 kernels
 miss a patch, anyway, so waiting for 3.0 is ok). It’s still using gcc-4.4
 because nobody tests gcc-4.6 and gcj-4.6 FTBFS due to SIGSEGV, but that’s
 ok in my books. rsyslog is broken but sysklogd works.</p>
<p>The <a href="ksh-chan.htm">#ksh|Freenode</a> page finally
 got a well-deserved link to Planet Commandline. Throw more my way!</p>
<p><a href="cvs.cgi/src/share/misc/acronyms">Acronyms</a> and <a
 href="https://evolvis.org/scm/viewvc.php/evolvis/trunk/gforge_base/evolvisforge/gforge/www/js/datepicker.js?view=markup">translations</a>,
 too. (Got Norwegian and Rumanian covered in the meantime. No idea whether any
 RTL languages will work in that beast. But I’m young and need the money)</p>
<p>Since I’m writing a wlog entry anyway… let me thank Gunnar for a <a
 href="http://gwolf.org/blog/free-software-must-migrate-become-free-culture">nice
 summary on the current Free Culture discussion</a>; my comments on Nina’s site
 seem to be eaten, but let me support it fully, although, of course, I normally
 use a <a href="MirOS-Licence">copycenter style licence</a>, which
 is specifically written for general works of authorship under copyright law,
 not limited to software. I did in fact have that in mind. Maybe some people
 will like it (it’s less than one Kibibyte long) either generally or just for
 their everyday random musings (they can then keep CC-BY-SA for the “big works”
 if they so desire).</p>
<p>Wouter, grass background makes green headlines illegible. I’ve never liked,
 and never installed manually, cups either. (Benny tells me that Apple’s new
 version refuses to talk with a non-Apple cups, kinda defeating the whole idea
 I think.) Port 9100 is JetDirect (probably with an HP in front and some subset
 of ©®™ trailing) and just nice. (Being able to talk ESC/P with your printer
 like <tt>print '\033K\x07\0\x3E\x81\x99\xA5\xA5\x81\x3E' &gt;/dev/lpa</tt> too
 rocks though, IMHO. Yes, mine can, and I still can. /dev/lpa is BSD.)</p>
<p class="boxhead">Kai, thanks for your vimrc lines:</p><div class="boxtext">
 <pre>
<span style="display:none;">	</span>:highlight TrailWhitespace ctermbg=red guibg=red
<span style="display:none;">	</span>:match TrailWhitespace /\s\+$\| \+\ze\t/
 </pre>
</div><p class="boxfoot">Automatic removal is harmful, though – I just fell
 into the trap since jupprc contains needed whitespace at EOL… but manual
 removal (bound to ^K] in jupp) rocks. And I like that your solution uses
 such strong a colour – vim users are the <strong>single most represented
 offender group</strong> for actually leaving the redundant whitespace at
 EOL there, and it should <em>hurt their eyes</em>. (Sadly there is some
 vehement disagreement preventing them from inclusion in grml-etc-core –
 but that’s why I re-post them here.) Ah, and jupp can of course display
 whitespace visibly (although it uses ‘·’/‘→’, replacing the arrow with ‘¬’
 if no UTF-8, not ‘»’), accessible with ^Ov.</p>
<p>Steve, want to put up a checklist for sites? We can “crowdsource” the…
 testing… to maybe get some interesting results…</p>
<p>Some other people would get more comments if they were idling in IRC
 (Freenode) <span style="font-size:small;">or allow comments on their blog,
 specifically without too high an entrance barrier – OpenID is ok, but many
 other things, and ECMAscript, are not; but I can’t really say that loud
 because our wlog is static HTML compiled from a flat plaintext data source
 so it doesn’t allow such either</span>. I often forget what I wanted to
 add if I can’t get it out quickly enough (especially at work). Sowwy…</p>
<p>Me like the cat picture postings (Amayita, Tiago, ¡Gracias!).</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20110606-tg_wlog-10"><a href="permalinks/wlog-10_e20110606-tg.htm#e20110606-tg_wlog-10">synchronise environment between two shells</a></h2>
<div class="wlsubtitle">06.06.2011 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20110606-tg_wlog-10">debian</a> <a href="tag_mksh_all.htm#e20110606-tg_wlog-10">mksh</a> <a href="tag_pcli_all.htm#e20110606-tg_wlog-10">pcli</a></div>
</div>
<p>(First posting to Plänet Commandline! <tt>Tag: pcli</tt>)</p>
<p>Vutral asked in IRC how to synchronise two shells’ environment
 while they’re running. As you may know, POSIX systems cannot change
 a process’ environment vector after it has been started, only the
 process itself can. Well, <a href="mksh.htm">the shell</a>
 can, and we’ll use a variety of things for this.</p>
<p>This trick assumes you have <tt>$HISTFILE</tt> set to the same
 pathname in both shells (obviously, they run under the same user).
 It uses <tt>export -p</tt> to render the current list of exported
 variables, then transforms the list from newline-separated to a
 single big one-line export statement.<br />Then it transforms all
 remaining newlines (which will be part of a single-quoted string,
 since that’s <a href="htman/i386/man1/mksh.htm" class="manlink">mksh(1)</a>’s export format) into the sequence
 <tt>'$'\n''</tt> which means: terminate current single-quoted
 string, append <tt>$'\n'</tt> and open up a new single-quoted
 string immediately; concatenate these three.<br />Now, <tt>$'\n'</tt>
 is just a fancy way of saying newline, and part of mksh because
 David Korn (yes, the Korn in Korn Shell) strongly suggested to
 me that this functionality be included – but, as we can see here,
 it pays off.<br />Finally, the so transformed string is prepended
 by <tt>unset \$(export);</tt> which, when executed, will cause the
 shell to unset (and unexport) all currently exported variables.
 The shell parameters that are not exported, i.e. not in the
 environment, are not affected by this code (except for <tt>$x</tt>
 and <tt>$nl</tt>, but… whatever).<br />This string is then passed
 to <tt>read -s</tt> (plus <tt>-r</tt> and clearing <tt>IFS</tt> to
 enable raw mode), which means, read into the parameter <tt>$REPLY</tt>
 (which we conveniently don’t use – but it’s trashed too, thus) but
 store into history at the same time.</p>
<p>Ah hah! Now, the persistent history feature comes into effect!
 After running the below statement in the “source” shell, switch
 into the terminal running the “destination” shell, press Enter
 once on the empty line (Ctrl-U to empty it if it wasn’t), then
 Cursor-Up (↑) to recall… voilà, an insanely large line with the
 previously created string sorta expanded… and press Enter again
 to run it. Now your set of exported parameters is the exact same
 (minus if you exported <tt>IFS</tt>, <tt>nl</tt>, <tt>x</tt> or
 <tt>REPLY</tt>) as in the “source” shell.</p>
<p class="boxhead">I’ve added extra spaces and a linewrap below,
 this is really just one big line:</p><div class="boxtext">
  <tt>nl=$'\n'; x=$(export -p); x=${x//${nl}export/};</tt>
  <tt>IFS= read -rs &lt;&lt;&lt;"unset \\\$(export);${x//$nl/\'\$\'\\\\n\'\'}"</tt>
</div><p class="boxfoot">Of course, this makes a nice function,
 for your <tt>~/.mkshrc</tt> or somesuch.</p>
</div>
<div class="wlentry">
<div class="wltitle">
<h2 class="wlentry" id="e20100509-tg_wlog-10"><a href="permalinks/wlog-10_e20100509-tg.htm#e20100509-tg_wlog-10">How to upgrade SKS Berkeley DB (bdb) etch→lenny</a></h2>
<div class="wlsubtitle">09.05.2010 by <a href="mailto:tg@mirbsd.org">tg@</a></div>
<div class="wltagtitle">Tags: <a href="tag_debian_all.htm#e20100509-tg_wlog-10">debian</a> <a href="tag_pcli_all.htm#e20100509-tg_wlog-10">pcli</a></div>
</div>
<p>Some things are ugly.</p><!-- The HTML of this entry too, I copy-pasted it from Wordpress… -->
<p>Waldi’s suggestion fails.</p>
<blockquote><p>db4.6_upgrade: Program version 4.6 doesn&#8217;t match environment version 4.4<br />
db4.6_upgrade: DB_ENV-&gt;open: DB_VERSION_MISMATCH: Database environment version mismatch</p></blockquote>
<p>Can’t start it manually.</p>
<blockquote><p>debian-sks@dev:~$ /usr/sbin/sks recon<br />
Fatal error: exception Bdb.DBError(&#8220;Program version 4.6 doesn&#8217;t match environment version 4.4&#8243;)</p></blockquote>
<p>The log only shows:</p>
<blockquote><p>2010-05-09 16:59:29 Opening log<br />
2010-05-09 16:59:29 sks_db, SKS version 1.1.0<br />
2010-05-09 16:59:29 Copyright Yaron Minsky 2002, 2003, 2004<br />
2010-05-09 16:59:29 Licensed under GPL.  See COPYING file for details<br />
2010-05-09 16:59:29 http port: 11371<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Malformed entry<br />
2010-05-09 16:59:29 Opening KeyDB database<br />
2010-05-09 16:59:29 Shutting down database
</p></blockquote>
<p>The solution is ugly as hell, too:</p>
<blockquote><p>root@dev:/ # su &#8211; debian-sks<br />
debian-sks@dev:~$ cd DB<br />
debian-sks@dev:~/DB$ db4.4_checkpoint -1<br />
debian-sks@dev:~/DB$ db4.4_recover<br />
debian-sks@dev:~/DB$ db4.4_archive<br />
log.0000002839<br />
log.0000002840<br />
log.0000002841<br />
log.0000002842<br />
log.0000002843<br />
log.0000002844<br />
log.0000002845<br />
debian-sks@dev:~/DB$ db4.6_archive -d<br />
debian-sks@dev:~/dump$ cd ../PTree/<br />
debian-sks@dev:~/PTree$ db4.4_checkpoint -1<br />
debian-sks@dev:~/PTree$ db4.4_recover<br />
debian-sks@dev:~/PTree$ db4.4_archive<br />
debian-sks@dev:~/PTree$ db4.6_archive -d<br />
debian-sks@dev:~/PTree$ logout<br />
root@dev:/ # /etc/init.d/sks start<br />
Starting sks daemons: sksdb.. sksrecon.. done.
</p></blockquote>
<p>Wow, our internal keyserver works again. Thank you, Debian…</p>
<p>This solution courtesy of <a href="http://www.hermann-uwe.de/blog/migrating-bdb-svn-repositories-from-one-version-to-another-and-to-fsfs">Uwe Hermann</a>, although it was for Suckwürstchen.</p>
</div>
<p class="linkbot"><a href="tag_pcli_all.htm">All</a> <a href="tag_pcli.htm">1</a> <a href="tag_pcli_2.htm">2</a></p>
</div>
<div class="footer">
<p style="display: none;">Do <em>not</em> send any eMail to <a
 href="mailto:junk@mirbsd.de">junk@mirbsd.de</a>, <a
 href="mailto:junk@mirbsd.org">junk@mirbsd.org</a>, or <a
 href="mailto:junk@mirsolutions.de">junk@mirsolutions.de</a> –
 it won’t do any good to you.</p>
<p>• <a
 href="mailto:miros-discuss@mirbsd.org">eMail</a> contact to The MirOS Project
 • <a href="imprint.htm">Impressum</a> • This website is (supposed
 to be) <a href="http://validator.w3.org/check/referer">Valid HTML</a>! •
</p>
<p class="rcsdiv">Generated <!-- MBSD_HTSCONV_GENDATE_TAG_30284 --> on <span class="rcsid">2013-07-18 22:04:39</span> by <span class="rcsid">$MirOS: www/mk/htsconv,v 1.71 2013/06/08 16:55:56 tg Exp $</span> and <span class="rcsid">$MirOS: www/mk/parser,v 1.23 2012/07/15 14:21:44 tg Exp $</span> and <span class="rcsid">$MirOS: www/mk/inc2htm,v 1.31 2013/06/08 00:58:02 tg Exp $</span> from <span class="rcsid">$MirOS: www/data/tag_pcli.cfg,v 1.1 2011/06/06 21:41:04 tg Exp $</span> and <span class="rcsid">$MirOS: www/data/wlog-10.inc,v 1.433 2013/07/18 21:57:03 tg Exp $</span></p>
</div></div>
<div class="heading">
 <img class="hdrlnks" alt="MirOS Logo"
  src="pics/logo-grey.png" />
</div>
</body></html>
