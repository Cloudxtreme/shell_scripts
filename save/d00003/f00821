<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Zend Framework 1.x...Without Inhaling | SoftLayer Development Network</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/sites/all/themes/softlayer/favicon.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/ldap_integration/ldaphelp/ldaphelp.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/default/files/ctools/css/12dfdd8531d529d29afe344e45bf1830.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/aggregator/aggregator.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/node/node.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/system/defaults.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/system/system.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/system/system-menus.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/user/user.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/apachesolr_autocomplete/apachesolr_autocomplete.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/apachesolr_autocomplete/jquery-autocomplete/jquery.autocomplete.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/cck/theme/content-module.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/ctools/css/ctools.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/dhtml_menu/dhtml_menu.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/geshifilter/geshifilter.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/panels/css/panels.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/rate/rate.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/tableofcontents/tableofcontents.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/cck/modules/fieldgroup/fieldgroup.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/views/css/views.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/panels/plugins/layouts/flexible/flexible.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/modules/flagger/css/flagger.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/themes/softlayer/style.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/themes/softlayer/css/black.css?s" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/themes/softlayer/css/suckerfish_black.css?s" />
  <script type="text/javascript"> </script>
  <!--[if lte IE 6]>
<script type="text/javascript"> 
    $(document).ready(function(){ 
        $(document).pngFix(); 
    }); 
</script> 
<![endif]-->
    <!--[if IE]>
<style type="text/css" media="all">@import "/sites/all/themes/softlayer/css/ie.css";</style>
<![endif]-->
      <!--[if lte IE 6]>
<script type="text/javascript" src="http://sldn.softlayer.com/sites/all/themes/softlayer/js/suckerfish.js"></script>
<![endif]-->
        <script type="text/javascript" src="http://sldn.softlayer.com/sites/all/themes/softlayer/js/pickstyle.js"></script>
</head>
<body class="sidebar-left">
  
  <div id="header" class="clear-block">
      <div id="logo-title">
                              <a href="/" title="SoftLayer.com"> <img src="/sites/all/themes/softlayer/logo.png" alt="Home" id="logo" /> </a>
                        </div><!-- /logo-title -->
      <div id="name-and-slogan">
        
              </div><!-- /name-and-slogan -->
            <form action="/blog/jbrown/Zend-Framework-1xWithout-Inhaling"  accept-charset="UTF-8" method="post" id="search-theme-form">
<div><div id="search" class="container-inline">
  <div class="form-item" id="edit-search-theme-form-1-wrapper">
 <label for="edit-search-theme-form-1">Search this site: </label>
 <input type="text" maxlength="128" name="search_theme_form" id="edit-search-theme-form-1" size="15" value="" title="Enter the terms you wish to search for." class="form-text apachesolr-autocomplete unprocessed" />
</div>
<input type="submit" name="op" id="edit-submit-6" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-d4ce1f1dbfc1db51681ed04305729dfd" value="form-d4ce1f1dbfc1db51681ed04305729dfd"  />
<input type="hidden" name="form_id" id="edit-search-theme-form" value="search_theme_form"  />
</div>

</div></form>
      

      <!-- Needs to be fixed, only temporary fix for now -->
              <div style="clear:both"></div>
        <div id="suckerfishmenu" class="clear-block">   <div class="block block-menu" id="block-menu-primary-links">
  <h2 class="title">Primary links</h2>  <div class="content"><ul class="menu"><li class="leaf first dhtml-menu "><a href="/articles" title="" id="dhtml_menu-1452">Articles</a></li>
<li class="leaf  dhtml-menu "><a href="/blog" title="" id="dhtml_menu-3611">Blog</a></li>
<li class="leaf  dhtml-menu "><a href="/reference/overview" title="" id="dhtml_menu-713">Reference</a></li>
<li class="leaf last dhtml-menu "><a href="https://forums.softlayer.com/forumdisplay.php?f=27" title="Forums" id="dhtml_menu-714">Forums</a></li>
</ul></div></div>
 </div>
          </div><!-- /header -->


  <div id="page">
    <div id="sub-banner">
        <div class="navtext">
          <div class="homelink"><a href="/" class="homelink">SLDN</a></div>
          <div class="sectionsep"> | </div> 
          <div class="sectionlink"><a href="/blog" class="sectionlink">Blog</a></div>
        </div>
    </div><!--/hero-banner -->
            <div id="middlecontainer">
              <div id="sidebar-left"><div class="sidebar-spacer"></div>  <div class="block block-views" id="block-views-Blogs-block_2">
  <h2 class="title">Popular Blogs</h2>  <div class="content"><div class="view view-Blogs view-id-Blogs view-display-id-block_2 view-dom-id-1">
    
  
  
      <div class="view-content">
        <div class="views-row views-row-1 views-row-odd views-row-first">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/jbrown/Technical-Debt">Technical Debt</a></span>
  </div>
  </div>
  <div class="views-row views-row-2 views-row-even">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/apunjani/New-Features-ExtJS-4-Model-Class">New Features In the ExtJS 4 Model Class</a></span>
  </div>
  </div>
  <div class="views-row views-row-3 views-row-odd">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/jbrown/Unit-Testing-Ember-Data-Models">Unit Testing Ember Data Models</a></span>
  </div>
  </div>
  <div class="views-row views-row-4 views-row-even">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/phil/Getting-Started-Firewalls">Getting Started - Firewalls</a></span>
  </div>
  </div>
  <div class="views-row views-row-5 views-row-odd">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/klandreth/New-DevOps-tools-SoftLayer">New DevOps tools for SoftLayer</a></span>
  </div>
  </div>
  <div class="views-row views-row-6 views-row-even">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/jbrown/Zend-Framework-1xWithout-Inhaling" class="active">Zend Framework 1.x...Without Inhaling</a></span>
  </div>
  </div>
  <div class="views-row views-row-7 views-row-odd">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/phil/Getting-started-DNS">Getting started with DNS</a></span>
  </div>
  </div>
  <div class="views-row views-row-8 views-row-even">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/phil/Getting-started-CCIs">Getting started with CCIs</a></span>
  </div>
  </div>
  <div class="views-row views-row-9 views-row-odd">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/phil/How-Solve-Error-fetching-http-headers">How to Solve: Error fetching http headers</a></span>
  </div>
  </div>
  <div class="views-row views-row-10 views-row-even views-row-last">
      
  <div class="views-field-title">
                <span class="field-content"><a href="/blog/kmcdonald/FTPSFTP-SoftLayer-Object-Storage">FTP/SFTP for SoftLayer Object Storage</a></span>
  </div>
  </div>
    </div>
  
  
  
  
  
  
</div> </div></div>
</div>
            <div id="main">
        <div id="squeeze">
                                    <div id="breadcrumb"> <div class="breadcrumb"></div> </div>
                                          <div id="squeeze-content">
            <div id="inner-content">
             
                              <div id="service-links">Share this article:   <div class="block block-service_links" id="block-service_links-service_links">
    <div class="content"><div class="service-links"><a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Fsldn.softlayer.com%2Fblog%2Fjbrown%2FZend-Framework-1xWithout-Inhaling&amp;title=Zend+Framework+1.x...Without+Inhaling" title="Digg this post on digg.com" class="service-links-digg" rel="nofollow"><img src="/sites/all/modules/service_links/images/digg.png" alt="Digg" title="" width="16" height="16" /></a> <a href="http://reddit.com/submit?url=http%3A%2F%2Fsldn.softlayer.com%2Fblog%2Fjbrown%2FZend-Framework-1xWithout-Inhaling&amp;title=Zend+Framework+1.x...Without+Inhaling" title="Submit this post on reddit.com." class="service-links-reddit" rel="nofollow"><img src="/sites/all/modules/service_links/images/reddit.png" alt="Reddit" title="" width="16" height="16" /></a> <a href="http://twitter.com/share?url=http%3A%2F%2Fsldn.softlayer.com%2Fblog%2Fjbrown%2FZend-Framework-1xWithout-Inhaling&amp;text=Zend%20Framework%201.x...Without%20Inhaling" title="Share this on Twitter" class="service-links-twitter" rel="nofollow"><img src="/sites/all/modules/service_links/images/twitter.png" alt="Twitter" title="" width="16" height="16" /></a> <a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fsldn.softlayer.com%2Fblog%2Fjbrown%2FZend-Framework-1xWithout-Inhaling&amp;t=Zend+Framework+1.x...Without+Inhaling" title="Share on Facebook." class="service-links-facebook" rel="nofollow"><img src="/sites/all/modules/service_links/images/facebook.png" alt="Facebook" title="" width="16" height="16" /></a> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fsldn.softlayer.com%2Fblog%2Fjbrown%2FZend-Framework-1xWithout-Inhaling&amp;title=Zend+Framework+1.x...Without+Inhaling&amp;summary=_Not+sure+how+to+integrate+all+Zend+Framework+1.x+has+to+offer+into+your+existing+code%3F+Do+you+want+to+know+how+you+can+use+Zend+Framework+1.x+without+having+to+fully+adopt+the+MVC+architecture%3F+What+if+you+want+to+begin+using+MVC+later%3F+This+article+will+present+ideas+and+examples+on+how+you+can+integrate+Zend+Framework+1.x+alongside+your+existing+codebase+with+minimal+need+for+future+re-factoring._%0D%0A+%0D&amp;source=SoftLayer+Development+Network" title="Publish this post to LinkedIn" class="service-links-linkedin" rel="nofollow"><img src="/sites/all/modules/service_links/images/linkedin.png" alt="LinkedIn" title="" width="16" height="16" /></a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fsldn.softlayer.com%2Fblog%2Fjbrown%2FZend-Framework-1xWithout-Inhaling&amp;title=Zend+Framework+1.x...Without+Inhaling" title="Thumb this up at StumbleUpon" class="service-links-stumbleupon" rel="nofollow"><img src="/sites/all/modules/service_links/images/stumbleit.png" alt="StumbleUpon" title="" width="16" height="16" /></a></div></div></div>
</div>
                <div style="clear:both;"></div>
              
              <h1 class="title">Zend Framework 1.x...Without Inhaling</h1>
              <div class="tabs"></div>
                                          <div class="panel-flexible panels-flexible-10 clear-block" >
<div class="panel-flexible-inside panels-flexible-10-inside">
<div class="panels-flexible-region panels-flexible-region-10-center panels-flexible-region-first panels-flexible-region-last">
  <div class="inside panels-flexible-region-inside panels-flexible-region-10-center-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-node-content" >
  
  
  
  <div class="pane-content">
    <div class="node">
    
  
      <!-- <span class="submitted"></span> <span class="taxonomy"></span> -->
  
  <div class="content"><p><em>Not sure how to integrate all Zend Framework 1.x has to offer into your existing code? Do you want to know how you can use Zend Framework 1.x without having to fully adopt the MVC architecture? What if you want to begin using MVC later? This article will present ideas and examples on how you can integrate Zend Framework 1.x alongside your existing codebase with minimal need for future re-factoring.</em></p>
<p>Since I began using Zend Framework 1.x I have had the opportunity to deploy it as a full-stack MVC solution for new not-yet-started projects, use just components of it to compliment existing solutions, and everything in-between.  It is the 'everything in-between' that has inspired me to write this article. Perhaps you have reviewed all Zend Framework 1.x has to offer but are not sure how to integrate it with your existing code.  How can you take advantage of Zend Framework 1.x's capabilities without having to fully adopt the MVC architecture?  Can you easily switch to using MVC at a later point without having to do a lot of refactoring?  If you follow the advice I offer in this article then the answer to all of these questions is "Yes!"</p>
<p>In this article I am going to present 4 tips for integrating Zend Framework 1.x into your existing codebase, all of which presume that your existing codebase is not a full-stack MVC application.  The first tip is going to explain how you can sprinkle individual Zend Framework 1.x components into your existing codebase.  The second tip will expand on this and examine how you can get Zend Framework 1.x and any existing autoloaders to play nicely together.  The third tip changes focus and will talk about how to best approach the addition of completely new functionality to an existing codebase.  The fourth and final tip will present an approach that can be used to easily convert an existing codebase to a full MVC application.</p>
<h2>Sprinkle In Individual Components</h2>
<p>Zend Framework 1.x is a lightweight, loosely-coupled component library with minimal interdependencies.  It is this very design that allows you to very easily begin using components of Zend Framework 1.x in your existing codebase without having to convert it to a MVC application. Take for example the code below:</p>
<h3>Listing 1</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;">&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Display Currency Amount Formatted by Locale&lt;/h1&gt;
&nbsp;
&lt;form method=&quot;post&quot; action=&quot;<span style="color: #000000; font-weight: bold;">&lt;?php</span> <a href="http://www.php.net/echo"><span style="color: #990000;">echo</span></a> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'PHP_SELF'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> <span style="color: #000000; font-weight: bold;">?&gt;</span>&quot;&gt;
<span style="color: #000000; font-weight: bold;">&lt;?php</span>
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span> <span style="color: #339933;">!</span> <a href="http://www.php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$_REQUEST</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'amount'</span><span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">switch</span><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$_REQUEST</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'locale'</span><span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #b1b100;">case</span> <span style="color: #0000ff;">'en-US'</span><span style="color: #339933;">:</span>
            <span style="color: #000088;">$formattedCurrency</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'$ '</span> <span style="color: #339933;">.</span> <a href="http://www.php.net/number_format"><span style="color: #990000;">number_format</span></a><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$_REQUEST</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'amount'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">2</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #b1b100;">break</span><span style="color: #339933;">;</span>        
&nbsp;
        <span style="color: #b1b100;">case</span> <span style="color: #0000ff;">'en_GB'</span><span style="color: #339933;">:</span>
            <span style="color: #000088;">$formattedCurrency</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'&amp;#163; '</span> <span style="color: #339933;">.</span> <a href="http://www.php.net/number_format"><span style="color: #990000;">number_format</span></a><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$_REQUEST</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'amount'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">','</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">' '</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #b1b100;">break</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <a href="http://www.php.net/echo"><span style="color: #990000;">echo</span></a> <span style="color: #0000ff;">'&lt;h3&gt;Formatted: '</span><span style="color: #339933;">,</span> <span style="color: #000088;">$formattedCurrency</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'&lt;/h3&gt;'</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span>
<span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
Amount: &lt;input type=&quot;text&quot; name=&quot;amount&quot;&gt;&lt;br&gt;
Currency: &lt;select name=&quot;locale&quot;&gt;
&lt;option value=&quot;en-US&quot;&gt;US - English (en-US)&lt;/option&gt;
&lt;option value=&quot;en_GB&quot;&gt;Great Britain - English (en_GB)&lt;/option&gt;
&lt;/select&gt;
&lt;br&gt;&lt;input type=&quot;submit&quot; value=&quot;Display Currency&quot;&gt;
&lt;/form&gt;
&nbsp;
&lt;/body&gt;
&lt;/html&gt;</pre></div>
<p>While very simple in nature, and not a shining example of "perfectly-written" code, it is a decent representation of the type of code you will likely run across in an existing PHP project that does not make use of one of the popular frameworks.  This code, again simple in its nature for the sake of this example, will display a form to the user into which they can enter a monetary value and then select which currency they would like to have the amount formatted as.  Upon submission of the form the switch statement on lines 10-19 will determine which currency to format the monetary value as.</p>
<p>Coding style, the need for input validation and any personal preferences aside, there is nothing wrong with this code.  For any of you that have been coding PHP since version 3 or even the earlier years of 4 this is probably similar to code you have written yourself.  But as the needs placed on your application grow you quickly find yourself in a position where you are having to make continuous additions of case statements to handle additional currencies.  Along with having to support these new currencies you also have to research how monetary values are formatted in each currency you are supporting, which symbol to use when displaying the currency, where the symbol should be placed in regards to the monetary value...well, you get the idea.  It is at this point that you will likely go looking for an already-written library that handles currencies that you can use to address all of the issues we just listed.</p>
<p>Since Zend Framework 1.x is a loosely-coupled component library with minimal interdependencies it is perfectly suited for our task at hand.  After reviewing the list of components that are available in Zend Framework 1.x at http://framework.zend.com/manual/en/reference.html we can decide on using Zend_Currency.  The code below contains the same form we were using before, but now you will notice that lines 12-22 are different:</p>
<h3>Listing 2</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;">&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Display Currency Amount Formatted by Locale&lt;/h1&gt;
&nbsp;
&lt;form method=&quot;post&quot; action=&quot;<span style="color: #000000; font-weight: bold;">&lt;?php</span> <a href="http://www.php.net/echo"><span style="color: #990000;">echo</span></a> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'PHP_SELF'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> <span style="color: #000000; font-weight: bold;">?&gt;</span>&quot;&gt;
<span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">&lt;?php</span>
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span> <span style="color: #339933;">!</span> <a href="http://www.php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$_REQUEST</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'amount'</span><span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/usr/local/share/ZendFramework-1.11.10/library'</span><span style="color: #339933;">;</span>
&nbsp;
    <a href="http://www.php.net/set_include_path"><span style="color: #990000;">set_include_path</span></a><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">.</span> DIRECTORY_SEPARATOR <span style="color: #339933;">.</span> <a href="http://www.php.net/get_include_path"><span style="color: #990000;">get_include_path</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #b1b100;">require_once</span><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/Zend/Loader/Autoloader.php'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    Zend_Loader_Autoloader<span style="color: #339933;">::</span><span style="color: #004000;">getInstance</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #000088;">$currency</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Zend_Currency<span style="color: #009900;">&#40;</span> <span style="color: #000088;">$_REQUEST</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'locale'</span><span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <a href="http://www.php.net/echo"><span style="color: #990000;">echo</span></a> <span style="color: #0000ff;">'&lt;h3&gt;Formatted: '</span><span style="color: #339933;">,</span> <span style="color: #000088;">$currency</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">toCurrency</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$_REQUEST</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'amount'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'&lt;/h3&gt;'</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span>
<span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
Amount: &lt;input type=&quot;text&quot; name=&quot;amount&quot;&gt;&lt;br&gt;
Currency: &lt;select name=&quot;locale&quot;&gt;
&lt;option value=&quot;en-US&quot;&gt;US - English (en-US)&lt;/option&gt;
&lt;option value=&quot;en_GB&quot;&gt;Great Britain - English (en_GB)&lt;/option&gt;
&lt;/select&gt;
&lt;br&gt;&lt;input type=&quot;submit&quot; value=&quot;Display Currency&quot;&gt;
&lt;/form&gt;
&nbsp;
&lt;/body&gt;
&lt;/html&gt;</pre></div>
<p>Many of Zend Framework 1.x's components, when used, require the inclusion of either additional classes contained within the same component or sometimes even other components, depending on how you are using a component.  Because of this the easiest way to make use of a Zend Framework 1.x component is to first set up the auto loading, which can be done with the Zend_Loader component.  Line 12 contains the path to where we have saved the Zend Framework 1.x library on our filesystem.  Line 14 adds this path to our already-existing include path.  Line 16 includes the auto loading code for use and line 18 registers the 'Zend_' namespace with spl_autoload.  On line 20 we instantiate the Zend_Currency object with the locale that the user selected from the form.  Now that we have an instantiated Zend_Currency object we merely only need to call the <span class="geshifilter"><code class="php geshifilter-php">toCurrency<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span></code></span> method as shown in line 22, passing it the monetary value the user provided in the form.  We successfully replaced our ever-growing switch statement with a currency library which is what we set out to originally do.  Almost all of the components in Zend Framework 1.x can be used this same way.</p>
<h2>Autoloaders Just Want To Get Along</h2>
<p>In the previous section we talked about how you could integrate a stand-alone component of Zend Framework 1.x into some existing code.  The example we used though is likely not an entirely accurate representation of the type of codebase you will encounter while attempting to utilize Zend Framework 1.x without adopting the full MVC architecture.  More likely you have a library of your own that has been written and maintained over the life of the application which may consist of only functions but most likely also contains classes.  Regardless of which, it more likely than not contains its own autoloading capability and now you need to know how you can get the Zend_Loader component to work alongside it. The code in Listing 3 below represents existing code that relies on the use of an already-existent autoloader and Listing 4 is said autoloader.</p>
<h3>Listing 3</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;">&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&nbsp;
<span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Require Autoloader</span>
<span style="color: #b1b100;">require_once</span> <span style="color: #0000ff;">'classloader.php'</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Instantiate 'User' class</span>
<span style="color: #666666; font-style: italic;">// Loaded automatically via the Autoloader loaded on line 8</span>
<span style="color: #000088;">$User</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> User<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Set properties</span>
<span style="color: #000088;">$User</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setFirstName</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Jeremy'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$User</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setLastName</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Brown'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
Full name from the 'User' class: <span style="color: #000000; font-weight: bold;">&lt;?php</span> <a href="http://www.php.net/echo"><span style="color: #990000;">echo</span></a> <span style="color: #000088;">$User</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getFullName</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
&lt;/body&gt;
&lt;/html&gt;</pre></div>
<h3>Listing 4</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> __autoload<span style="color: #009900;">&#40;</span> <span style="color: #000088;">$className</span> <span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">require_once</span> <span style="color: #0000ff;">'/path/to/library/'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$className</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.php'</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre></div>
<p>So line 8 of Listing 3 includes the code in Listing 4.  Using the newly included autoloader, line 12 of Listing 3 then instantiates a new User object, the code for which is in Listing 5 but is not really relevant for what I am trying to demonstrate but has been included so that all of this code will work correctly if you are trying it on your own computer.  The newly instantiated User object can then be successfully used on lines 15, 16 and 20 of Listing 3.  All of this code we have just looked at represents code that already exists in your application's codebase.</p>
<h3>Listing 5</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">class</span> User
<span style="color: #009900;">&#123;</span>
    <span style="color: #009933; font-style: italic;">/**
     * First name
     *
     * @var string
     */</span>
    protected <span style="color: #000088;">$_firstName</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * Last name
     *
     * @var string
     */</span>
    protected <span style="color: #000088;">$_lastName</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * Set first name
     *
     * @param  string $firstName
     * @return object User
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> setFirstName<span style="color: #009900;">&#40;</span> <span style="color: #000088;">$firstName</span> <span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_firstName <span style="color: #339933;">=</span> <span style="color: #000088;">$firstName</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #b1b100;">return</span> <span style="color: #000088;">$this</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * Set last name
     *
     * @param  string $lastName
     * @return object User
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> setLastName<span style="color: #009900;">&#40;</span> <span style="color: #000088;">$lastName</span> <span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_lastName <span style="color: #339933;">=</span> <span style="color: #000088;">$lastName</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #b1b100;">return</span> <span style="color: #000088;">$this</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * Get full name
     *
     * @return string
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getFullName<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #b1b100;">return</span> <span style="color: #009900;">&#40;</span>string<span style="color: #009900;">&#41;</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_firstName <span style="color: #339933;">.</span> <span style="color: #0000ff;">' '</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_lastName<span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div>
<p>To this code we now want to add the functionality of the Zend_Currency component we previously looked at.  This is how the code now looks:</p>
<h3>Listing 6</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;">&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&nbsp;
<span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Require Autoloader</span>
<span style="color: #b1b100;">require_once</span> <span style="color: #0000ff;">'classloader.php'</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Instantiate 'User' class</span>
<span style="color: #666666; font-style: italic;">// Loaded automatically via the Autoloader loaded line 8</span>
<span style="color: #000088;">$User</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> User<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Set properties</span>
<span style="color: #000088;">$User</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setFirstName</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Jeremy'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$User</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setLastName</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Brown'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
Full name from the 'User' class: <span style="color: #000000; font-weight: bold;">&lt;?php</span> <a href="http://www.php.net/echo"><span style="color: #990000;">echo</span></a> <span style="color: #000088;">$User</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getFullName</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
&lt;br&gt;
&nbsp;
<span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #000088;">$currency</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Zend_Currency<span style="color: #009900;">&#40;</span> <a href="http://www.php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span>
    <span style="color: #0000ff;">'locale'</span>   <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'en_US'</span><span style="color: #339933;">,</span>
    <span style="color: #0000ff;">'value'</span>        <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">5</span><span style="color: #339933;">,</span>
<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
Currency amount: <span style="color: #000000; font-weight: bold;">&lt;?php</span> <a href="http://www.php.net/echo"><span style="color: #990000;">echo</span></a> <span style="color: #000088;">$currency</span> <span style="color: #000000; font-weight: bold;">?&gt;</span>
&nbsp;
&lt;/body&gt;
&lt;/html&gt;</pre></div>
<p>Lines 26-29 instantiate and configure the Zend_Currency object a little differently than we saw in Listings 1 and 2, as we are no longer using a form to set the values and are passing the configuration options into the object's constructor, but that is nothing to get hung up on.  What is important to recognize is that we are now utilizing the Zend_Currency component in our existing code.  When we run the code in Listing 6 though we will receive several errors regarding PHP's inability to include the Zend_Currency class because our already-existant autoloader from Listing 4 has attempted to autoload the Zend_Currency class for us but does not know how to correctly load Zend Framework 1.x components.</p>
<p>We can remedy this by making the changes shown below:</p>
<h3>Listing 7</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> __autoload<span style="color: #009900;">&#40;</span> <span style="color: #000088;">$className</span> <span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span> <a href="http://www.php.net/file_exists"><span style="color: #990000;">file_exists</span></a><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">'/path/to/library/'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$className</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.php'</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #b1b100;">require_once</span> <span style="color: #0000ff;">'/path/to/library/'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$className</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.php'</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
    <span style="color: #b1b100;">else</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/usr/local/share/ZendFramework-1.11.10/library'</span><span style="color: #339933;">;</span>
&nbsp;
        <a href="http://www.php.net/set_include_path"><span style="color: #990000;">set_include_path</span></a><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">.</span> DIRECTORY_SEPARATOR <span style="color: #339933;">.</span> <a href="http://www.php.net/get_include_path"><span style="color: #990000;">get_include_path</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #b1b100;">require_once</span><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/Zend/Loader/Autoloader.php'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        Zend_Loader_Autoloader<span style="color: #339933;">::</span><span style="color: #004000;">getInstance</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        Zend_Loader<span style="color: #339933;">::</span><span style="color: #004000;">loadClass</span><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$className</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div>
<p>Notice that line 7 still exists as it did on line 5 in Listing 4, but we have wrapped its execution with code that first checks that the file in question exists.  What we have done is directed our autoloader to first look in our own library path for the class we want to autoload.  If it exists we load it and if it does not then it is assumed to be a Zend Framework 1.x component and the necessary code to autoload a Zend Framework 1.x component is executed.  This is what lines 11-17 do.  If they look familiar, it is because they should.  They are the same as lines 12-18 in Listing 2.  The only difference is that Listing 7 contains one extra call on line 19.  Because we are wanting to load a specific class, which we know the name of, we instruct Zend_Loader to directly load the class for us.</p>
<p>You will likely need to make a few tweaks to the specific code in Listing 7 to suit you specific needs, but it has now been successfully demonstrated how you can load individual Zend Framework 1.x components into our existing codebase alongside an existing autoloader.</p>
<h2>Always Remember Where You Are Trying To Go</h2>
<p>So far the approaches I have presented have revolved around using Zend Framework 1.x components as libraries in your existing codebase.  But what if your ultimate end-goal is to fully convert your existing codebase into a full MVC application?  The fourth and final tip I will offer in this article really gets us moving in that direction, but before we get there there is another tip that is worth sharing.</p>
<p>Let's assume that you have just been asked to develop some new functionality for your application that supports the ability for visitors to your website to be able to add comments, and for the comments left by everyone to be displayed.  We want to take care to develop this new functionality in such a way as to minimize the amount of refactoring that will be required later once the MVC architecture is fully utilized.  But how do we do this?  To begin, let's discuss for a moment what the MVC architecture is.  MVC stands for Model View Controller and is a software architecture, that among other things, promotes the concept of separation of concerns in your code.  Additional information can be found at <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">wikipedia</a>.  Most of the code examples we have looked at so far in this article have had no separation of concerns, with the PHP code being contained and displayed inline with the HTML code.  The only exception to this is the User object from Listing 5.  It is self-contained code that can be very readily re-used and re-purposed.  This code represents the 'M' in MVC as it encapsulates data and/or business logic.  So knowing that objects encapsulate data and/or business logic and that they are also the Models in an MVC application, let's take a look at how we can implement the requested commenting functionality in our existing application.</p>
<h3>Listing 8</h3>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">class</span> Comments
<span style="color: #009900;">&#123;</span>
    <span style="color: #009933; font-style: italic;">/**
     * Reference to database adapter
     *
     * @var Zend_Db_Adapter_Abstract
     */</span>
    protected <span style="color: #000088;">$_db</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * Setup database connection
     *
     * @return void
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> __construct<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/usr/local/share/ZendFramework-1.11.10/library'</span><span style="color: #339933;">;</span>
&nbsp;
        <a href="http://www.php.net/set_include_path"><span style="color: #990000;">set_include_path</span></a><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">.</span> DIRECTORY_SEPARATOR <span style="color: #339933;">.</span> <a href="http://www.php.net/get_include_path"><span style="color: #990000;">get_include_path</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #b1b100;">require_once</span><span style="color: #009900;">&#40;</span> <span style="color: #000088;">$zfPath</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/Zend/Loader/Autoloader.php'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        Zend_Loader_Autoloader<span style="color: #339933;">::</span><span style="color: #004000;">getInstance</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_db <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Zend_Db_Adapter_Pdo_Mysql<span style="color: #009900;">&#40;</span><a href="http://www.php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span>
            <span style="color: #0000ff;">'host'</span>     <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'localhost'</span><span style="color: #339933;">,</span>
            <span style="color: #0000ff;">'username'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'secretUsername'</span><span style="color: #339933;">,</span>
            <span style="color: #0000ff;">'password'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'secretPassword'</span><span style="color: #339933;">,</span>
            <span style="color: #0000ff;">'dbname'</span>   <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'myDatabase'</span>
        <span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_db<span style="color: #339933;">-&gt;</span><span style="color: #004000;">setFetchMode</span><span style="color: #009900;">&#40;</span>Zend_Db<span style="color: #339933;">::</span><span style="color: #004000;">FETCH_OBJ</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * Add comment
     * 
     * @param  string $title
     * @param  string $description
     * @return object Comments
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> addComment<span style="color: #009900;">&#40;</span> <span style="color: #000088;">$title</span><span style="color: #339933;">,</span> <span style="color: #000088;">$description</span> <span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$data</span> <span style="color: #339933;">=</span> <a href="http://www.php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span>
            <span style="color: #0000ff;">'title'</span>            <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$title</span><span style="color: #339933;">,</span>
            <span style="color: #0000ff;">'description'</span>  <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$description</span><span style="color: #339933;">,</span>
        <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_db<span style="color: #339933;">-&gt;</span><span style="color: #004000;">insert</span><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">'comments'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$data</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #b1b100;">return</span> <span style="color: #000088;">$this</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * Retrieve all comments
     * 
     * @return object 
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getComments<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$select</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_db<span style="color: #339933;">-&gt;</span><span style="color: #004000;">select</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
            <span style="color: #339933;">-&gt;</span><span style="color: #004000;">from</span><span style="color: #009900;">&#40;</span>
                <span style="color: #0000ff;">'comments'</span><span style="color: #339933;">,</span>
                <a href="http://www.php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span>
                    <span style="color: #0000ff;">'title'</span><span style="color: #339933;">,</span>
                    <span style="color: #0000ff;">'description'</span>
                <span style="color: #009900;">&#41;</span>
            <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #b1b100;">return</span> <span style="color: #000088;">$select</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">query</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">fetchAll</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div>
<p>Listing 8 contains our new Comments class.  It provides the functionality of being able to add a new comment as well as retrieve all existing comments.  You will notice that both of these methods are using either the <span class="geshifilter"><code class="php geshifilter-php">insert<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span></code></span> or <span class="geshifilter"><code class="php geshifilter-php">select<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span></code></span> methods of the Zend_Db_Adapter_Pdo_Mysql object.  Since the ultimate goal you have for your codebase is to fully convert it to a full Zend Framework 1.x application it only makes sense to have all new code utilize as many Zend Framework 1.x components and coding practices as possible.  This will lead to a lot less refactoring in the future.  The constructor of our object is where the Zend_Db_Adapter_Pdo_Mysql object gets instantiated.  Once again, because it is a Zend Framework 1.x component, and we are not yet using a full MVC implementation of Zend Framework 1.x, we must register the Zend_Loader_Autoloader component as we have seen in previous examples.  This is what lines 19-25 do.  Lines 27-32 configure and instantiate the Zend_Db_Adapter_Pdo_Mysql object for use and line 34 sets the fetch mode of the adapter.</p>
<p>At the point in the future when you have completely converted your codebase to a full-stack Zend Framework 1.x MVC application you will have capabilities available to you that had not previously existed in your code.  One such set of capabilities are those provided by Zend_Application.  By using Zend_Application you can replace lines 19-34 in Listing 8 with the following:</p>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span>_db <span style="color: #339933;">=</span> Zend_Controller_Front<span style="color: #339933;">::</span><span style="color: #004000;">getInstance</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #339933;">-&gt;</span><span style="color: #004000;">getParam</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'bootstrap'</span><span style="color: #009900;">&#41;</span>
    <span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPluginResource</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'db'</span><span style="color: #009900;">&#41;</span>
    <span style="color: #339933;">-&gt;</span><span style="color: #004000;">getDbAdapter</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>So while in the original example of Listing 8's code you were having to instantiate the Zend_Db_Adapter_Pdo_Mysql object yourself in order to use it you can now grab the default database adapter off of the resource called 'db' that was created during the application's bootstrap process.  Have you noticed what did not change in all of this though?  Any code in any of the methods in the Comments class.  Because you knew where you ultimately wanted to go with your codebase you were able to confine any code that needed to be changed later to your constructor so that the refactoring you had to do in the future was greatly minimized.</p>
<h2>You Never Have To Stop Developing</h2>
<p>You have utilized all of the tips provided so far and have been able to make improvements to your application.  But you have now reached a point where you are finding that you need a full MVC stack and once again are not sure how to proceed.  The biggest question you are likely asking yourself is a several-step question.  How can you begin converting all of the code that is not object-based (remember, these are the Models in MVC) into View and Controllers, the V and C in MVC?  It isn't so much how you convert the code but rather how can you do it while allowing your existing application to remain available for use?  If you decide to approach the problem by doing the conversion in an offline version of your codebase, how do you best manage changes that are required to be made to your application?  You will need to roll any changes made to your existing application into your offline version as well so that you do not miss picking up any bug fixes, feature releases, etc.  Thankfully there is a way to achieve this conversion in a very manageable way.</p>
<p>The traditional setup for a website is that the files for the main pages of the site are located in the document root of the site's installation.  Alongside these files will likely be a filed named <span class="geshifilter"><code class="php geshifilter-php">index<span style="color: #339933;">.</span>php</code></span> and your web server is configured to serve this file by default if no other file is specified in the URL.  The traditional setup for a Zend Framework 1.x application is that there will be several folders at what is traditionally the document root of the site's installation.  The folders include, but are not limited to:</p>
<ul>
<li>application</li>
<li>library</li>
<li>public</li>
</ul>
<p>The document root of your Zend Framework 1.x application is actually the public folder and with the use of Apache mod_rewrite rules, or IIS equivalents, hereafter referred to as just rewrite rules, all requests for your application get routed through the <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #000000; font-weight: bold;">public</span><span style="color: #339933;">/</span>index<span style="color: #339933;">.</span>php</code></span> file.  It is the use of these rewrite rules that allows you great flexibility in configuring your application and being able to have a Zend Framework 1.x application sit alongside your existing website.</p>
<p>The default rewrite rules of a Zend Framework 1.x application actually route any requests for non-existent folders or files through the <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #000000; font-weight: bold;">public</span><span style="color: #339933;">/</span>index<span style="color: #339933;">.</span>php</code></span> file.  For files that exist the web server serves them directly and your Zend Framework 1.x application never gets involved.  So how does this help you?  Think for a moment about your existing website that you want to convert over to fully utilizing Zend Framework 1.x.  The first thing you will need to do is to create, at minimum, the three folders listed previously.  If you already have folders in your website with these names then you are either going to have to first refactor your existing codebase to change the names of these folders or give these folders different names in your Zend Framework 1.x application.  Giving them different names will not cause any problems with any of the code that comprises the Zend Framework 1.x library, as it does not have any hard-coded references to these folder names, but you will need to be constantly vigilant of the fact that you have made such modifications because the Zend Framework 1.x manual assumes the use of these standard naming conventions and you will have to keep the name changes straight as you are reading it.  For the sake of this article we are going to refer to these folders following the standard naming convention.</p>
<p>Once you have created these folders you should move every file and folder that should be accessible from your website into the new <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #339933;">/</span><span style="color: #000000; font-weight: bold;">public</span></code></span> folder.  You have succeeded in moving your website's document root from its previous location to the new <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #339933;">/</span><span style="color: #000000; font-weight: bold;">public</span></code></span> folder location and if you change your web server's configuration to reflect this your website should still continue to operate as before (if you had any hard-coded paths in your website's codebase they would need to be modified to reflect this new path).</p>
<p>I mentioned earlier that any request for a file or folder that does not exist in a Zend Framework 1.x application will get routed through the index.php file.  This means that you are going to need to convert your existing <span class="geshifilter"><code class="php geshifilter-php">index<span style="color: #339933;">.</span>php</code></span> file and its contents into a Zend Framework Controller and associated View Script so that we can repurpose the index.php file.  Assuming your existing index.php file contains pretty simplistic logic this will be as easy as extracting the PHP code and logic and placing it in the indexAction method of the <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #339933;">/</span>application<span style="color: #339933;">/</span>modules<span style="color: #339933;">/</span><span style="color: #000000; font-weight: bold;">default</span><span style="color: #339933;">/</span>controllers<span style="color: #339933;">/</span>IndexController<span style="color: #339933;">.</span>php</code></span> file and placing the HTML to be rendered in the <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #339933;">/</span>application<span style="color: #339933;">/</span>modules<span style="color: #339933;">/</span><span style="color: #000000; font-weight: bold;">default</span><span style="color: #339933;">/</span>views<span style="color: #339933;">/</span>scripts<span style="color: #339933;">/</span>index<span style="color: #339933;">/</span>index<span style="color: #339933;">.</span>phtml</code></span> file, which is the standard configuration for a Zend Framework 1.x application.  You are now free to replace the contents of the index.php file with that of the guidance of the Zend Framework 1.x manual.</p>
<p>Your existing website is still accessible as it was before all of these changes, with the difference being that it is now configured with the structure of a Zend Framework 1.x application.  You have converted your original <span class="geshifilter"><code class="php geshifilter-php">index<span style="color: #339933;">.</span>php</code></span> file over to a Zend Framework Controller and View Script and the rest of your site's pages and resources can remain configured exactly as they are right now.  The changes you have introduced give you two options moving forward.  The first option is that any new pages or sections you want to add to your application can be added in a 100% MVC fashion.  You only need to create a new Controller and any corresponding View Scripts.  The second option is that you can now work on converting existing pages in your website at whichever pace best suits your development timeline.  You can make modifications or improvements to the existing pages without having to worry about them getting out of sync with another copy of your code and you can convert them to an MVC implementation with ease.  In this way both your old and new code can be maintained and exist side-by-side simultaneously.</p>
<h2>Conclusion</h2>
<p>I hope that these 4 tips I have presented have shown you the range of ways you can begin taking advantage of all Zend Framework 1.x has to offer.  Whether as a component library or a full-stack MVC application, Zend Framework 1.x can be used very easily in almost any situation.</p>
<p>-Jeremy</p>
<div class="flagger">
					<span class="flaggertitle">Was this helpful?</span>
					<div class="flaggeroption"><a id="flaggeryes" href="#">Yes</a></div>
					<div class="flaggeroption"><a id="flaggerno" href="#">No</a></div>
					<form id="flaggerform" method="post">
					<div style="display:none;" class="flaggermessage">Thank you! If you'd like to leave a comment, please use the form below: <div class="flaggercomment"><textarea class="flaggertext" name="flaggertext"></textarea><input type="submit" class="submit" id="flaggersubmit" value="Submit" /></div></div><div style="display:none" class="flaggersuccess">Your comment has been submitted! Thank you for your feedback.</div>
					</form>
				</div>
				<div id="flaggerget" style="display:none;"></div>
				<div id="flaggernode" style="display:none;">270222</div></div>
  <div class="clear-block clear"></div>

      <div class="links"><ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>
  
</div>
  </div>

  
  </div>
  </div>
</div>
</div>
</div>
 
                                        </div><!-- /inner-content -->
          </div><!-- /squeeze-content -->
        </div><!-- /squeeze -->
      </div><!-- /main -->
          </div><!-- /middle-container -->
    <div style="clear:both"></div>
            <div id="footer">
              <div id="footer-region">  <div class="block block-block" id="block-block-3">
    <div class="content"><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22553883-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></div></div>
</div>
                  
      &copy; 2013 SoftLayer Technologies, Inc. All rights reserved.
    </div><!-- /footer -->
  <div style="clear:both"></div>
  <script type="text/javascript" src="/sites/all/modules/jquery_update/replace/jquery.min.js?s"></script>
<script type="text/javascript" src="/misc/drupal.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/apachesolr_autocomplete/apachesolr_autocomplete.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/apachesolr_autocomplete/jquery-autocomplete/jquery.autocomplete.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/dhtml_menu/dhtml_menu.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/panels/js/panels.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/tableofcontents/jquery.scrollTo-min.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/tableofcontents/jquery.localscroll-min.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/tableofcontents/tableofcontents.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/flagger/js/flagger.js?s"></script>
<script type="text/javascript" src="/misc/collapse.js?s"></script>
<script type="text/javascript" src="/misc/tableheader.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/views/js/base.js?s"></script>
<script type="text/javascript" src="/sites/all/modules/views/js/ajax_view.js?s"></script>
<script type="text/javascript" src="/sites/all/themes/softlayer/js/jquery.pngFix.js?s"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "apachesolr_autocomplete": { "path": "/apachesolr_autocomplete" }, "dhtmlMenu": { "slide": "slide", "clone": "clone" }, "views": { "ajax_path": "/views/ajax", "ajaxViews": [ { "view_name": "Blogs", "view_display_id": "block_2", "view_args": "", "view_path": "node/270222", "view_base_path": "blog/feed", "view_dom_id": 1, "pager_element": 0 } ] } });
//--><!]]>
</script>
    </div> <!-- /page -->
</body>
</html>
