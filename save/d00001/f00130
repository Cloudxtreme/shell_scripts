<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-br" xml:lang="pt-br">
<head>
<link rel="stylesheet" href="/pub/TWiki/JQueryPlugin/jquery-all.css" type="text/css" media="all" />
<script type="text/javascript" src="/pub/TWiki/JQueryPlugin/jquery-all.js"></script>
<link rel="stylesheet" href="http://ntp.br/pub/TWiki/ImagePlugin/style.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://ntp.br/pub/TWiki/ImageGalleryPlugin/style.css" type="text/css" media="all" />
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
	<link rel="stylesheet" type="text/css" media="screen" href="/pub/NTP/WebModeloNicTemplate/ntp.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/pub/NTP/WebModeloNicTemplate/home.css" />
	<link rel="stylesheet" type="text/css" media="print" href="/pub/NTP/WebModeloNicTemplate/print.css" />
	<link rel="stylesheet" type="text/css" media="handheld" href="/pub/NTP/WebModeloNicTemplate/handheld.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="NTP.br, ntp, ntp" />
	<meta name="description" content="NTP.br" />
	<!-- <meta http-equiv="pragma" content="no-cache" /> -->
	<script type="text/javascript" src="scripts.js"></script>
	<script type="text/javascript" src="/pub/NTP/WebModeloNicTemplate/css3-mediaqueries.js"></script>
	<title>NTP.br - Hora Certa via Internet - O Tempo</title>
<!--TABLEPLUGIN_table1--><style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
</style></head>
<body>
	<div class="header-ceptro">
		<h1><a href="http://www.ceptro.br/"><img src="/pub/NTP/WebModeloNicTemplate/logo-ceptro-top.gif" alt="ceptro.br" width="82" height="28" longdesc="Centro de Estudos e Pesquisas em Tecnologia de Redes e Operações" /></a></h1> 
		<span><a href="http://www.ceptro.br/">Centro de Estudos e Pesquisas em Tecnologia de Redes e Operações</a></span>
		<div class="header-cgi-nic">
			<a href="http://www.on.br/" title="Observatório Nacional"><img src="/pub/NTP/WebModeloNicTemplate/logo-on-top.gif" alt="Observatório Nacional" width="121" height="26" /></a><span class="invisible">|</span>
		    <a href="http://www.cgi.br/" title="Comitê Gestor da Internet no Brasil"><img src="/pub/NTP/WebModeloNicTemplate/logo-cgi-top.gif" alt="CGI.br" width="43" height="27" /></a><span class="invisible">|</span>
		    <a href="http://www.nic.br/" title="Núcleo de Informação e Coordenação do Ponto BR"><img src="/pub/NTP/WebModeloNicTemplate/logo-nic-top.gif" alt="NIC.br" width="41" height="27" /></a>
		</div>
	</div><!--.header-ceptro-->
	<div class="topo">
	  <h2><a href="http://www.ntp.br/" accesskey="1"><img src="/pub/NTP/WebModeloNicTemplate/logo-ntp.gif" alt="NTP.br" class="logo-ntp" width="256" height="58" /></a></h2>
		<span class="ir-conteudo"><a href="#content" accesskey="2">Ir para o conteúdo</a></span>
		<ul>
		    <li><a href="http://pcdsh01.on.br/">Divisão da Hora do Observatório Nacional</a></li>
		    <li><a href="http://www.nic.br/imprensa">Imprensa</a></li>
		    <li class="last"><a href="http://www.ceptro.br/CEPTRO/EnglishHome#NTP_br_Brazilian_Legal_Time_over">English</a></li>
		</ul>
	</div><!--.topo-->
	<div class="container">
		<div class="menu-esq">
		<ul class="menu">
<li><a href="/NTP/MenuNTPIntroducao" class="twikiLink">Introdução</a></li>
<li><a href="/NTP/MenuNTPWindows" class="twikiLink">Guia Windows</a></li>
<li><a href="/NTP/MenuNTPLinuxBSD" class="twikiLink">Guia Linux/BSD</a></li>
<li><a href="/NTP/MenuNTPMac" class="twikiLink">Guia MAC</a></li>
<li><a href="/NTP/MenuNTPRoteadores" class="twikiLink">Guia Roteadores</a></li>
<li><a href="/NTP/MenuNTPTempo" class="twikiCurrentTopicLink twikiLink">O Tempo</a></li>
<li><a href="/NTP/MenuNTPNtp" class="twikiLink">O NTP</a></li>
<li><a href="/NTP/MenuNTPEstrutura" class="twikiLink">Estrutura</a></li>
<li><a href="/NTP/MenuNTPGrafico" class="twikiLink">Gráficos</a></li>
<li><a href="/NTP/MenuNTPAvancado" class="twikiLink">Conf. Avançada</a></li>
<li><a href="/NTP/MenuNTPVocabulario" class="twikiLink">Vocabulário</a></li>
<li><a href="/NTP/MenuNTPFaq" class="twikiLink">FAQ</a></li>
<li><a href="/NTP/MenuNTPLinks" class="twikiLink">Links</a></li>
<li><a href="/NTP/MenuNTPBanners" class="twikiLink">Banners</a></li>
<li><a href="/NTP/MenuNTPContato" class="twikiLink">Contato</a></li>          
</ul>
				<form method="get" action="http://www.google.com/search" title="Busca no site">
			<fieldset>
				<label for="busca"><span class="busca-txt">Busca</span><br />
				<input type="text" size="17" name="q" maxlength="255" value="Buscar por..." id="busca" onfocus="clearDefault(this)" class="busca-campo" /></label>
				<input type="hidden" name="domains" value="cgi.br;nic.br;registro.br;ceptro.br;cetic.br;ceptro.br;w3c.br" /><input type="hidden" name="ie" value="iso-8859-1" /><input type="hidden" name="oe" value="iso-8859-1" /><input type="button" name="sa" value="ok" alt="ok" class="busca-btn" />
				<label class="invisivel" for="busca-no-site">Selecione o site</label>
				<select name="sitesearch" id="busca-no-site" title="Selecione o site" class="busca-select">
					<option value="ntp.br" selected="selected">Buscar em NTP.br...</option>
				    <option value="cgi.br">Buscar em CGI.br</option>
					<option value="nic.br">Buscar em NIC.br</option>
					<option value="registro.br">Buscar em Registro.br</option>
					<option value="cetic.br">Buscar em CETIC.br</option>
					<option value="ceptro.br">Buscar em CEPTRO.br</option>
					<option value="w3c.br">Buscar em W3C.br</option>
				</select>
			</fieldset>
			</form>  
<p />
			<span class="acessibilidade"><a href="http://validator.w3.org/check?uri=referer">V&aacute;lido XHTML</a> </span>
			<span class="acessibilidade"><a href="http://jigsaw.w3.org/css-validator/check/referer">V&aacute;lido CSS</a> </span>
			<span class="acessibilidade"><a href="http://www.ntp.br/NTP/AcessibilidadeSitio" accesskey="3">Acessibilidade do sítio</a></span>
		</div><!--.menu-esq-->
		<div class="conteudo">
			<div class="breadcrumb">
				Você está em: <strong>NTP.br -&gt; O Tempo</strong>
				<div class="seu-ip">Seu <acronym title="Internet Protocol">IP</acronym>: 2001:0:53aa:64c:18ca:5d94:2471:e895 </div>
			</div><!--.breadcrumb-->
<div class="subcontent">
			<a name="content"></a>
<p /><h3><a name="O_Tempo"></a> O Tempo </h3>
<a name="VolTar"></a> 
<div class="twikiToc"> <ul>
<li> <a href="#O_Tempo"> O Tempo</a> <ul>
<li> <a href="#O_que_o_tempo"> O que é o tempo?</a>
</li> <li> <a href="#As_escalas_de_tempo"> As escalas de tempo.</a>
</li> <li> <a href="#A_Hora_Legal_Brasileira_e_o_pape"> A Hora Legal Brasileira e o papel do ON</a>
</li> <li> <a href="#A_import_ncia_da_sincroniza_o"> A importância da sincronização.</a>
</li> <li> <a href="#Como_os_rel_gios_de_computadores"> Como os relógios de computadores trabalham.</a>
</li> <li> <a href="#Propriedades_importantes_dos_rel"> Propriedades importantes dos relógios.</a>
</li></ul> 
</li></ul> 
</div>
<div class="voltar"><a href="/NTP/MenuNTPTempo#VolTar" class="twikiCurrentTopicLink twikiAnchorLink">Voltar</a></div>
<hr />
<h4><a name="O_que_o_tempo"></a><a name="O_que_o_tempo_"></a> O que é o tempo? </h4>
<p />
É difícil buscar uma definição precisa de tempo. Consideremos dois eventos, um ocorrendo <em>depois</em> do outro. Para entender o conceito de depois podemos recorrer à causalidade: vamos supor que o primeiro evento tenha provocado o segundo, então podemos dizer certamente que o segundo evento ocorre depois do primeiro. Façamos então a pergunta: " <em>Quanto</em> o segundo evento ocorre depois do primeiro?". A resposta é a quantidade que costumamos chamar de tempo, ou, mais precisamente, de intervalo de tempo. Essa quantidade pode ser medida por um dispositivo chamado relógio. O relógio trabalha de forma contínua fornecendo indicações instantâneas, que podemos chamar de momentos. Então, o primeiro evento ocorre em um momento, digamos m1 e o segundo ocorre em outro momento, digamos m2. O intervalo de tempo entre os dois eventos, que vamos chamar de t, é: t=m2-m1.
<p />
Consideremos para fins práticos, então, que tempo é o intervalo entre dois eventos, ou o momento indicado pelo relógio.
O tempo é medido em segundos, que é uma unidade do SI (Sistema Internacional de Unidades). Historicamente o segundo era medido com base no dia solar médio (1/86400 do dia solar médio), mas a rotação da Terra é bastante imprecisa. Então, em 1954, definiu-se o segundo com base na rotação da Terra em torno do Sol (1/31.556.925,9747 do tempo que levou a Terra a girar em torno do Sol à partir das 12h de 04/01/1900). Contudo, a rotação da Terra em torno do Sol também é imprecisa.
<p />
Desde 1967 o segundo é definido com base na medição de relógios atômicos, como:
<p />
"O segundo é a duração de 9.192.631.770 períodos da radiação correspondente à transição entre dois níveis hiperfinos do estado fundamental do átomo de césio 133."
<div class="voltar"><a href="/NTP/MenuNTPTempo#VolTar" class="twikiCurrentTopicLink twikiAnchorLink">Voltar</a></div>
<hr />
<h4><a name="As_escalas_de_tempo"></a><a name="As_escalas_de_tempo_"></a> As escalas de tempo. </h4>
<p />
As escalas de tempo podem ser definidas como sistemas de ordenamento de eventos. Pode-se entendê-las também como convenções sobre a forma de medir e representar o tempo. As escalas não podem ser ambíguas, devem ser estáveis e homogêneas.
<p />
Existem diversas escalas de tempo. As mais importantes no contexto do NTP são:
<p /> <ul>
<li> <strong>TAI (Tempo Atômico Internacional ou Temps Atomique International)</strong>: Tempo Atômico Internacional. É calculada pelo Bureau International des Poids et Mesures (BIPM) a partir da leitura de mais de 260 relógios atômicos localizados em institutos e observatórios de metrologia ao redor do mundo. No Brasil o Observatório Nacional participa da geração do TAI. Estima-se que o erro do TAI em relação a um relógio imaginário perfeito esteja em torno de 100ns por ano.
</li></ul> 
<p /> <ul>
<li> <strong>TUC (Tempo Universal Coordenado) ou UTC (Universal Time Coordinated)</strong>: É a base para o tempo legal no mundo todo, inclusive no Brasil. O UTC acompanha o TAI, mas é disciplinado pelo período solar. Para ajustar o UTC em relação ao período solar é acrescentado ou removido um segundo sempre que necessário. Isso é chamado de <strong>segundo intercalado</strong>, ou <strong><em>leap second</em></strong>, e a necessidade de aplicar e em que data fazê-lo é determinada pela  International Earth Rotation &amp; Reference Systems Service (IERS). Assim, assegura-se que o Sol esteja exatamente sobre o meridiano de Greenwich as 12h, com um erro máximo de 0,9s. O UTC é então o sucessor do GMT (<em>Greenwich Mean Time</em>), que era a escala de tempo utilizada quando a definição de segundo era baseada no dia solar.
</li></ul> 
<p /> <ul>
<li> <strong>TA(k)</strong>: Tempo Atômico. É a designação dada às escalas de tempo materializadas por um relógio atômico específico. Por exemplo, a designação TA(ONRJ) indica a escala mantida pelo Observatório Nacional no Rio de Janeiro, e que contribui na geração do TAI. TA(NIST) indica a escala mantida pelo US National Institute of Standards and Technology.
</li></ul> 
<p /> <ul>
<li> <strong>GPS Time</strong>: Os satélites GPS adotaram uma escala sincronizada com o UTC em 1980, mas desde então não sofreram as correções dos segundos intercalados. O GPS está adiantado em relação ao UTC 14s. Atenção aqui porque os receptores GPS normalmente apresentam o tempo em UTC, fazendo a "correção" internamente. Desconsiderando-se a questão dos segundos intercalados, o GPS (por definição) não diverge do UTC mais do que 1µs; na prática, o erro não passa de algumas dezenas de nanosegundos.
</li></ul> 
<p /> <ul>
<li> <strong>Tempo Local</strong>: Diferentes regiões do mundo adotam fusos horários distintos. O tempo local é uma escala de tempo baseada numa diferença em relação ao UTC, de forma a adequá-lo ao tempo solar local. No Brasil, a legislação determina os fusos em seus respectivos Estados que o adotam.  A Lei n° 11.662 de 24/04/2008 e o Decreto n° 6.558 de 08/09/2008 definem:
</li></ul> 
<p />
<table cellspacing="0" id="table1" cellpadding="0" class="twikiTable" rules="none" border="1">
	<thead>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<th valign="top" class="twikiTableCol0 twikiFirstCol"> Diferença em relação ao UTC </th>
			<th valign="top" class="twikiTableCol1"> Sem horário de Verão </th>
			<th valign="top" class="twikiTableCol2 twikiLastCol"> No horário de Verão </th>
		</tr>
	</thead>
	<tbody>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td valign="top" class="twikiTableCol0 twikiFirstCol"> UTC-2 </td>
			<td valign="top" class="twikiTableCol1"> Ilhas de Fernando de Noronha, Trindade, Martin Vaz, Penedos de São Pedro e São Paulo e o Atol das Rocas. </td>
			<td valign="top" class="twikiTableCol2 twikiLastCol"> Ilhas de Fernando de Noronha, Trindade, Martin Vaz, Penedos de São Pedro e São Paulo e o Atol das Rocas. Estados da região Sudeste e Sul, Goiás e o Distrito Federal. </td>
		</tr>
		<tr class="twikiTableOdd twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
			<td valign="top" class="twikiTableCol0 twikiFirstCol"> UTC-3 </td>
			<td valign="top" class="twikiTableCol1"> Estados da região Nordeste, Sudeste, Sul, além do Distrito Federal, Goiás, Tocantins, Amapá e Pará. </td>
			<td valign="top" class="twikiTableCol2 twikiLastCol"> Estados da região Nordeste, Tocantins, Amapá, Pará, Mato Grosso e Mato Grosso do Sul. </td>
		</tr>
		<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
			<td valign="top" class="twikiTableCol0 twikiFirstCol twikiLast"> UTC-4 </td>
			<td valign="top" class="twikiTableCol1 twikiLast"> Estados de Roraima, Rondônia, Mato Grosso, Mato Grosso do Sul, Amazonas e Acre. </td>
			<td valign="top" class="twikiTableCol2 twikiLastCol twikiLast"> Estados de Roraima, Rondônia, Amazonas e Acre. </td>
		</tr>
	</tbody></table>
<p />
<div class="voltar"><a href="/NTP/MenuNTPTempo#VolTar" class="twikiCurrentTopicLink twikiAnchorLink">Voltar</a></div>
<hr />
<h4><a name="A_Hora_Legal_Brasileira_e_o_pape"></a> A Hora Legal Brasileira e o papel do ON </h4>
<p />
O Tempo é padronizado em todo mundo através da escala de Tempo Atômico Internacional (TAI), baseada em dados provenientes de um conjunto mundial de relógios atômicos (aproximadamente 250 relógios atômicos em 50 países).  Constitui-se de um acordo internacional aceito como referência de tempo em conformidade com a definição atual do segundo.  O TAI é mantido pelo Bureau International des Poids et Mesures (BIPM), na França. A estabilidade do TAI é monitorada e avaliada através de um algoritmo que estabelece um grau de ponderação aos diversos relógios dos países que contribuem para sua formação e que enviam ao BIPM os dados sobre seus padrões de tempo primários. A escala de tempo atômico TAI é estável, não acompanhando as irregularidades da rotação da Terra. 
<p />
Para fins práticos é preciso ter uma escala de tempo que estivesse em sincronismo com a rotação da Terra e para isso foi estabelecido o Tempo Universal Coordenado (UTC). O UTC acompanha o tempo atômico internacional (TAI), diferindo deste por um número inteiro de segundos denominados segundos intercalados (leap seconds). A Divisão Serviço da Hora (DSHO) do Observatório Nacional (ON) tem como objetivos a Geração, Distribuição e Conservação da Hora Legal Brasileira (HLB), conforme Legislação Brasileira, bem como realizar Pesquisa e Desenvolvimento no campo da metrologia de Tempo e Freqüência. Deste modo a DSHO mantém sob sua guarda os padrões nacionais de tempo e frequência que são a base da Rastreabilidade Metrológica Brasileira. Ao nível internacional a rastreabilidade dos padrões nacionais e da HLB é estabelecida com o BIPM.
<p />
<div class="voltar"><a href="/NTP/MenuNTPTempo#VolTar" class="twikiCurrentTopicLink twikiAnchorLink">Voltar</a></div>
<hr />
<h4><a name="A_import_ncia_da_sincroniza_o"></a><a name="A_import_ncia_da_sincroniza_o_"></a> A importância da sincronização. </h4>
<p />
Uma importante propriedade do tempo é sua monotonicidade, que significa que o tempo sempre avança. Essa parece ser uma propriedade simples, óbvia e fácil de ser mantida, mas de fato não é. Relógios implementados em software, como é o caso dos relógios utilizados pelos diversos Sistemas Operacionais, podem ser facilmente ajustados, intencionalmente ou não, para representar um tempo no passado.
<p />
Diferentes softwares e aplicações podem ser sensíveis a problemas relativos à sincronização do tempo de formas diversas. Dentre os possíveis problemas com a sincronização, podemos considerar:
<p /> <ul>
<li> um computador, ou grupo de computadores, <strong>com o tempo diferente da hora legal</strong>;
</li> <li> um computador cujo <strong>tempo foi ajustado para o passado</strong>;
</li> <li> um grupo de computadores <strong>discordando entre si quanto ao tempo correto</strong> (isso implica que ao menos <em>n-1</em> integrantes desse grupo terão o tempo diferente da hora legal, implica também que haverá computadores para os quais, tendo como referência seu relógio local, o relógio de um ou mais de seus companheiros de grupo, estará no passado).
</li></ul> 
<p />
Quando se trata de um computador isolado a exatidão em relação à uma referência de tempo como a hora legal brasileira não é tão importante. Nesse caso o mais importante é manter a monotonicidade do tempo. Além disso, eventuais ajustes no relógio devem ser, sempre que possível, graduais. Saltos no tempo, mesmo de alguns poucos segundos, para o futuro podem ser ruins, e para o passado, desastrosos.
<p />
Como exemplos de aplicações afetadas pelo tempo pode-se citar:
<p /> <ul>
<li> <strong>Sistemas de distribuição de conteúdo</strong> (<em>www, usenet news, etc</em>): Utilizam estampas de tempo para controlar a expiração dos documentos e o cache. Servidores com o tempo errado podem causar perda de informações ou impedir o acesso às mesmas.
</li></ul> 
<p /> <ul>
<li> <strong>Sistemas de arquivos</strong> (<em>filesystems</em>): Alguns eventos importantes como a criação e modificação de arquivos são marcados por estampas de tempo. Algumas aplicações lêem essas informações e delas dependem. Se alguma dessas datas estiver no futuro, as aplicações podem agir de forma indevida, ou mesmo deixar de funcionar por completo. Como exemplos de aplicações sensíveis a essa situação pode-se citar os sistemas de controle de versão (como o <em>cvs</em>), sistemas de compilação automática (<em>make</em>), sistemas de backup de dados e sistemas de banco de dados.
</li></ul> 
<p /> <ul>
<li> <strong>Agendadores de eventos</strong>: Aplicações como o <em>cron</em> e o <em>at</em> dos sistemas Unix dependem do tempo correto para funcionarem.
</li></ul> 
<p /> <ul>
<li> <strong>Criptografia</strong>: Muitas técnicas criptográficas fazem uso de estampas de tempo para os eventos e chaves para prevenir alguns tipos de ataques. Se os computadores envolvidos não estiverem sincronizados entre si, a autenticação e comunicação criptografada podem falhar.
</li></ul> 
<p /> <ul>
<li> <strong>Protocolos de comunicação e aplicações de tempo real</strong>: Essas aplicações, que incluem as <strong>Interfaces Gráficas</strong>, fazem uso de filas de eventos, <em>timeouts</em>, <em>timers</em>, e outros recursos de software ligados ao tempo. Para seu correto funcionamento é necessário garantir a monotonicidade, uma boa resolução, e a continuidade (ausência de saltos) no tempo.
</li></ul> 
<p /> <ul>
<li> <strong>Sistemas transacionais e bancos de dados distribuidos</strong>: Dependem de relógios exatos e muitas vezes, de sua sincronia com a hora legal. Como exemplo dessas aplicações pode-se citar o <em>Home Banking</em>, o <em>Home Broker</em>, os sistemas <em>EDI</em>, etc. As bolsas de valores, por exemplo, tem horários bem definidos de início e término do pregão. A Receita Federal aceita as declarações de Imposto de Renda geralmente até a meia noite da data limite para a entrega.
</li></ul> 
<p />
É importante também do ponto de vista de <strong>segurança de redes</strong> que os relógios dos computadores estejam sincronizados. Investigações relacionadas a incidentes de segurança tornam-se impossíveis caso os servidores envolvidos e os diversos arquivos de <em>log</em> discordem entre si em relação às estampas de tempo dos eventos.
<p />
Em fim, diferentes softwares e aplicações são sensíveis ao tempo e à sincronização entre as entidades envolvidas de forma diversa. Para algumas aplicações exatidão da ordem de segundos pode ser suficiente. Para outras, é necessário manter os relógios com diferenças na ordem dos milisegundos entre si e em relação à referência legal. Propriedades como a monotonicidade, resolução e precisão dos relógios, que serão detalhadas adiante, também são importantes. O NTP, se corretamente utilizado, é capaz de garantir as propriedades necessárias ao relógio do computador para o bom funcionamento das aplicações.
<div class="voltar"><a href="/NTP/MenuNTPTempo#VolTar" class="twikiCurrentTopicLink twikiAnchorLink">Voltar</a></div>
<hr />
<h4><a name="Como_os_rel_gios_de_computadores"></a> Como os relógios de computadores trabalham. </h4>
<p />
Os relógios de computadores, como quaisquer outros relógios, são baseados em 3 dispositivos:
<p /> <ul>
<li> um oscilador;
</li> <li> um contador;
</li> <li> e um dispositivo de leitura ou visualização.
</li></ul> 
<p />
O oscilador é um dispositivo que gera eventos cíclicos a uma taxa constante, chamada de freqüência. Normalmente os osciladores dos computadores são baseados em cristais de quartzo.
<p />
O contador acumula os ciclos gerados pelo oscilador, geralmente utilizando-se de interrupções de hardware, convertendo-os em unidades de medida conhecidas, como segundos, minutos, horas. Cada valor do contador é chamado de estampa de tempo, ou <em>timestamp</em>.
<p />
A "visualização" ou leitura é feita através de rotinas de software.
<div class="voltar"><a href="/NTP/MenuNTPTempo#VolTar" class="twikiCurrentTopicLink twikiAnchorLink">Voltar</a></div>
<hr />
<h4><a name="Propriedades_importantes_dos_rel"></a> Propriedades importantes dos relógios. </h4>
<p />
<span class="vermelho"> <strong>OBS:</strong> </span> nas definições abaixo utiliza-se o comando <strong><em>ntpq</em></strong> da distribuição do NTP para exemplificar o acesso às variaveis do sistema ligadas a cada conceito. Para mais detalhes sobre essa ferramenta, deve-se acessar a seção <a href="/NTP/MenuNTPAvancado" class="twikiLink">Utilizando</a>.
<p /> <ul>
<li> <strong>Exatidão</strong>: (<em>Accuracy</em>)É quanto o relógio está próximo à referência. Ou seja, indica se o relógio está "certo" ou "errado" ou melhor: quanto o relógio está "certo" ou "errado".
</li></ul> 
<p class="tabulacao">
Se um relógio de computador funciona de forma isolada sua exatidão tende a piorar com o tempo, por conta de erros sistemáticos na freqüência. O relógio atrasa ou adianta conforme o tempo passa. Um relógio típico de computador, se funcionando livremente, pode adiantar-se ou atrasar-se desde alguns segundos até cerca de 1 minuto por semana.
<br /> <br /> 
Para garantir uma melhor exatidão, a alternativa é <strong>disciplinar o relógio</strong> em relação à fontes de tempo e freqüência mais confiáveis, o que pode ser feito com o NTP. Disciplinar o relógio signifca que ele é sincronizado (fase) e sintonizado (freqüência) com uma fonte mais estável de tempo.
<br /> <br /> 
<span class="vermelho">Atenção:</span> muitas vezes se utiliza a palavra precisão, erroneamente, como sinônimo de exatidão. No contexto do NTP exatidão e precisão são coisas totalmente diferentes.</p>
<p /> <ul>
<li> <strong>Precisão</strong> (<em>Precision</em>), <strong>Resolução</strong> (<em>Resolution</em>) e <strong>Granularidade</strong> (<em>Granularity</em>): Por resolução, se entende o valor do menor incremento possível do contador do relógio. A resolução de um relógio de computador é determinada pela freqüência das interrupções de hardware que fazem funcionar o contador. Os valores normalmente variam entre 100Hz e 1Khz, o que resulta em resoluções de 10ms a 1ms.
</li></ul> 
<p class="tabulacao">
Em alguns casos é possível utilizar outras fontes de freqüência (maiores), como por exemplo o relógio da CPU, para interpolar os valores obtidos pelo relógio, conseguindo assim uma resolução melhor. Isso geralmente é chamado de granularidade do relógio. Com isso, resoluções de aproximadamente 1µs são comuns hoje. Implementações de software como o <em>nanokernel</em>, que hoje é parte integrante do FreeBSD e do Linux, permitem resoluções da ordem de nanosegundos.
<br /> <br /> 
Por precisão, entende-se geralmente o menor incremento de tempo que pode ser lido pelo computador. Pode ser um valor maior do que a resolução, já que ler o relógio é uma tarefa realizada por software e há um certo tempo e incerteza envolvidos nela. Ou pode ser menor, quando o software consegue ler o relógio mais rápido do que esse pode contar.
<br /> <br /> 
No contexto do NTP, <strong>precisão</strong> é o maior desses valores. Ou seja, precisão, no NTP, engloba os conceitos de precisão, resolução e granularidade vistos acima. É o menor incremento de relógio que se pode conseguir na prática em um determinado equipamento.
<br /> <br /> 
O NTP calcula a precisão e a armazena numa variável no formato de uma potência de 2. Ou seja, se o comando <em>ntpq -c rl</em>, que mostra as variáveis do sistema, retornar precision=-16, a precisão é de aproximadamente 2<sup>-16</sup>s = 15µs.
<br /> <br /> 
No exemplo abaixo, em que são consultadas as variáveis locais do NTP, a precisão é de 2<sup>-20</sup>s = 0,95µs:</p>
<pre>
      <span class="verde-escuro">usuario@computador.local:~$ <b>ntpq -c rl</b></span>
      assID=0 status=0644 leap_none, sync_ntp, 4 events, event_peer/strat_chg,
      version="ntpd 4.2.2p4@1.1585-o Wed Mar 7 20:43:30 UTC 2007 (1)",
      processor="i686", system="Linux/2.6.20-16-generic", leap=00, stratum=2,
      <span class="vermelho">precision=-20</span>, rootdelay=0.459, rootdispersion=12.089, peer=39324,
      refid=200.160.7.183,
      reftime=cac0ac02.e91dfecc Wed, Oct 17 2007 14:42:58.910, poll=6,
      clock=cac0ac7a.40d41c89 Wed, Oct 17 2007 14:44:58.253, state=4,
      offset=-6.896, frequency=48.637, jitter=1.337, noise=1.627,
      stability=0.067, tai=0 
</pre>
<p class="tabulacao">
<span class="vermelho">Atenção:</span> muitas vezes se confunde a palavra precisão, atribuindo-se a ela indevidamente o conceito de exatidão. No contexto do NTP exatidão e precisão são coisas totalmente diferentes.</p>
<p /> <ul>
<li> <strong>Dispersão</strong>: (<em>Dispersion</em>) É o desvio ou erro estimado nas leituras do relógio. Pode ser causado por flutuações de curta duração na freqüência do oscilador, por erros de medida ocasionados por excesso de utilização do processador, latência causada por interrupções, latência na rede, etc.
</li></ul> 
<p class="tabulacao">
No contexto do NTP a dispersão (<em>dispersion</em>) é estimada localmente e informada pelo servidor ao cliente na troca de mensagens.
<br /> <br /> 
No exemplo abaixo, são consultadas as variáveis da conexão entre o <em>computador.local</em> e o <em>servidor1</em>. O <em>servidor1</em> calcula a dispersão (<em>dispersion</em>) como sendo de 2,988ms e informa ao <em>computador.local</em>, que é o cliente. A <strong>dispersão para a raiz</strong> (<em>rootdispersion</em>) de 0,381ms é o valor estimado pelo <em>servidor1</em> da dispersão acumulada até a referência primaria de tempo, no caso o sinal IRIG de um relógio atômico.</p>
<pre>
      <span class="verde-escuro">usuario@computador.local:~$ <b>ntpq</b></span>

      <span class="vermelho">ntpq> <b>rv &amp;1</b></span>
      assID=39324 status=9614 reach, conf, sel_sys.peer, 1 event, event_reach,
      <b>srcadr=servidor1</b>, srcport=123, <b>dstadr=computador.local</b>, dstport=123,
      leap=00, stratum=1, precision=-19, rootdelay=0.000,
      <span class="vermelho"><b>rootdispersion=0.381</b></span>, refid=IRIG, reach=377, unreach=0, hmode=3,
      pmode=4, hpoll=6, ppoll=6, flash=00 ok, keyid=0, ttl=0, offset=-5.484,
      delay=0.450, <span class="vermelho"><b>dispersion=2.988</b></span>, jitter=0.162,
      reftime=cac0db20.22c94d0a Wed, Oct 17 2007 18:04:00.135,
      org=cac0db2a.e7dce26e Wed, Oct 17 2007 18:04:10.905,
      rec=cac0db2a.e946172a Wed, Oct 17 2007 18:04:10.911,
      xmt=cac0db2a.e9233c69 Wed, Oct 17 2007 18:04:10.910,
      filtdelay= 0.46 0.48 0.49 0.47 0.45 0.47 0.48 0.48,
      filtoffset= -5.28 -5.29 -5.33 -5.39 -5.48 -5.56 -5.62 -5.71,
      filtdisp= 0.00 0.98 1.92 2.87 3.86 4.80 5.76 6.75 
</pre>
<p class="tabulacao">
No exemplo abaixo, onde são consultadas as variáveis locais do NTP, a dispersão para a raiz (<em>rootdispersion</em>) é calculada como sendo de 18,547ms.</p>
<pre>
      <span class="verde-escuro">ntpq> <b>rl</b></span>
      assID=0 status=0644 leap_none, sync_ntp, 4 events, event_peer/strat_chg,
      version="ntpd 4.2.2p4@1.1585-o Wed Mar 7 20:43:30 UTC 2007 (1)",
      processor="i686", system="Linux/2.6.20-16-generic", leap=00, stratum=2,
      precision=-20, rootdelay=0.434, <span class="vermelho"><b>rootdispersion=18.547</b></span>, peer=47414,
      refid=servidor1,
      reftime=cac0eba0.695f54c0 Wed, Oct 17 2007 19:14:24.411, poll=7,
      clock=cac0ee6b.171df1b1 Wed, Oct 17 2007 19:26:19.090, state=4,
      offset=-3.372, frequency=41.693, jitter=0.791, noise=0.754,
      stability=0.021, tai=0
</pre>
<p /> <ul>
<li> <strong>Variação</strong>: (<em>Jitter</em>) É o desvio ou erro nas leituras de relógio. Pode ser causado por flutuações de curta duração na freqüência do oscilador, por erros de medida ocasionados por excesso de utilização do processador, latência causada por interrupções, latência na rede, etc.
</li></ul> 
<p class="tabulacao">
No contexto do NTP a variação (<em>jitter</em>) é estimada pelo cliente, à partir das diversas medidas de deslocamento (<em>offset</em>) para um determinado servidor.</p>
<pre>
      <span class="verde-escuro">usuario@computador.local:~$ <b>ntpq -c pe</b></span>
      remote     refid  st t when poll reach delay  offset <span class="vermelho">jitter</span>
      ============================================================
      *servidor1 .IRIG. 1  u 93   128  377   0.523  0.020  <span class="vermelho">0.033</span>
      +servidor2 .GPS.  1  u 57   128  377   0.488 -0.054  <span class="vermelho">0.025</span>
      -servidor3 .IRIG. 1  u 50   128  377   5.151 -0.386  <span class="vermelho">0.382</span>
      +servidor4 .IRIG. 1  u 74   128  377   5.163 -0.360  <span class="vermelho">0.55</span>
</pre>
<p class="tabulacao">
O NTP também calcula uma variação (<em>jitter</em>) para o sistema como um todo, com base na variação dos servidores utilizados:</p>
<pre>
      <span class="verde-escuro">usuario@computador.local:~$ <b>ntpq -c rl</b></span>
      assID=0 status=0644 leap_none, sync_ntp, 4 events, event_peer/strat_chg,
      version="ntpd 4.2.2p4@1.1585-o Wed Mar 7 20:43:30 UTC 2007 (1)",
      processor="i686", system="Linux/2.6.20-16-generic", leap=00, stratum=2,
      precision=-20, rootdelay=0.434, rootdispersion=18.547, peer=47414,
      refid=servidor1,
      reftime=cac0eba0.695f54c0 Wed, Oct 17 2007 19:14:24.411, poll=7,
      clock=cac0ee6b.171df1b1 Wed, Oct 17 2007 19:26:19.090, state=4,
      offset=-3.372, frequency=41.693, <span class="vermelho">jitter=0.791</span>, noise=0.754,
      stability=0.021, tai=0
</pre>
<p /> <ul>
<li> <strong>Deslocamento</strong>: (<em>Offset</em> ou <em>time offset</em>) É a diferença de tempo entre dois relógios.
</li></ul> 
<p class="tabulacao">
      No contexto do NTP, o deslocamento (<em>offset</em>) é medido em relação ao relógio local em milisegundos. O valor do deslocamento para o servidor escolhido como referência (servidor indicado pelo asterisco) representa o quanto o relógio local deve ser alterado para estar com o valor igual ao da referência de tempo (estrato 0).
<br /> <br /> 
      No exemplo abaixo o relógio local deve ser adiantado 20µs.</p>
<pre>
      <span class="verde-escuro">usuario@servidor:~$ <b>ntpq -c pe</b></span>
      remote   refid  st t when poll reach delay  <b>offset</b> jitter
      ==========================================================
      *server1 .IRIG. 1  u 93   128  377   0.523  <span class="vermelho"><b>0.020</b></span>  0.033
      +server2 .GPS.  1  u 57   128  377   0.488 <b>-0.054</b>  0.025
      -server3 .IRIG. 1  u 50   128  377   5.151 <b>-0.386</b>  0.382
      +server4 .IRIG. 1  u 74   128  377   5.163 <b>-0.360</b>  0.559
</pre>
<p /> <ul>
<li> <strong>Envelhecimento</strong>: (<em>Aging</em> ou <em>Ageing</em>) É a instabilidade na freqüência do oscilador causada por fatores internos. Ou seja, quanto a freqüência do relógio varia com o tempo quando os fatores externos como radiação, pressão, temperatura e umidade são mantidos constantes.
</li></ul> 
<p class="tabulacao">
O envelhecimento (<em>ageing</em>) de um relógio atômico de rubídio é da ordem de 5x10<sup>-11</sup>/ano, enquanto os relógios atômicos de césio modernos não apresentam envelhecimento.</p>
<p /> <ul>
<li> <strong>Escorregamento</strong>: (<em>Drift</em>) É a instabilidade na freqüência do oscilador. Ou seja, quanto a freqüência do relógio varia com o tempo. Essa instabilidade pode ser causada por fatores externos, como variações na radiação, pressão, temperatura ou umidade e pelo envelhecimento (<em>ageing</em>).
</li></ul> 
<p /> <ul>
<li> <strong>Estabilidade</strong>: (<em>Stability</em> ou <em>Frequency Stability</em> ou <em>Wander</em>) É a estimativa estatística da instabilidade na freqüência do oscilador num determinado período de tempo.
</li></ul> 
<p class="tabulacao">
      Algumas referências afirmam que estabilidade (<em>stability</em>) é sinônimo de escorrregamento (<em>drift</em>). E mesmo que escorregamento (<em>drift</em>) e envelhecimento (<em>ageing</em>) são sinônimos.
<br /> <br /> 
      Outras consideram que há diferenças entre a instabilidade originada de erros sistemáticos, causados por fatores internos ou de ambiente, e a que é originada por erros estocásticos ou aleatórios, causados principalmente pela forma de medição.
<br /> <br /> 
      A estabilidade pode ser de curto prazo, que envolve períodos de menos de 100s. Ou de longo prazo, com estimativas para períodos maiores do que 100s.
<br /> <br /> 
      O NTP calcula a estabilidade com base na diferença ou deslocamento da freqüência das amostras de tempo obtidas de cada servidor. Ela é medida em PPM (Partes por milhão). 1 PPM = 1x10<sup>-6</sup>.
<br /> <br /> 
      No exemplo abaixo a estabilidade é de 0,021PPM, o que equivale a um desvio de cerca de 1,8ms por dia (0,021 x 10<sup>-6</sup> x 1000ms/s x 60s/min x 60min/h x 24h/dia = 1,8ms/dia).</p>
<pre>
      <span class="verde-escuro">usuario@computador.local:~$ <b>ntpq</b>

      ntpq> <b>rl</b></span>
      assID=0 status=0644 leap_none, sync_ntp, 4 events, event_peer/strat_chg,
      version="ntpd 4.2.2p4@1.1585-o Wed Mar 7 20:43:30 UTC 2007 (1)",
      processor="i686", system="Linux/2.6.20-16-generic", leap=00, stratum=2,
      precision=-20, rootdelay=0.434, rootdispersion=18.547, peer=47414,
      refid=servidor1,
      reftime=cac0eba0.695f54c0 Wed, Oct 17 2007 19:14:24.411, poll=7,
      clock=cac0ee6b.171df1b1 Wed, Oct 17 2007 19:26:19.090, state=4,
      offset=-3.372, frequency=41.693, jitter=0.791, noise=0.754,
      <span class="vermelho"><b>stability=0.021</b></span>, tai=0
</pre>
<p /> <ul>
<li> <strong>Monotonicidade</strong>: (<em>Monotonicity</em>) Cada leitura sucessiva do relógio deve apresentar um tempo mais no futuro do que a leitura anterior. Ou seja, o tempo sempre avança. Isso é natural para relógios implementados em hardware, mas implementações em software tornam possível ajustar o tempo para um valor no passado, o que pode causar problemas em várias aplicações e protocolos. Em alguns casos, garantir a monotonicidade é mais importante do que garantir a exatidão.
</li></ul> 
<p /> <ul>
<li> <strong>Sincronização</strong>: (<em>Synchronization</em>) É o processo de ajustar a fase de dois osciladores, relógios, ou fluxos de dados de forma que a diferença entre eles seja nula. A palavra pode ser usada também para indicar a propriedade de haver ou não diferenças de deslocamento entre dois relógios. Ao sincronizar dois relógios não se garante que a diferença entre eles permanecerá nula ao longo do tempo.
</li></ul> 
<p /> <ul>
<li> <strong>Sintonização</strong> (<em>Syntonization</em>): É o processo de ajustar dois osciladores para que forneçam a mesma freqüência. Esse processo não garante que a fase seja a mesma.
</li></ul> 
<p class="tabulacao">
     Ao sintonizar os osciladores de dois relógios, se as freqüências permanecerem constantes dali em diante, as diferenças de deslocamento também permanecerão.</p>
<div class="voltar"><a href="/NTP/MenuNTPTempo#VolTar" class="twikiCurrentTopicLink twikiAnchorLink">Voltar</a></div>
<hr />
		</div><!--.conteudo-->
</div>
	</div><!--.container-->
	<noscript><p>Script para limpar os campos de formulario</p></noscript>
</body>
</html>