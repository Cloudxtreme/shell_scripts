<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../docs/." title="NetBSD Documentation">
<link rel="previous" href="../../docs/mirror.html" title="NetBSD Mirror FAQ">
<link rel="next" href="../../docs/misc/smbprint/." title="NetBSD Documentation: Printing to a remote SMB printer from NetBSD">
<link rel="first" href="../../docs/Hardware/." title="Hardware Documentation">
<link rel="last" href="../../docs/x/." title="NetBSD Documentation: The X Window System">
<link rel="stylesheet" href="../../global.css" type="text/css">

<title>NetBSD Documentation: Other FAQs and HOWTOs</title>
</head>
<body class="website"><div class="webpage">
<a name="docs-misc-index"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">Skip to main content.</a></div>
<div id="centralHeader">
<div id="logo">
<a href="../../"><img alt="[NetBSD Logo]" src="../../images/NetBSD-smaller.png"></a><div id="name"><a href="../../">
	  The NetBSD Project
	</a></div>
<div id="slogan"><a href="../../">
	  &#8220;Of course it runs NetBSD&#8221;
	</a></div>
</div>
<div id="headerTools">
<div id="header-cse-search-form">Google custom search</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script><script type="text/javascript"> 
		  google.load('search', '1', {language : 'en'});
		  google.setOnLoadCallback(function() {
		    var header_customSearchControl = new google.search.CustomSearchControl('006277936787196004968:mbdhrauy1wm');
		    header_customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
		    var header_options = new google.search.DrawOptions();
		    header_options.enableSearchboxOnly("http://google.com/cse?cx=006277936787196004968:mbdhrauy1wm");    
		    header_customSearchControl.draw('header-cse-search-form', header_options);
		  }, true);
		</script>
</div>
</div>
<div id="navBar" role="navigation">
<span class="doNotDisplay">
	  Navigation:
	</span><ul>
<li><a href="../../">
	  Home</a></li>
<li>
<a href="../../">
	  News &amp; Media</a><ul>
<li><a href="../../changes/">
	    Recent changes</a></li>
<li><a href="http://blog.NetBSD.org/">
	    NetBSD blog</a></li>
<li><a href="../../gallery/events.html">
	    Events</a></li>
<li><a href="../../changes/rss.html">
	    Feeds</a></li>
</ul>
</li>
<li>
<a href="../../about/">
	  About</a><ul>
<li><a href="../../about/">
	    NetBSD</a></li>
<li><a href="../../foundation/">
	    The NetBSD Foundation</a></li>
<li><a href="../../gallery/">
	    Advocacy</a></li>
</ul>
</li>
<li>
<a href="../../docs/">
	  Documentation</a><ul>
<li><a href="../../docs/misc/index.html">
	    FAQ &amp; HOWTOs</a></li>
<li><a href="../../docs/guide/en/">
	    The Guide</a></li>
<li><a href="http://man.NetBSD.org/">
	    Manual pages</a></li>
<li><a href="http://wiki.NetBSD.org/">
	    Wiki</a></li>
</ul>
</li>
<li>
<a href="../../support/">
	  Support</a><ul>
<li><a href="../../support/send-pr.html">
	    Problem report guide</a></li>
<li><a href="../../cgi-bin/sendpr.cgi?gndb=netbsd">
	    Report a bug</a></li>
<li><a href="../../support/query-pr.html">
	    Query bug database</a></li>
<li><a href="../../support/security/">
	    Security</a></li>
</ul>
</li>
<li>
<a href="../../community/">
	  Community</a><ul>
<li><a href="http://onetbsd.org/">
	    Blogs</a></li>
<li><a href="../../mailinglists/">
	    Mailing lists</a></li>
<li><a href="http://mail-index.NetBSD.org/">
	    List archives</a></li>
</ul>
</li>
<li>
<a href="../../developers/">
	  Developers</a><ul>
<li><a href="http://cvsweb.NetBSD.org/">
	    Browse source</a></li>
<li><a href="http://nxr.NetBSD.org/">
	    Cross-reference</a></li>
<li><a href="http://releng.NetBSD.org/">
	    Release engineering</a></li>
<li><a href="http://wiki.NetBSD.org/projects/">
	    Projects list</a></li>
</ul>
</li>
<li>
<a href="../../ports/">
	  Ports</a><ul>
<li><a href="../../ports/history.html">
	    History</a></li>
<li><a href="../../ports/emulators.html">
	    Emulators</a></li>
</ul>
</li>
<li>
<a href="http://www.pkgsrc.org/">
	  Packages</a><ul>
<li><a href="http://www.pkgsrc.se/">
	    Browse packages</a></li>
<li><a href="http://releng.NetBSD.org/index-pkgsrc.html">
	    Release engineering</a></li>
</ul>
</li>
</ul>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD Documentation: Other FAQs and HOWTOs</h1>
<div class="sect1">
<div class="titlepage"></div>
</div>
<h3 class="title"><a name="general">General questions about NetBSD</a></h3>
<ul>
<li><a href="#release-changes">What changed between NetBSD releases?</a></li>
<li><a href="#64-bit">Is NetBSD a 64 bit operating system?</a></li>
<li><a href="#exportability">Is NetBSD exportable from the US?</a></li>
<li><a href="#netbsd-uses">For what is NetBSD used?</a></li>
</ul>
<h3 class="title"><a name="user-configuration">User configuration</a></h3>
<ul>
<li><a href="#adding-a-user">Adding a user</a></li>
<li><a href="#gecos-field">Changing the information displayed via finger?</a></li>
<li><a href="#problems-with-root">Problems logging in as, or 'su'ing to, root</a></li>
<li><a href="#adding-to-path"> Adding something to your path</a></li>
<li><a href="#setting-something-for-all-users">Setting something for all users</a></li>
<li><a href="#shells">Cursor key editing or filename completion in a shell</a></li>
<li><a href="#languages">Specifying a language for messages</a></li>
</ul>
<h3 class="title"><a name="printing-scanning">Printing and Scanning</a></h3>
<ul>
<li><a href="#postscript-manpages">Printing man pages as PostScript</a></li>
<li><a href="#smbprint">Printing to a remote SMB printer from NetBSD</a></li>
<li><a href="#jetdirect">Configuring a HP JetDirect Card via DHCP</a></li>
<li><a href="#burstpage">Why doesn't sh suppress the "burst" page on an HP JetDirect?</a></li>
<li><a href="#scanning">Scanning under NetBSD</a></li>
</ul>
<h3 class="title"><a name="disks-filesystems">Disks &amp; Filesystems</a></h3>
<ul>
<li><a href="#adding-a-disk">Adding a disk to an existing system</a></li>
<li><a href="#moving-usr">Moving /usr from root to a different partition</a></li>
<li><a href="#read-only-to-read-write">How to mount a 'read-only' filesystem read/write?</a></li>
<li><a href="#using-fsck">When is it safe to use fsck?</a></li>
<li><a href="#kernfs">For what is /kern used?</a></li>
<li><a href="#procfs">For what is /proc used?</a></li>
<li><a href="#cgd-swap">Encrypted swap with cgd(4)</a></li>
</ul>
<h3 class="title"><a name="boot-related">Boot-Related Questions</a></h3>
<ul>
<li><a href="#why-single-user">What is single-user mode? Why and how should you use it?</a></li>
<li><a href="#single-user-to-multi-user">How to switch from single-user to multi-user</a></li>
<li><a href="#boot-messages">How to read the boot messages?</a></li>
<li><a href="#shutting-down">How to shutdown the machine?</a></li>
<li><a href="#rebooting">How to reboot the machine?</a></li>
<li><a href="#cron-reboot">Starting a program at boot time</a></li>
</ul>
<h3 class="title"><a name="memory-swap">Memory/Swap Configuration</a></h3>
<ul>
<li><a href="#swap">How much swap space</a></li>
<li><a href="#adding-swap">Adding more swap to a running system</a></li>
<li><a href="#tuning-vm">Tuning Virtual Memory to improve performance on low-memory systems</a></li>
</ul>
<h3 class="title"><a name="common-problems">Common (and less common) problems</a></h3>
<ul>
<li><a href="#nroff-missing">/usr/bin/nroff: not found when running 'man'</a></li>
<li><a href="#var-mail-permissions">'Unable to lock mailbox: Permission denied' when reading mail</a></li>
<li><a href="#kernel-not-netbsd">netstat: kvm_read kvm_read: Bad address when running 'netstat -r'</a></li>
<li><a href="#libkvm-mismatch">When I try 'netstat -r' I get an endless stream of question marks.  What's wrong?</a></li>
<li><a href="#kernel-upgrade">w, ps, and netstat do not work after upgrading to a new kernel</a></li>
<li><a href="#proc-size-mismatch">After changing kernels, 'ps' reports "proc size mismatch"</a></li>
<li><a href="#hash-map-alias0">'hash map "Alias0":unsafe map file
    /etc/aliases: No such file or directory' is displayed</a></li>
<li><a href="#portmap-messup">How do I prevent portmap messages from showing up in shells, when logged in as root</a></li>
<li><a href="#locales">How do I get umlauts and other localised characters displayed?</a></li>
</ul>
<h3 class="title"><a name="other-questions">Other Questions</a></h3>
<ul>
<li><a href="#bluetooth">How does Bluetooth support in NetBSD work?</a></li>
<li><a href="#editing-files">Editing files under NetBSD</a></li>
<li><a href="#rebuilding-dev">Rebuilding /dev</a></li>
<li><a href="#connecting-a-ups">Connecting a UPS to a NetBSD system</a></li>
<li><a href="#changing-motd">After changing /etc/motd something reset it to its original contents</a></li>
<li><a href="#selling-hardware">Where to sell NetBSD related hardware?</a></li>
<li><a href="#setup-ccd">Setting up a striped (ccd) drive</a></li>
<li><a href="#edit-fonts">Utility for editing or creating console bitmap fonts?</a></li>
</ul>
<hr>
<h3 class="title">General questions about NetBSD</h3>
<h4 class="title">
<a name="release-changes"></a>What changed between NetBSD releases? (<a href="#general">top</a>)
  </h4>
<p>
A relatively up-to-date list of all changes (including those in
NetBSD-current) is <a class="ulink" href="../../changes/" target="_top">available</a>.
</p>
<p>There is also a <code class="code">CHANGES</code> file
in the top level directory of each release, and maintained online for
<a class="ulink" href="http://cvsweb.NetBSD.org/bsdweb.cgi/~checkout~/src/doc/CHANGES.prev?content-type=text/plain" target="_top">previous</a>
and the
<a class="ulink" href="http://cvsweb.NetBSD.org/bsdweb.cgi/~checkout~/src/doc/CHANGES?content-type=text/plain" target="_top">next</a>
release.

</p>

<h4 class="title">
<a name="64-bit"></a>Is NetBSD a 64 bit operating system? (<a href="#general">top</a>)
  </h4>
<p>

NetBSD runs on both 32 bit and 64 bit CPUs. On the <a class="ulink" href="../../ports/alpha/" target="_top">alpha</a> CPU the kernel and userland run in
a mode known as LP64, where <span class="bold"><strong>int</strong></span>s are 32 bit, and <span class="bold"><strong>long</strong></span>s
and pointers (and the address space) are 64 bit.  The
<a class="ulink" href="../../ports/amd64/" target="_top">amd64</a> and
<a class="ulink" href="../../ports/sparc64/" target="_top">sparc64</a>
ports run in both 32-bit and
64-bit configurations. A 64 bit kernel (LP64) supports 32-bit
applications in 64-bit mode. A 32 bit kernel, which uses 32 bits for
all of integers, pointers and long integers (IPL32) can not run 64 bit
programs.
</p>
<p>

On other 64 bit capable CPUs, such as R4000 and newer MIPS (used by <a class="ulink" href="../../ports/#in-tree-ports" target="_top">a number of ports</a>) NetBSD runs
in 32 bit mode though is in the process of being modified to 64 bit.
</p>
<p>

All NetBSD ports support 64 bit arithmetic, both in the kernel and in
userland programs. In the kernel this is used for various counters and
for FFS, which is the 64 bit 'Fast File System'.
</p>

<h4 class="title">
<a name="exportability"></a>Is NetBSD exportable from the US? (<a href="#general">top</a>)
  </h4>
<p>
Up to (and including) NetBSD 1.4.x, everything except the security
distribution (i.e. secr.tgz) was exportable from the US.
The secr.tgz distribution file contained the libraries for crypt.
Starting with NetBSD 1.5, crypto code is included in the NetBSD base
distribution.
<a class="ulink" href="../../about/crypto-export.html" target="_top"> Please refer to
the NetBSD document on exporting restricted code or binaries</a>.
</p>

<h4 class="title">
<a name="netbsd-uses"></a>For what is NetBSD used? (<a href="#general">top</a>)
  </h4>
<p>
In the words of Chris G. Demetriou (cgd@NetBSD.org):
</p>
<div class="blockquote"><blockquote class="blockquote"><span class="quote">&#8220;<span class="quote">
NetBSD, in general, is meant as a "stable research platform" -- that is,
a system that can be used for commercial, home, and research work...  what
_you_ do with it is up to you.  In general, those of us working on NetBSD
are trying to improve the system in whatever way we can -- support for more
hardware, stability, performance, documentation...
</span>&#8221;</span></blockquote></div>
<p>

See our <a class="ulink" href="../../about/features.html" target="_top">features page</a> for an idea
of what opportunities NetBSD provides you with!
</p>
<hr>
<h3 class="title">User configuration</h3>
<h4 class="title">
<a name="adding-a-user"></a>Adding a user (<a href="#user-configuration">top</a>)
  </h4>
<p>
You can use the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?useradd+8+NetBSD-6.0+i386">useradd(8)</a> command to add users.  Editing
<code class="code">/etc/passwd</code> will not work. If you want to edit the password
database, use <a href="http://netbsd.gw.com/cgi-bin/man-cgi?vipw+8+NetBSD-6.0+i386">vipw(8)</a>. See <a href="http://netbsd.gw.com/cgi-bin/man-cgi?pwd_mkdb+8+NetBSD-6.0+i386">pwd_mkdb(8)</a> for more information.
</p>

<h4 class="title">
<a name="gecos-field"></a>Changing the information displayed via <code class="code">finger</code>? (<a href="#user-configuration">top</a>)
  </h4>
<p>
Use the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?chfn+1+NetBSD-6.0+i386">chfn(1)</a> and <a href="http://netbsd.gw.com/cgi-bin/man-cgi?chsh+1+NetBSD-6.0+i386">chsh(1)</a> commands, or use
vipw(8) to edit <code class="code">/etc/master.passwd</code>
</p>

<h4 class="title">
<a name="problems-with-root"></a>Problems logging in as, or 'su'ing to, root (<a href="#user-configuration">top</a>)
  </h4>
<p>
This covers a number of possible problems:
</p>
<p>
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<span class="bold"><strong>Unable to login directly as root</strong></span><br>
	NetBSD will only allow direct root login on terminals marked as
	'secure' in <code class="code">/etc/ttys</code> (see <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ttys+5+NetBSD-6.0+i386">ttys(5)</a>). To be able to login directly
	as root across the network (<span class="bold"><strong>not</strong></span> recommended) you will need to
	add '<code class="code">secure</code>' to the end of every network terminal line. For
	those who prefer not to have to edit each line you can (as root)
	type:
	<pre class="programlisting">
		cd /etc
		cp ttys ttys.orig
		cat ttys.orig | sed 's/network$/network secure/' &gt; ttys</pre>
    </li>
<li class="listitem">
<span class="bold"><strong>Unable to 'su' to root</strong></span><br>
	NetBSD checks the contents of the 'wheel' group in <code class="code">/etc/group</code>
	for any attempt to <a href="http://netbsd.gw.com/cgi-bin/man-cgi?su+1+NetBSD-6.0+i386">su(1)</a> to root. If it is empty (wheel:*:0:) then
	anyone with the correct password can su to root. Otherwise it should be
	a comma separated (no spaces!) list of the permitted
        accounts.</li>
<li class="listitem">
<span class="bold"><strong>Unable to 'su' to anyone</strong></span>
        <p>Type "<span class="bold"><strong><code class="code">ls -l /usr/bin/su</code></strong></span>". The first 'word' on the
	output should be '-r-sr-xr-x'. If it is anything else (such as
	'-r-xr-xr-x'). Type (as root) "<span class="bold"><strong><code class="code">chmod 4555 /usr/bin/su</code></strong></span>".
	The 's' in that position
	indicates it is a 'setuid' binary, which in this case allows 'su' to
	run with root privileges.
	</p>
	<p>
	This problem can be caused by not giving the '-p' (preserve
	permissions) flag to tar when extracting the distribution. If this was
	the case then re-extract all the tarfiles (except etc.tar.gz) as
	various other utilities will also be broken.
        </p>
    </li>
</ul></div>
<p>
</p>

<h4 class="title">
<a name="adding-to-path"></a> Adding something to your path (<a href="#user-configuration">top</a>)
  </h4>
<p>
For example, to add /usr/X11R6/bin to your path, edit the file <span class="emphasis"><em>.login</em></span>
in your home directory and add the following:
</p>
<pre class="programlisting">set path = ( /usr/X11R6/bin $path )</pre>
<p>
</p>
<p>
This only works for the C-shell <a href="http://netbsd.gw.com/cgi-bin/man-cgi?csh+1+NetBSD-6.0+i386">csh(1)</a>, and derivatives such as
<span class="emphasis"><em><a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/tcsh/README.html" target="_top"><code class="filename">shells/tcsh</code></a>.</em></span>
For <a href="http://netbsd.gw.com/cgi-bin/man-cgi?sh+1+NetBSD-6.0+i386">sh(1)</a> and derivatives (like <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/bash2/README.html" target="_top"><code class="filename">shells/bash2</code></a>), the correct syntax is:
</p>
<pre class="programlisting">
PATH=/usr/X11R6/bin:$PATH
export PATH</pre>
<p>
</p>

<h4 class="title">
<a name="setting-something-for-all-users"></a>Setting something for all users (<a href="#user-configuration">top</a>)
  </h4>
<p>
You can set something for all users running <a href="http://netbsd.gw.com/cgi-bin/man-cgi?csh+1+NetBSD-6.0+i386">csh(1)</a> or <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/tcsh/README.html" target="_top"><code class="filename">shells/tcsh</code></a>
by adding it to one of the following files:
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<span class="bold"><strong><code class="code">/etc/csh.cshrc</code></strong></span><br>
    This is run every time a new shell is opened, before any
    <span class="bold"><strong><code class="code">.cshrc</code></strong></span> in the user's home directory.</li>
<li class="listitem">
<span class="bold"><strong><code class="code">/etc/csh.login</code></strong></span><br>
    This is run when the user logs in, after anything in
    <span class="bold"><strong><code class="code">/etc/csh.cshrc</code></strong></span>, but before any <span class="bold"><strong><code class="code">.login</code></strong></span>
    in the user's home directory.</li>
<li class="listitem">
<span class="bold"><strong><code class="code">/etc/csh.logout</code></strong></span><br>
    This is run when the user logs out, before any <span class="bold"><strong><code class="code">.logout</code></strong></span> in
    the user's home directory.</li>
</ul></div>
<p>
</p>

<h4 class="title">
<a name="shells"></a>Cursor key editing or filename completion in a shell (<a href="#user-configuration">top</a>)
  </h4>
<p>
This depends on the type of shell you are using:
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?sh+1+NetBSD-6.0+i386">sh(1)</a> (Bourne shell)<br>
	This shell is used in single-user mode and is the standard
	user shell since NetBSD 4.0. Command line editing can be
	enabled with the command '<code class="code">set -E</code>' or '<code class="code">set
	-o emacs</code>'. Filename completion by TAB can be enabled by
	'<code class="code">set -o tabcomplete</code>'. The default configuration
	has both features enabled (in <code class="filename">/etc/shrc</code>, read from
	<code class="filename">~/.shrc</code>).
	This can be added to the <code class="code">/.profile</code> file so you
	always have command line editing in single-user mode.
</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?csh+1+NetBSD-6.0+i386">csh(1)</a> ('C' shell)<br>
	This was the standard user shell until NetBSD 4.0, it supports
	filename completion ('<span class="bold"><strong>set
	filec</strong></span>' and use the ESCAPE key) but does not support
	command line editing.</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?ksh+1+NetBSD-6.0+i386">ksh(1)</a> (Korn Shell)<br>
	This is a public domain version of the Korn Shell, aka pdksh.
	It supports command line editing in both Emacs or Vi mode
	('set -o {emacs,vi}'). In Emacs mode, filename and command
	completion by TAB is enabled by default. Use 'set -o
	vi-tabcomplete' or 'set -o vi-esccomplete' to get Vi mode with
	completion by TAB or ESC, respectively.<br>
	The public domain korn shell is part of the NetBSD base system, but is
	also available from the <a class="ulink" href="../software/packages.html" target="_top">NetBSD packages
	collection</a>, under <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/pdksh/README.html" target="_top"><code class="filename">shells/pdksh</code></a> for other operating
	systems.  The KSH-93 is also available in
	<a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/ast-ksh/README.html" target="_top"><code class="filename">shells/ast-ksh</code></a>.</li>
<li class="listitem">
<span class="bold"><strong>bash (GNU Bourne Again Shell)</strong></span><br>
	'bash' is another extended shell with command line editing,
	this time based on 'sh'.  You can install it from the <a class="ulink" href="../software/packages.html" target="_top">NetBSD packages
	collection</a>, under <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/bash2/README.html" target="_top"><code class="filename">shells/bash2</code></a>.</li>
<li class="listitem">
<span class="bold"><strong>tcsh (an extended 'C' shell)</strong></span><br>
	'tcsh' is a near perfect superset of csh, with many useful
	extra features, including filename completion (use TAB) and command
	line editing. You can install it from the <a class="ulink" href="../software/packages.html" target="_top">NetBSD packages
	collection</a>, under <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/tcsh/README.html" target="_top"><code class="filename">shells/tcsh</code></a>.</li>
<li class="listitem">
<span class="bold"><strong>Other shells</strong></span><br>
	The <a class="ulink" href="../software/packages.html" target="_top">NetBSD packages
	collection</a> also contains various other command line shells
	under the <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/README.html" target="_top"><code class="filename">shells</code></a> category.</li>
</ul></div>
<p>
</p>

<h4 class="title">
<a name="languages"></a>Specifying a language for messages (<a href="#user-configuration">top</a>)
  </h4>
<p>
NetBSD uses the '<code class="code">LANG</code>' environment variable determine which
language to use for error messages and suchlike. This can be set in csh
or tcsh with the command '<code class="code">setenv LANG <span class="bold"><strong>XX</strong></span></code>' where XX is
the two letter country code. For a list of supported codes type '<code class="code">ls
/usr/share/nls</code>'.
</p>
<p>
<span class="bold"><strong>Please note</strong></span>: Only certain messages have been translated. To
test, set the <code class="code">LANG</code> variable and type
</p>
<pre class="programlisting">
  cd /a_directory_that_does_not_exist</pre>
<p>
</p>
<hr>
<h3 class="title">Printing and Scanning</h3>
<h4 class="title">
<a name="postscript-manpages"></a>Printing man pages as PostScript (<a href="#printing-scanning">top</a>)
  </h4>
<p>
    Man pages are held in <a href="http://netbsd.gw.com/cgi-bin/man-cgi?nroff+1+NetBSD-6.0+i386">nroff(1)</a> source in
    /usr/share/man/man<span class="emphasis"><em>X</em></span>/<span class="emphasis"><em>manpage</em></span>.<span class="emphasis"><em>X</em></span>, where
    <span class="emphasis"><em>X</em></span> is the section number (eg: 1 in the case of nroff).
    To convert them into PostScript one can use:
    </p>
<pre class="programlisting">groff -Tps -mandoc /usr/share/man/man<span class="emphasis"><em>X</em></span>/<span class="emphasis"><em>manpage</em></span>.<span class="emphasis"><em>X</em></span></pre>
<p>
    For example to convert the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ls+1+NetBSD-6.0+i386">ls(1)</a> man page into PostScript and send it
    directly to the default printer via <a href="http://netbsd.gw.com/cgi-bin/man-cgi?lpr+1+NetBSD-6.0+i386">lpr(1)</a> you can use.
    </p>
<pre class="programlisting">groff -Tps -mandoc /usr/share/man/man1/ls.1 |lpr</pre>
<p>
    If you wish to print on a different type of printer you may want to
    use the <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/print/ghostscript/README.html" target="_top"><code class="filename">print/ghostscript</code></a> package
    from pkgsrc.
</p>

  <h4 class="title">
<a name="smbprint"></a>Printing to a remote SMB printer from NetBSD (<a href="#printing-scanning">top</a>)
  </h4>
<p>
Please see <a class="ulink" href="smbprint/" target="_top">this page</a> for details.
</p>

<h4 class="title">
<a name="jetdirect"></a>Configuring a HP JetDirect Card via DHCP (<a href="#printing-scanning">top</a>)
  </h4>
<p>
If you have a JetDirect print server such as the JetDirect EX Plus, you can use
dhcpd(8) under NetBSD to configure the print server.  The steps are:

Create an entry in <code class="code">/etc/dhcpd.conf</code> for the JetDirect server:
</p>
<pre class="programlisting">
options jd-tftp-cfg		code 144 = string;
options jd-tftp-server		code 150 = string;

allow				bootp;

# [...]

host hp690c {
	fixed-address		hp690c;			# set to the DNS name or address of the JetDirect
	hardware ethernet	00:60:b0:00:11:22;	# set to the MAC address of the JetDirect
	option	log-servers	servername;		# set to the DNS name or address of log server
	option	jd-tftp-server	servername;		# set to the DNS name or address of tftp server
	option	jd-tftp-cfg	"hpnp/hp690c.cfg";	# name of the JetDirect config file
}</pre>
<p>
See <a href="http://netbsd.gw.com/cgi-bin/man-cgi?dhcpd.conf+5+NetBSD-6.0+i386">dhcpd.conf(5)</a> for more information on this file.
</p>
<p>
Make sure that <code class="code">tftpd</code> is enabled in <code class="code">/etc/inetd.conf</code>,
Note the argument to "-s" on the <code class="code">tftp</code> line of <code class="code">/etc/inetd.conf</code>.  This is
the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?tftpd+8+NetBSD-6.0+i386">tftpd(8)</a> root directory.  For the rest of this example it is assumed that
the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?tftpd+8+NetBSD-6.0+i386">tftpd(8)</a> root directory is set to <code class="code">/tftpboot</code>.
</p>
<p>
Make sure that <code class="code">dhcpd</code> is enabled in <code class="code">/etc/rc.conf</code>.
</p>
<p>

Next create a Network Printer Interface (NPI) configuration file.
In this example, the file
is <code class="code">/tftpboot/hpnp/hp690c.cfg</code>.  This file should look something like:
</p>
<pre class="programlisting">
name: printer name
location: Location of the Printer
contact: Contact Person
idle-timeout: 1800
banner: 0</pre>
<p>

If you made changed to <code class="code">/etc/inetd.conf</code>, make sure <a href="http://netbsd.gw.com/cgi-bin/man-cgi?inetd+8+NetBSD-6.0+i386">inetd(8)</a>
re-reads <a href="http://netbsd.gw.com/cgi-bin/man-cgi?inetd.conf+5+NetBSD-6.0+i386">inetd.conf(5)</a> by doing
<code class="code">kill -HUP `cat /var/run/inetd.pid`</code>.
When you reboot the JetDirect print server (or printer with HP JetDirect
card), the server should get configured by DHCP.
On some printers, you may have to explicitly enable BOOTP/DHCP configuration
from the front panel.
</p>

<h4 class="title">
<a name="burstpage"></a>Why doesn't <span class="emphasis"><em>sh</em></span> suppress the "burst" page on an HP JetDirect? (<a href="#printing-scanning">top</a>)
  </h4>
<p>
The "burst" page is a function of the host with the locally attached printer,
or in this case, the dedicated hardware emulating <a href="http://netbsd.gw.com/cgi-bin/man-cgi?lpd+8+NetBSD-6.0+i386">lpd(8)</a>. When NetBSD is used
as a remote spooler, with <span class="emphasis"><em>rm</em></span>, it never adds an additional burst page.
The JetDirect's "burst" page is an unusual feature in a dedicated device.
<a class="ulink" href="http://h20015.www2.hp.com/en/document.jhtml?lc=en&amp;docName=bpj02755&amp;prodId=jd2337a" target="_top">HP (TM)
actually calls it a "trailer"</a>.
You can disable it as above, by setting <code class="code">banner: 0</code>, or simply telnet
to port 23 of the device, and issue the command <code class="code">banner 0</code>, then
<code class="code">quit</code>.
</p>
<p>
Some JetDirect units may need their firmware upgraded to add the
<code class="code">banner</code> command.
You will need to use the appropriate JetDirect network management
tools available from HP to do this.
You may need to set the SNMP read and write community strings to
known values in order to perform this upgrade.
To set these, use the following lines in the NPI configuration
file.
</p>
<pre class="programlisting">
get-community-name: read-password
set-community-name: write-password</pre>
<p>
(See the above section on configuring the JetDirect cards with DHCP.)
Just be aware of the security ramifications of leaving these entries
in a publicly available (via TFTP) configuration file...

</p>

<h4 class="title">
<a name="scanning"></a>Scanning under NetBSD (<a href="#printing-scanning">top</a>)
  </h4>
<p>
NetBSD supports various different SCSI scanners using the
<a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/graphics/sane-backends/README.html" target="_top"><code class="filename">graphics/sane-backends</code></a> scanning package.
Frontends for accessing the API provided by that package are in the
<a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/graphics/sane-frontends/README.html" target="_top"><code class="filename">graphics/sane-frontends</code></a> package, or it can
be called directly by graphics tools such as the
<a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/graphics/gimp/README.html" target="_top"><code class="filename">graphics/gimp</code></a>.
</p>
<p>
Note: in versions of NetBSD before 1.4.2 the in kernel <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ss+4+NetBSD-6.0+i386">ss(4)</a>
scanner driver may cause problems with <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/graphics/sane-backends/README.html" target="_top"><code class="filename">graphics/sane-backends</code></a>
and some scanners - the solution is either to recompile a kernel
without <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ss+4+NetBSD-6.0+i386">ss(4)</a> and use the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?uk+4+NetBSD-6.0+i386">uk(4)</a> device, or to upgrade to 1.4.2
or later.
</p>
<hr>
<h3 class="title">Disks &amp; Filesystems</h3>
<h4 class="title">
<a name="adding-a-disk"></a>Adding a disk to an existing system (<a href="#disks-filesystems">top</a>)
  </h4>
<p>
</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">Halt the system</li>
<li class="listitem">Connect the new drive</li>
<li class="listitem">If your machine has a PROM or BIOS that can list drives, check that the
    drive is recognised:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<span class="bold"><strong>recent sparc</strong></span>: Press <code class="code"><span class="bold"><strong>[STOP][A]</strong></span></code> before the boot
	starts, then at the "<code class="code">ok</code>" prompt, <code class="code"><span class="bold"><strong>probe-scsi</strong></span></code>.</li>
<li class="listitem">
<span class="bold"><strong>i386 with adaptec BIOS</strong></span>: Press <code class="code"><span class="bold"><strong>[CTRL][A]</strong></span></code> before
	the boot starts to enter the BIOS.</li>
<li class="listitem">
<span class="bold"><strong>other</strong></span>: more details welcomed :)</li>
</ul></div>
</li>
<li class="listitem">boot</li>
<li class="listitem">Check <a href="http://netbsd.gw.com/cgi-bin/man-cgi?dmesg+8+NetBSD-6.0+i386">dmesg(8)</a> output to confirm that the drive
    is recognized</li>
<li class="listitem">Write a <a href="http://netbsd.gw.com/cgi-bin/man-cgi?disklabel+5+NetBSD-6.0+i386">disklabel(5)</a> including the partitions using <a href="http://netbsd.gw.com/cgi-bin/man-cgi?disklabel+8+NetBSD-6.0+i386">disklabel(8)</a><br>
        (if the disk doesn't have a disklabel yet, you'll probably
         do something like:<pre class="programlisting"> disklabel -i -I sd1 # ignore any "sd1: no disk label"</pre>
    Partition 'c' is reserved for the entire NetBSD portion of a disk, and
    on some ports (notably i386), 'd' is similarly reserved for the entire disk.
    The following is a sample session setting the entire disk to
    be one filesystem 'e':
<pre class="programlisting">
	partition&gt; <span class="bold"><strong>e</strong></span>
	Filesystem type [?] [unused]: <span class="bold"><strong>4.2BSD</strong></span>
	Start offset [0c, 0s, 0M]:
	Partition size ('$' for all remaining) [0c, 0s, 0M]: <span class="bold"><strong>$</strong></span>
 	e: 234375000         0     4.2BSD      0     0     0   # (Cyl.    0 - 232514*)
	partition&gt; <span class="bold"><strong>W</strong></span>
	Label disk [n]? <span class="bold"><strong>y</strong></span>
	partition&gt; <span class="bold"><strong>Q</strong></span></pre>
    Inside <code class="code">disklabel -i</code> you can use '?' for additional help.
</li>
<li class="listitem">For each filesystem added, <code class="code"><span class="bold"><strong>newfs &lt;filesystem&gt;</strong></span></code>
    (where <span class="emphasis"><em>&lt;filesystem&gt;</em></span> is the partition's raw device,
     like /dev/rsd1e, /dev/rwd1f, ...)
</li>
<li class="listitem">Put the filesystems into <code class="code">/etc/fstab</code>
</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?fsck+8+NetBSD-6.0+i386">fsck(8)</a> them: <pre class="programlisting">fsck -f &lt;filesystem&gt;</pre>
</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?mount+8+NetBSD-6.0+i386">mount(8)</a> them: <pre class="programlisting">mount -va</pre>
</li>
</ol></div>
<p>
</p>

<h4 class="title">
<a name="moving-usr"></a>Moving /usr from root to a different partition (<a href="#disks-filesystems">top</a>)
  </h4>
<p>
    </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">Make sure that the desired new location (e.g. <code class="code">/dev/sd0e</code>)
	   does not overlap any existing partitions.
	   Check the output from <a href="http://netbsd.gw.com/cgi-bin/man-cgi?disklabel+8+NetBSD-6.0+i386">disklabel(8)</a>.</li>
<li class="listitem">If it does not already contain a filesystem, run
	<pre class="programlisting"># <span class="bold"><strong>newfs /dev/sd0e</strong></span></pre>
        </li>
<li class="listitem">Mount it and copy across data:
	<pre class="programlisting"># <span class="bold"><strong>mount /dev/sd0e /mnt</strong></span></pre>
        </li>
<li class="listitem"><pre class="programlisting"># <span class="bold"><strong>cd /usr</strong></span></pre></li>
<li class="listitem"><pre class="programlisting"># <span class="bold"><strong>pax -rw -pe . /mnt</strong></span></pre></li>
<li class="listitem"><pre class="programlisting"># <span class="bold"><strong>umount /mnt</strong></span></pre></li>
<li class="listitem">Edit <code class="code">/etc/fstab</code> and add
	   '<code class="code">/dev/sd0e /usr ffs rw 1 2</code>' (change <code class="code">/dev/sd0e</code>
	   for your situation).
        </li>
<li class="listitem">Shutdown to single user mode and make new mountpoint:
	<pre class="programlisting"># <span class="bold"><strong>shutdown now</strong></span></pre>
</li>
<li class="listitem"><pre class="programlisting"># <span class="bold"><strong>mv /usr /usr.old</strong></span></pre></li>
<li class="listitem"><pre class="programlisting"># <span class="bold"><strong>mkdir /usr</strong></span></pre></li>
<li class="listitem">Bring system up, test, and when all OK, '<code class="code">rm -rf
	   /usr.old</code>'.</li>
</ol></div>
<p>
</p>

<h4 class="title">
<a name="read-only-to-read-write"></a>How to mount a 'read-only' filesystem read/write? (<a href="#disks-filesystems">top</a>)
  </h4>
<p>
Use <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mount+8+NetBSD-6.0+i386">mount(8)</a>'s <code class="code">-u</code> (update) switch: '<span class="bold"><strong><code class="code">mount -u /</code></strong></span>'.  More than likely, you booted single-user
which mounts the root filesystem read-only by default.  This gives you a chance
to run fsck by hand before bringing the system up into multi-user.  One
other way to mount all the filesystems in <code class="code">/etc/fstab</code> as read/write
is to use '<span class="bold"><strong><code class="code">mount -a</code></strong></span>'.
</p>
<p>
However, the best way to do this is to go into multi-user mode by exiting
from your single-user shell.  This will mount all of the filesystems in
<code class="code">/etc/fstab</code> in whatever mode they are listed.
</p>

<h4 class="title">
<a name="using-fsck"></a>When is it safe to use fsck? (<a href="#disks-filesystems">top</a>)
  </h4>
<p>
Only use <a href="http://netbsd.gw.com/cgi-bin/man-cgi?fsck+8+NetBSD-6.0+i386">fsck(8)</a> on an unmounted or read-only filesystem.  Running
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?fsck+8+NetBSD-6.0+i386">fsck(8)</a> on a r/w filesystem is dangerous and could corrupt the filesystem.
If you bring the system up into single-user mode, the system will be
mounted read-only.  From there you can do an '<span class="bold"><strong><code class="code">fsck -p</code></strong></span>'
to check all filesystems before bringing the system up into multi-user
mode.  If the filesystem has previously been marked "clean," and you still
want to check it, you can use the <code class="code">-f</code> flag to <a href="http://netbsd.gw.com/cgi-bin/man-cgi?fsck+8+NetBSD-6.0+i386">fsck(8)</a>.
</p>
<p>
If you do make any changes to the filesystem using fsck, it is probably
best to type '<span class="bold"><strong><code class="code">reboot -n</code></strong></span>' to reboot the machine immediately
without syncing the disks.
</p>

<h4 class="title">
<a name="kernfs"></a>For what is <code class="code">/kern</code> used? (<a href="#disks-filesystems">top</a>)
  </h4>
<p>
It is used for mounting the kernfs filesystem.  See the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mount_kernfs+8+NetBSD-6.0+i386">mount_kernfs(8)</a>
manual page.
</p>

<h4 class="title">
<a name="procfs"></a>For what is <code class="code">/proc</code> used? (<a href="#disks-filesystems">top</a>)
  </h4>
<p>
It is used for mounting the procfs filesystem.  Consult <span class="emphasis"><em>The Design
and Implementation of the 4.3BSD UNIX Operating System</em></span> by Leffler,
McKusick, et al., p. 104-5, 436.  Also see the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mount_procfs+8+NetBSD-6.0+i386">mount_procfs(8)</a> manual page.
</p>
<p>

This is normally used by creating a '/proc' directory as root, then
adding the following to /etc/fstab (see <a href="http://netbsd.gw.com/cgi-bin/man-cgi?fstab+5+NetBSD-6.0+i386">fstab(5)</a>):<br>
<code class="code">/proc /proc procfs rw 0 0</code>
</p>
<p>

As <code class="code">/proc</code> in NetBSD is intended for process-related data only,
other entries known from linux are not present. This can be changed by
adding the "<code class="code">linux</code>" mount option to the file system flags,
though: <br>
<code class="code">/proc /proc procfs rw<span class="bold"><strong>,-olinux</strong></span> 0 0</code>
</p>
<p>
</p>

<h4 class="title">
<a name="cgd-swap"></a>Encrypted swap with <a href="http://netbsd.gw.com/cgi-bin/man-cgi?cgd+4+NetBSD-6.0+i386">cgd(4)</a> (<a href="#disks-filesystems">top</a>)
  </h4>
<p>
Since the topic of swap encryption pops up from time to time, this
information could be useful for some people who are interested in
encrypting their swap space but are not sure how to set it up.
</p>
<p>
Currently there is one limitation, cgd devices are created with
disklabel containing only one slice marked as 4.2BSD which is not
suitable for swapping into.  This is the reason why using cgd drive
as a swap device is not straightforward.  Roland Dowdeswell is looking
into this and it should be resolved in the near future.
</p>
<p>

A real world example:

  Our swap device wd0b will be configured as cgd1, using 256 bit aes-cbc
  key.  Step by step instructions follows:

</p>
<pre class="programlisting">
  1) generate a paramsfile for the cgd device.  the default file would be
     /etc/cgd/wd0b but i will use /etc/cgd/swap for better illustration:

     # cgdconfig -g -V none -k randomkey aes-cbc &gt; /etc/cgd/swap

  2) configure the cgd device over wd0b, (make sure wd0b is not used as a
     swap device at this moment):

     # cgdconfig cgd1 /dev/wd0b /etc/cgd/swap

  3) edit disklabel for cgd1, we need to create a valid swap slice.  save
     the disklabel to a file:

     # disklabel -e -I cgd1

     # /dev/rcgd1d:
     type: cgd
     disk: cgd
     label: default label
     flags:
     bytes/sector: 512
     sectors/track: 2048
     tracks/cylinder: 1
     sectors/cylinder: 2048
     cylinders: 128
     total sectors: 263655
     rpm: 3600
     interleave: 1
     trackskew: 0
     cylinderskew: 0
     headswitch: 0           # microseconds
     track-to-track seek: 0  # microseconds
     drivedata: 0

     4 partitions:
     #        size    offset     fstype  [fsize bsize cpg/sgs]
      d:    263655         0     4.2BSD      0     0     0   # (Cyl.    0 - 128*)

     create a swap slice and change label (that's not really necessary, just for
     our information):

     # /dev/rcgd1d:
     type: cgd
     disk: cgd
     label: swap
     flags:
     bytes/sector: 512
     sectors/track: 2048
     tracks/cylinder: 1
     sectors/cylinder: 2048
     cylinders: 128
     total sectors: 263655
     rpm: 3600
     interleave: 1
     trackskew: 0
     cylinderskew: 0
     headswitch: 0           # microseconds
     track-to-track seek: 0  # microseconds
     drivedata: 0

     4 partitions:
     #        size    offset     fstype  [fsize bsize cpg/sgs]
      a:    263655         0       swap                      # (Cyl.    0 - 128*)

     and save it to a file:

     # disklabel cgd1 &gt; /etc/cgd/swap.disklabel

  4) set up the cgd device to be configured automatically at boot.  add the
     following line into your /etc/cgd/cgd.conf:

     cgd1 /dev/wd0b /etc/cgd/swap

  5) now we need to restore our disklabel to the newly created cgd device at
     boot time.  create /etc/rc.conf.d/cgd with this simple function:

     swap_device="cgd1"
     swap_disklabel="/etc/cgd/swap.disklabel"
     start_postcmd="cgd_swap"

     cgd_swap()
     {
             if [ -f $swap_disklabel ]; then
                     disklabel -R -r $swap_device $swap_disklabel
             fi
     }

  6) add the cgd device into /etc/fstab as a swap device:

     /dev/cgd1a none swap sw 0 0</pre>
<p>

That's all.  Now you can activate your swap partition with 'swapctl -a
/dev/cgd1a' or just reboot.
</p>
<p>

What you see above is a setup from my laptop.
</p>
<pre class="programlisting">
   Device      1K-blocks     Used    Avail Capacity  Priority
   /dev/cgd1a     131827     8828   122999     7%    0</pre>
<p>
</p>
<hr>
<h3 class="title">Boot-Related Questions</h3>
<h4 class="title">
<a name="why-single-user"></a>What is single-user mode? Why and how should you use it? (<a href="#boot-related">top</a>)
  </h4>
<p>
'single-user' mode is when the kernel has booted, but only runs a
single shell on the console. If you boot single-user only the root
filesystem will be mounted, and it will be mounted read-only.  Among
the many uses for single-user mode are:
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<code class="code">fsck</code> your filesystem due to suspected
corruption.</li>
<li class="listitem">edit corrupted system configuration files in
<code class="code">/etc</code>.</li>
<li class="listitem">install a new set of binaries which you downloaded or compiled yourself.</li>
<li class="listitem">make a backup of your filesystem without worrying about interference from user processes.</li>
</ul></div>
<p>
You can enter single-user mode by running '<code class="code"><span class="bold"><strong>shutdown
now</strong></span></code>' as root on a running system, or  by booting the system
with the '-s' flag (the method for doing this varies from port to
port).
</p>
<p>
Once booted single-user you may find some of the following commands useful:
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<code class="code"><span class="bold"><strong>fsck -p ; mount -va</strong></span></code><br>
    Check the filesystems with <a href="http://netbsd.gw.com/cgi-bin/man-cgi?fsck+8+NetBSD-6.0+i386">fsck(8)</a>, then make them available with <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mount+8+NetBSD-6.0+i386">mount(8)</a>.
</li>
<li class="listitem">
<code class="code"><span class="bold"><strong>set -E</strong></span></code><br>
    Enable command line editing.
</li>
<li class="listitem">
<code class="code"><span class="bold"><strong>TERM=vt220 ; export TERM</strong></span></code><br>
    Set and export the TERM variable, to permit editors such as <a href="http://netbsd.gw.com/cgi-bin/man-cgi?vi+1+NetBSD-6.0+i386">vi(1)</a> to
    work. Note: You may need to use a different terminal type from
    'vt220', depending on the console type.
</li>
<li class="listitem">
<code class="code"><span class="bold"><strong>sh /etc/rc.d/network start</strong></span></code><br>
    Bring up the network. If you have any nfs mounted filesystems you
    may want to do this before the fsck and mount. If you have a system prior
    to NetBSD 1.5, the command to use is <code class="code"><span class="bold"><strong>sh /etc/netstart</strong></span></code>.
</li>
</ul></div>
<p>
</p>

<h4 class="title">
<a name="single-user-to-multi-user"></a>How to switch from single-user to multi-user (<a href="#boot-related">top</a>)
  </h4>
<p>
Exit the single-user shell with "exit" or ctrl-D.
</p>
<p>

The system will boot up to multi-user mode, starting all kind of services, etc.
Note that disks are not checked when going from single-user to multi-user
mode!
</p>

<h4 class="title">
<a name="boot-messages"></a>How to read the boot messages? (<a href="#boot-related">top</a>)
  </h4>
<p>
The system message buffer can be displayed with <a href="http://netbsd.gw.com/cgi-bin/man-cgi?dmesg+8+NetBSD-6.0+i386">dmesg(8)</a>. This is usually
(in 1.4 and later) automatically stored in /var/run/dmesg.boot immediately
after each boot. If kernfs (see <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mount_kernfs+8+NetBSD-6.0+i386">mount_kernfs(8)</a>) is enabled, as in install
kernels, you can also <code class="code"><span class="bold"><strong>more /kern/msgbuf</strong></span></code>.
</p>

<h4 class="title">
<a name="shutting-down"></a>How to shutdown the machine? (<a href="#boot-related">top</a>)
  </h4>
<p>
To drop back into single-user mode, use '<span class="bold"><strong><code class="code">shutdown now</code></strong></span>'.  To
halt the machine, use '<span class="bold"><strong><code class="code">shutdown -h now</code></strong></span>'.  On some ports,
you may need to use '<span class="bold"><strong><code class="code">shutdown -p now</code></strong></span>' to actually power off
the machine.  Please see the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?shutdown+8+NetBSD-6.0+i386">shutdown(8)</a> manual page for complete details.
</p>

<h4 class="title">
<a name="rebooting"></a>How to reboot the machine? (<a href="#boot-related">top</a>)
  </h4>
<p>
Use '<span class="bold"><strong><code class="code">shutdown -r now</code></strong></span>' or '<span class="bold"><strong><code class="code">reboot</code></strong></span>'.  See the
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?shutdown+8+NetBSD-6.0+i386">shutdown(8)</a> or <a href="http://netbsd.gw.com/cgi-bin/man-cgi?reboot+8+NetBSD-6.0+i386">reboot(8)</a> manual pages for further details.
</p>

<h4 class="title">
<a name="cron-reboot"></a>Starting a program at boot time (<a href="#boot-related">top</a>)
  </h4>
<p>
To start programs at system boot time, any commands can be added to
<code class="code">/etc/rc.local</code>, which will be ran at the end of the boot
process.
</p>
<p>

As an alternative mostly for non-root users, the Vixie <a href="http://netbsd.gw.com/cgi-bin/man-cgi?cron+8+NetBSD-6.0+i386">cron(8)</a> (used
in NetBSD)'s special <span class="bold"><strong>@reboot</strong></span> time specification can
be used to start a given program at <a href="http://netbsd.gw.com/cgi-bin/man-cgi?cron+8+NetBSD-6.0+i386">cron(8)</a> startup time, which
usually coincides with the system booting. This also allows users
without root privileges to run commands automatically at startup.
</p>
<hr>
<h3 class="title">Memory/Swap Configuration</h3>
<h4 class="title">
<a name="swap"></a>How much swap space (<a href="#memory-swap">top</a>)
  </h4>
<p>
    On older unix systems it was recommended to have twice as much swap
    space as RAM. This was because active pages in RAM had to have pages
    allocated in swap, effectively limiting the total virtual memory to
    the size of the swap space.
    On NetBSD this is no longer true, so total virtual memory is approximately
    swap + RAM.
</p>
    <p>
    Under NetBSD there are three primary uses for swap space:
</p>
    <div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<span class="bold"><strong>Additional virtual memory</strong></span><br>
	Less active pages containing modified data can be migrated
	to swap space allowing virtual memory to be larger than
	physical memory.
    </li>
<li class="listitem">
<span class="bold"><strong>An area for kernel core dumps</strong></span><br>
	This is then read by <a href="http://netbsd.gw.com/cgi-bin/man-cgi?savecore+8+NetBSD-6.0+i386">savecore(8)</a>, on boot. For this to
	work the primary swap partition must be slightly larger
	than the total RAM.
    </li>
<li class="listitem">
<span class="bold"><strong>For <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mfs+8+NetBSD-6.0+i386">mfs(8)</a> filesystems</strong></span><br>
	Classically mounted on /tmp in order to speed up any
	programs using /tmp, by adding the following to the
	<a href="http://netbsd.gw.com/cgi-bin/man-cgi?fstab+5+NetBSD-6.0+i386">fstab(5)</a> file:
	<pre class="programlisting">	swap  /tmp  mfs  rw,-s=<span class="emphasis"><em>SIZE</em></span> 0 0</pre>
	where <span class="emphasis"><em>SIZE</em></span> is in 512byte blocks.
	The space required is taken from the swap space as the
	filesystem is used.
    </li>
</ol></div>
    <p>
    The 'correct' value for swap is dependent on the usage of the
    system, but for some general rules:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">A good base size is the larger of RAM or 32MB, plus the total size
	of any <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mfs+8+NetBSD-6.0+i386">mfs(8)</a> filesystems.
    </li>
<li class="listitem">If you intend to run <a href="http://netbsd.gw.com/cgi-bin/man-cgi?X+7+NetBSD-6.0+i386">X(7)</a>, add the larger of 1/2 of RAM or 16MB.
    </li>
<li class="listitem">Always try to split swap across as many disks as possible to
	increase the available swap bandwidth.
    </li>
<li class="listitem">Guess high, rather than low - running out of swap can cause the system
	to have to kill running processes.
    </li>
</ul></div>
<p>
</p>

<h4 class="title">
<a name="adding-swap"></a>Adding more swap to a running system (<a href="#memory-swap">top</a>)
  </h4>
<p>
    Systems should be configured with sufficient swap space, as per
    the <a class="ulink" href="#swap" target="_top">How much swap</a> entry.
</p>
    <p>
    There are three ways to add swap to a configured system:
</p>
    <p>
    </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<span class="bold"><strong>Rebuild the system disk, using a larger swap partition.
	</strong></span><br>
	While arguably the cleanest solution, this obviously involves
	significant disruption.
    </li>
<li class="listitem">
<span class="bold"><strong>Add an additional swap partition.</strong></span><br>
	When you add a disk it is usually a good idea to include a small
	'b' partition for additional swap, and add an entry of the form:
	<pre class="programlisting">	/dev/<span class="emphasis"><em>DISK</em></span>b       none    swap sw 0 0</pre>
	to your <code class="code">/etc/fstab</code> file to automatically enable on boot.
	(Where <code class="code"><span class="emphasis"><em>DISK</em></span></code> is the disk name such as 'sd1' or 'wd2').
    </li>
<li class="listitem">
<p><span class="bold"><strong>Create a swap file.</strong></span></p>
<p>
	The quickest and simplest option is to create a file in an existing
	filesystem, and use it as additional swap space. While accessing this
	will be slightly slower than dedicated swap partitions (due to
	fragmentation and filesystem overhead), it is ideal for solving a
	temporary swap shortage.
	</p>
	<p>
	To add 10 MBytes of swap space is as easy as selecting a filesystem
	with sufficient free space and:
	</p>
<pre class="programlisting">	# <span class="bold"><strong>dd if=/dev/zero bs=1m count=10 of=/somefilesystem/swap</strong></span>
	# <span class="bold"><strong>chmod 600 /somefilesystem/swap</strong></span>
	# <span class="bold"><strong>swapctl -a -p 1 /somefilesystem/swap</strong></span></pre>
<p>
	The <a href="http://netbsd.gw.com/cgi-bin/man-cgi?dd+1+NetBSD-6.0+i386">dd(1)</a> command creates a 10 MByte file
	`<code class="code">/somefilesystem/swap</code>'.  This swap file needs to
	be <a href="http://netbsd.gw.com/cgi-bin/man-cgi?chmod+1+NetBSD-6.0+i386">chmod(1)</a> 600 so that unprivileged users may not read
	its contents (<a href="http://netbsd.gw.com/cgi-bin/man-cgi?swapctl+8+NetBSD-6.0+i386">swapctl(8)</a> will reject world readable files).
	Then <a href="http://netbsd.gw.com/cgi-bin/man-cgi?swapctl+8+NetBSD-6.0+i386">swapctl(8)</a> command adds <code class="code">/somefilesystem/swap</code>
	to the system swap space at priority 1.  Priority 0 is the
	(default) highest priority, and since swapping to files is
	slightly slower we only want the system to use the file
	when conventional swap has all been used.
	</p>
	<p>
	To make swapping to that file permanent and enable it on
	every reboot, put something like the following into
	/etc/fstab:
	</p>
	<pre class="programlisting">/somefilesystem/swap none swap sw,priority=1 0 0</pre>
    </li>
</ol></div>
<p>
</p>

<h4 class="title">
<a name="tuning-vm"></a>Tuning Virtual Memory to improve performance on low-memory systems (<a href="#memory-swap">top</a>)
  </h4>
<p>
According to a <a class="ulink" href="http://mail-index.NetBSD.org/tech-kern/2002/11/27/0005.html" target="_top">
post by Simon Burge</a> on the tech-kern list, it is possible to greatly improve
the performance of small-memory machines by tweaking the virtual memory settings.
While it is in your best interests to read his entire post and decide for yourself
what your settings should be, the gist is that you'll want to run <code class="code">sysctl -w
vm.anonmax=95</code>. According to the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?sysctl+3+NetBSD-6.0+i386">sysctl(3)</a> page, this changes "The percentage
of physical memory which will be reclaimed from other types of memory usage to
store anonymous application data."
</p>
<hr>
<h3 class="title">Common (and less common) problems</h3>
<h4 class="title">
<a name="nroff-missing"></a><span class="bold"><strong>/usr/bin/nroff: not found</strong></span> when running 'man' (<a href="#common-problems">top</a>)
  </h4>
<p>
You need to install the 'text' set, text.tgz. See your base install notes.
</p>

<h4 class="title">
<a name="var-mail-permissions"></a>'<span class="bold"><strong>Unable to lock mailbox: Permission denied</strong></span>' when reading mail (<a href="#common-problems">top</a>)
  </h4>
<p>
Check the permissions on the <code class="code">/var/mail</code> directory. They should be
'<code class="code">drwxrwxrwt</code>':
</p>
<pre class="programlisting">
% <span class="bold"><strong>ls -ld /var/mail</strong></span>
drwxrwxrwt  2 root  wheel  512 Nov  6 08:21 /var/mail</pre>
<p>
If they are not, as root run '<code class="code"><span class="bold"><strong>chmod 1777 /var/mail</strong></span></code>'.
</p>

<h4 class="title">
<a name="kernel-not-netbsd"></a><span class="bold"><strong>netstat: kvm_read kvm_read: Bad address</strong></span> when running '<code class="code">netstat -r</code>' (<a href="#common-problems">top</a>)
  </h4>
<p>
This is nothing to worry about.  Basically, the file <code class="code">/netbsd</code>
is not your current kernel.  A number of programs (such as <code class="code">ps</code>,
<code class="code">who</code>, <code class="code">systat</code> etc.) and libkvm <a href="http://netbsd.gw.com/cgi-bin/man-cgi?kvm+3+NetBSD-6.0+i386">kvm(3)</a>, access
<code class="code">/netbsd</code> to learn what's going on in the kernel.  So you
can simply rename your current kernel to <code class="code">/netbsd</code> to make
this kind of error go away.  Make sure that you are not overwriting
a working kernel when you do this, though, unless that is exactly
what you intend to do.
</p>

<h4 class="title">
<a name="libkvm-mismatch"></a>When I try '<code class="code">netstat -r</code>' I get an endless stream of question marks.  What's wrong? (<a href="#common-problems">top</a>)
  </h4>
<p>
That's a mis-match between <code class="code">libkvm/netstat</code> and <code class="code">/netbsd</code>.
Or it's that you're running a kernel that's not named <code class="code">/netbsd</code>.
Other symptoms of this problem are likely to be that <code class="code">who</code>,
<code class="code">ps</code>, <code class="code">ifconfig</code>, and <code class="code">systat</code> will not work either.
If you update your binaries and your kernel at the same time, then you
should be OK.
</p>

<h4 class="title">
<a name="kernel-upgrade"></a><code class="code">w</code>, <code class="code">ps</code>, and <code class="code">netstat</code> do not work after upgrading to a new kernel (<a href="#common-problems">top</a>)
  </h4>
<p>
One of two things.  Either your currently booted kernel isn't named
<code class="code">/netbsd</code> or else you have a mismatch between your kernel and the
binaries you are using.  In the first case, simply making a link from your
currently booted kernel to <code class="code">/netbsd</code> will solve the problem.
</p>
<p>
In the second case, dynamically linked binaries can usually be fixed by
upgrading libkvm to match your new kernel.  Statically linked binaries need
to be replaced with more recent versions.  Since they are statically
linked, if you are going to recompile them yourself, you need to rebuild
<code class="code">libkvm.a</code> <span class="bold"><strong>before</strong></span> you rebuild the program in question.
</p>
<p>
Thanks to John Wittkowski (jpw@netscape.com), here is a list of most of the
programs (besides <code class="code">/bin/ps</code>) that depend on libkvm (all of these are
in <code class="code">/usr/bin</code>):
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem"><code class="code">fstat</code></li>
<li class="listitem"><code class="code">gdb</code></li>
<li class="listitem"><code class="code">ipcs</code></li>
<li class="listitem"><code class="code">netstat</code></li>
<li class="listitem"><code class="code">nfsstat</code></li>
<li class="listitem"><code class="code">systat</code></li>
<li class="listitem"><code class="code">uptime</code></li>
<li class="listitem"><code class="code">vmstat</code></li>
<li class="listitem"><code class="code">w</code></li>
</ul></div>
<p>
</p>

<h4 class="title">
<a name="proc-size-mismatch"></a>After changing kernels, 'ps' reports <span class="bold"><strong>"proc size mismatch"</strong></span> (<a href="#common-problems">top</a>)
  </h4>
<p>
Like the previous three questions on this subject, the answer is most
likely that your libkvm is out of sync with your kernel or binaries.  To
solve this problem, you can either get a binary distribution which matches
your kernel, or you can build you own by following the instructions below:

</p>
<pre class="programlisting">
If you get the "proc size mismatch" error and you determine
that you need to update your libs, here's what to do:

1. Get all the source code. If you're not willing to do this
   and recompile things than you'll have to find someone who
   will do it for you and you can try installing everything
   by hand.

2. Make sure that your include files are up to date. Do
   this by:
      cd /usr/src
      make includes
   This will take a while. I had some trouble with this
   because some of the Makefiles didn't have the INSTALL
   variable defined. Whenever the "make includes" failed,
   I went to the last directory listed and added the
   following line to the Makefile:
      INSTALL=/usr/bin/install
   I had to do this several times before the make finished
   without any errors.

   (If you make sure that /usr/bin/make and all the files in
   /usr/share/mk are up to date first, the above difficulties
   can probably be avoided)

3. Rebuild the libkvm and install it:
      cd /usr/src/lib/libkvm
      make
      make install
   Note that in order to get the libkvm to compile on
   my system I had to add the following link:
      cd /usr/include/machine
      ln -s ../m68k/kcore.h kcore.h
   This may have been a quirk of my system so try
   compiling without it first.

4. Then rebuild the binaries that are STATICALLY linked to
   libkvm. The only statically linked program that I am
   aware of is "/bin/ps". To rebuild ps, simply:
      cd /usr/src/bin/ps
      make
      make install

5. You may or may not need to rebuild the binaries that
   are dynamically linked to libkvm. This is because (I
   think) if the major version number of the lib changes
   then the old binaries will expect the old version
   number and not work with the newer version of the lib.
   For example, my old libkvm was libkvm.so.4.0. The new
   one was libkvm.so.5.0. Without recompiling the
   dynamically linked binaries, it would still complain
   about "proc size mismatch" (if the 4.0 lib was still
   there) or some lib missing error (if the 4.0 lib
   had been removed from /usr/lib). If the version minor
   number changes (4.0 to 4.1, for example), I think it
   will run with a warning and so you may not need to
   recompile all of these things.

   The dynamically linked binaries that I am aware of
   will give the  "proc size mismatch" error (if the 4.0
   lib was still there) or some lib missing error (if the
   4.0 lib had been removed from /usr/lib). If the version
   minor number changes (4.0 to 4.1, for example), I think
   it will run with a warning, and you may not need to
   recompile all of these things.

   The dynamically linked binaries that I am aware of
   are:
      /usr/bin/fstat
      /usr/bin/gdb
      /usr/bin/ipcs
      /usr/bin/netstat
      /usr/bin/nfsstat
      /usr/bin/systat
      /usr/bin/uptime (linked to /usr/bin/w)
      /usr/bin/vmstat
      /usr/bin/w
   Note that /usr/bin/uptime is a link to /usr/bin/w and
   will be set up properly when you do the "make install"
   for w.

   To recompile these, do the following:
      cd /usr/src/usr.bin/&lt;cmd&gt;
      make
      make install
   For example, to recompile /usr/bin/vmstat:
      cd /usr/src/usr.bin/vmstat
      make
      make install</pre>
<p>

Much thanks to John Wittkowski (jpw@netscape.com) for providing such a
detailed answer for this one.

</p>
<p>
A little background: the reason that these system utilities need to
grovel through kernel memory to get information, including going
through all the trouble mentioned above, is that this method also
works on kernel crash dumps, which can be quite a useful feature
when debugging kernels.
</p>

<h4 class="title">
<a name="hash-map-alias0"></a>'<span class="bold"><strong>hash map "Alias0":unsafe map file
    <code class="code">/etc/aliases</code>: No such file or directory</strong></span>' is displayed (<a href="#common-problems">top</a>)
  </h4>
<p>
You can fix this by typing '<span class="bold"><strong><code class="code">newaliases</code></strong></span>' as root.<br>
Sendmail reports this when the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?aliases+5+NetBSD-6.0+i386">aliases(5)</a> file is not present. Note that
sendmail(8) actually uses <code class="code">/etc/aliases.db</code> (which is a fast lookup
hash(3) map built from <code class="code">/etc/aliases</code>), so the error message can be
a little misleading.  This should only really be noticed in NetBSD 1.3
to 1.4, other versions have a different <code class="code">/etc/sendmail.cf</code> which
instructs sendmail to automatically rebuild <code class="code">/etc/aliases.db</code> as
needed.  If you are not running at least NetBSD 1.4.1 you should probably
upgrade to a newer <a class="ulink" href="../../releases/formal.html" target="_top">formal release</a>.
</p>

<h4 class="title">
<a name="portmap-messup"></a>How do I prevent <code class="code">portmap</code> messages from showing up in shells, when logged in as root (<a href="#common-problems">top</a>)
  </h4>
<p>
Use <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/security/sudo/README.html" target="_top"><code class="filename">security/sudo</code></a> and never log in as root.
</p>
<p>
If you must log in as root, then you can edit your
<code class="code">/etc/syslog.conf</code> file and remove the necessary facilities to
prevent the annoying messages.  In most cases, it's sufficient to disable
<code class="code">auth.debug</code> in the line reading:
</p>
<pre class="programlisting">*.notice;auth.debug                                     root</pre>
<p>
This will eliminate those annoying
<code class="code">portmap&nbsp;[pid]:&nbsp;connect&nbsp;from&nbsp;some.other.host&nbsp;...</code>
messages.  Be sure to <code class="code">kill&nbsp;-HUP</code> the pid of
your <code class="code">syslogd</code> process.
</p>
<p>
You may also wish to look at the <a class="ulink" href="../x/#xconsole" target="_top">FAQ entry</a>
for using an <code class="code">xconsole</code>.
</p>

<h4 class="title">
<a name="locales"></a>How do I get umlauts and other localised characters displayed? (<a href="#common-problems">top</a>)
  </h4>
<p>

Per default, NetBSD has already numerous locales installed.  You can find
them in <code class="code">/usr/share/locale</code>.  Choose the locale most suitable for your
location and set the LC_ALL environment variable accordingly.  Note that it is
<span class="emphasis"><em>not</em></span> sufficient to set LC_ALL to, say, ``de_DE'', but that you should
use the <span class="emphasis"><em>full</em></span> locale, such as ``de_DE.ISO8859-15''.
</p>
<hr>
<h3 class="title">Other Questions</h3>
  <h4 class="title">
<a name="bluetooth"></a>How does Bluetooth support in NetBSD work? (<a href="#other-questions">top</a>)
  </h4>
  <p>
    The first official NetBSD version that comes with Bluetooth
    support is NetBSD 4.0.
  </p>

<h4 class="title">
<a name="editing-files"></a>Editing files under NetBSD (<a href="#other-questions">top</a>)
  </h4>
<p>
There are two obvious options in the base system:
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?ed+1+NetBSD-6.0+i386">ed(1)</a> (Line orientated text editor)<br>
    <code class="code">ed</code> is a very simplistic text editor. It has a command
    mode, (active when first started) and an input mode. Its primary
    advantages are it is available even in single-user mode with
    only the '/' filesystem mounted, and will work even without a
    correct terminal type set.  It is worth gaining a basic
    understanding of <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ed+1+NetBSD-6.0+i386">ed(1)</a> - enough to fix <a href="http://netbsd.gw.com/cgi-bin/man-cgi?fstab+5+NetBSD-6.0+i386">fstab(5)</a> and <a href="http://netbsd.gw.com/cgi-bin/man-cgi?rc.conf+5+NetBSD-6.0+i386">rc.conf(5)</a>
    files in an emergency.</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?vi+1+NetBSD-6.0+i386">vi(1)</a> (Screen orientated text editor)<br>
    <code class="code">vi</code> retains the command and input modes of <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ex+1+NetBSD-6.0+i386">ex(1)</a>, but
    adds a full screen visual interface. vi is the only screen
    editor available in the base install, and requires a valid
    terminal type to run.<br>
    There are a number of online vi tutorials:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/editors/vilearn/README.html" target="_top"><code class="filename">editors/vilearn</code></a> - in pkgsrc and highly recommended.</li>
<li class="listitem">
<a class="ulink" href="http://www.thomer.com/vi/vi.html" target="_top">
	VI lovers home page</a>.</li>
<li class="listitem">
<a class="ulink" href="https://engineering.purdue.edu/ECN/Resources/KnowledgeBase/Categories/editors/vi/" target="_top">Purdue
	University Engineering Computer Network</a>.</li>
<li class="listitem">
<a class="ulink" href="http://engr.smu.edu/co/help/vi-tutorial.html" target="_top">A
	number of references at the Southern Methodist University</a>.
    </li>
</ul></div>
    If you are trying to use vi to setup <a href="http://netbsd.gw.com/cgi-bin/man-cgi?rc.conf+5+NetBSD-6.0+i386">rc.conf(5)</a>, you should
    read the entry on <a class="ulink" href="#why-single-user" target="_top">single-user
    mode</a>.
    </li>
</ul></div>
<p>
</p>
<p>
There are a large number of editors available under the
<a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/editors/README.html" target="_top"><code class="filename">editors</code></a>
category in pkgsrc, including:
</p>
<p>
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<span class="bold"><strong><a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/editors/joe/README.html" target="_top"><code class="filename">editors/joe</code></a></strong></span><br>
    A small, fast editor capable of emulating WordStar and emacs key
    bindings (<span class="emphasis"><em>jstar</em></span>, <span class="emphasis"><em>jmacs</em></span>).
    <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/editors/joe/README.html" target="_top"><code class="filename">editors/joe</code></a> will be
    familiar to people who have used Borland IDEs.
    </li>
<li class="listitem">
<span class="bold"><strong><a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/editors/pico/README.html" target="_top"><code class="filename">editors/pico</code></a></strong></span><br>
    A very simple to use text editor, as used in the
    <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/mail/pine/README.html" target="_top"><code class="filename">mail/pine</code></a>
    mail package.
    </li>
<li class="listitem">
<span class="bold"><strong><a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/editors/nedit/README.html" target="_top"><code class="filename">editors/nedit</code></a></strong></span><br>
    A simple yet reasonably flexible X based GUI editor.
    </li>
<li class="listitem">
<span class="bold"><strong><a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/editors/emacs/README.html" target="_top"><code class="filename">editors/emacs</code></a></strong></span><br>
    A proverbial 'everything and the kitchen sink' editor, including a
    complete lisp interpreter. Not recommended for small machines.
    </li>
</ul></div>
<p>

</p>

<h4 class="title">
<a name="rebuilding-dev"></a>Rebuilding <code class="filename">/dev</code> (<a href="#other-questions">top</a>)
  </h4>
<p>
The <code class="filename">/dev</code> directory contains the necessary device
files for accessing hardware and pseudo devices. If it becomes damaged,
much strangeness can ensue. To rebuild the <code class="filename">/dev</code>
directory, you should first boot single-user (it should be possible
to perform while multiuser, but this is not recommended), then:
</p>
<pre class="programlisting">
mkdir /newdev
cd /newdev
cp /dev/M* .
sh MAKEDEV all
cd /
mv dev olddev; mv newdev dev
rm -r olddev</pre>
<p>
</p>

<h4 class="title">
<a name="connecting-a-ups"></a>Connecting a UPS to a NetBSD system (<a href="#other-questions">top</a>)
  </h4>
<p>
Connecting one is trivial, but monitoring it such that the NetBSD can shut down
cleanly when the power is about to fail requires a little more:<br>
Simon J. Gerraty has a page on using a
<a class="ulink" href="http://www.crufty.net/sjg/apcmon.html" target="_top">APC Smart-UPS</a>.
If you are writing your own software to talk to the UPS you will probably need
to set the softcar flag via tcsetattr(). Wolfgang Rupprecht has researched the
field briefly:
</p>
<p>
</p>
<div class="blockquote"><blockquote class="blockquote">
There two different types of UPS interfaces, sometimes both are
available on the same UPS. The 9-pin connector on the UPS is never
a wired up as a normal PC-style rs-232.  At best its a three-wire
rs-232 interface, with the pins rearranged just to keep things
interesting.  At worst its a contact closure signal that is not
even at the rs-232 signaling voltages and one must use a funny
cable with level-translators in it to convert the voltages to
something the rs-232 port can even see transitions on.  The signal
from the latter type of interface can only send out a one-bit
(normal / powerfail) signal.  It must be run into some modem-control
line such as DCD and is then detected via a program that checks
the status of that modem control line.  Unless one is careful, it is
possible to confuse the modem-control-line-only cables that come
with some UPSs as a real rs-232 cable.
<br><br>
Poking around APC web page, and a few promising altavista hits
revealed that they have 3 basic interfaces.  Low end UPSs ("back
UPS") have only the modem-control line type interface.  The two high
end lines ("Back UPS Pro", "Smart UPS") have both combination modem
control line and 3-wire rs-232 signals available.  In both cases one
needs to use one of two special cables.  The cable for the modem
control line interface has transistors and diodes in it to do the
level shifting (and power grabbing from some of the other wires).  It's
a real kludge, with the word UGLY coming to mind as the correct
modifier.  The second type of cable will get the UPS talking serially,
but some of the 3-rd party docs indicated that the UPS will only talk
if you send 2 stop bits.  The protocols don't appear to be officially
documented and the back-UPS pro and smart UPS appear to talk different
serial line protocols.  Only the back-UPS pro line appears to have any
3-rd party support, and many of the details of the protocol are only
guessed at.
<br><br>
Competitors all seem to have similar offerings (modem control line
only, and proprietary serial line protocols with special cables).  In
no case could I find someone with an openly documented standard.
</blockquote></div>
<p>
</p>

<h4 class="title">
<a name="changing-motd"></a>After changing <code class="code">/etc/motd</code> something reset it to its original contents (<a href="#other-questions">top</a>)
  </h4>
<p>
If you delete the header of <code class="code">/etc/motd</code>, the startup process
will overwrite your
changes on boot.  This can be disabled by setting
<code class="code">update_motd=NO</code> in <code class="code">/etc/rc.conf</code>, in which
<code class="code">/etc/motd</code> will not be touched at all, and you can change it at
will.

</p>

<h4 class="title">
<a name="selling-hardware"></a>Where to sell NetBSD related hardware? (<a href="#other-questions">top</a>)
  </h4>
<p>
For occasional items you can generally post to a given port's <a class="ulink" href="../../mailinglists/" target="_top">mailing list</a>, and to <a class="ulink" href="mailto:netbsd-forsale@mono.org" target="_top">netbsd-forsale@mono.org</a>.
If you would be willing to donate any hardware to assist in the
development of NetBSD you should check the <a class="ulink" href="../../contrib/hardware.html" target="_top">Hardware contributions page</a>, or
contact <a class="ulink" href="mailto:finance-exec@NetBSD.org" target="_top">finance-exec@NetBSD.org</a>.
</p>

<h4 class="title">
<a name="setup-ccd"></a>Setting up a striped (ccd) drive (<a href="#other-questions">top</a>)
  </h4>
<p>

Disk striping can either be done with RAIDframe or <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ccd+4+NetBSD-6.0+i386">ccd(4)</a> in NetBSD.
Here is how to use <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ccd+4+NetBSD-6.0+i386">ccd(4)</a>:

</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">disklabel all disks:<br>
create the partitions you want to concatenate, make sure there's an offset to
the beginning (I think 16 sectors is more than enough - but I'm not sure). I
don't know if the type matters, I've used "normal" 4.2BSD partitions.
</li>
<li class="listitem">configure the ccd.<br>
For performance tuning you will have to experiment a little to find the best
interleave. 48 works fine for me with two disks. AFAIK with 16 and some other
numbers it can happen that all inodes will be on the same disk, which should
be avoided for performance reasons. IIRC I got some problems, if the number of
sectors of an component is not a multiple of the interleave.
</li>
<li class="listitem">disklabel the ccd as you would do with a normal harddisk</li>
<li class="listitem">newfs the ccd.   </li>
<li class="listitem">mount it.</li>
</ol></div>
<p>
</p>
<p>
See the <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ccd+4+NetBSD-6.0+i386">ccd(4)</a> and <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ccdconfig+8+NetBSD-6.0+i386">ccdconfig(8)</a> man pages for more information.
</p>

<h4 class="title">
<a name="edit-fonts"></a>Utility for editing or creating console bitmap fonts? (<a href="#other-questions">top</a>)
  </h4>
<p>
Install the <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/sysutils/pcvt-utils/README.html" target="_top"><code class="filename">sysutils/pcvt-utils</code></a> package.
It provides fed and fontedit:
two font editors that can also be used on
the fonts in <code class="filename">/usr/share/wscons/fonts</code>.
</p>
</div></div></div>
<div class="navfoot"></div>
<div id="footer"><div id="footerContent"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  Contact</a> |
      </span><span class="footcopy"><a href="../../about/disclaimer.html">
      Disclaimer</a> |

      <span class="copyright">Copyright  1994-2013 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup></sup> is a registered trademark of The NetBSD
	Foundation, Inc.</span>
</center></div></div>
</div></body>
</html>
